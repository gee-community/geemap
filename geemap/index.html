
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A Python package for interactive mapping with Google Earth Engine">
      
      
        <meta name="author" content="Qiusheng Wu">
      
      
        <link rel="canonical" href="https://geemap.org/geemap/">
      
      
        <link rel="prev" href="../foliumap/">
      
      
        <link rel="next" href="../kepler/">
      
      
      <link rel="icon" href="../assets/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.50">
    
    
      
        <title>geemap module - geemap</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.a40c8224.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Google+Sans:300,300i,400,400i,700,700i%7CRegular:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Google Sans";--md-code-font:"Regular"}</style>
      
    
    
      <link rel="stylesheet" href="../css/timeago.css">
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      
  


  
  

<script id="__analytics">function __md_analytics(){function e(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],e("js",new Date),e("config","G-H322CB6ZEC"),document.addEventListener("DOMContentLoaded",(function(){document.forms.search&&document.forms.search.query.addEventListener("blur",(function(){this.value&&e("event","search",{search_term:this.value})}));document$.subscribe((function(){var t=document.forms.feedback;if(void 0!==t)for(var a of t.querySelectorAll("[type=submit]"))a.addEventListener("click",(function(a){a.preventDefault();var n=document.location.pathname,d=this.getAttribute("data-md-value");e("event","feedback",{page:n,data:d}),t.firstElementChild.disabled=!0;var r=t.querySelector(".md-feedback__note [data-md-value='"+d+"']");r&&(r.hidden=!1)})),t.hidden=!1})),location$.subscribe((function(t){e("config","G-H322CB6ZEC",{page_path:t.pathname})}))}));var t=document.createElement("script");t.async=!0,t.src="https://www.googletagmanager.com/gtag/js?id=G-H322CB6ZEC",document.getElementById("__analytics").insertAdjacentElement("afterEnd",t)}</script>
  
    <script>"undefined"!=typeof __md_analytics&&__md_analytics()</script>
  

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#geemap-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="geemap" class="md-header__button md-logo" aria-label="geemap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            geemap
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              geemap module
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
          <a href="javascript:void(0)" class="md-search__icon md-icon" title="Share" aria-label="Share" data-clipboard data-clipboard-text="" data-md-component="search-share" tabindex="-1">
            
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9a3 3 0 0 0-3 3 3 3 0 0 0 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.15c-.05.21-.08.43-.08.66 0 1.61 1.31 2.91 2.92 2.91s2.92-1.3 2.92-2.91A2.92 2.92 0 0 0 18 16.08"/></svg>
          </a>
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/gee-community/geemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="geemap" class="md-nav__button md-logo" aria-label="geemap" data-md-component="logo">
      
  <img src="../assets/logo.png" alt="logo">

    </a>
    geemap
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/gee-community/geemap" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://book.geemap.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Book
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../installation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Installation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../get-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Get Started
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../usage/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Usage
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../cheatsheet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cheat Sheet
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tutorials/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tutorials
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://courses.geemap.org" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Courses
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../contributing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributing
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../citations/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Citations
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FAQ
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../changelog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Changelog
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://youtube.com/@giswqs" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    YouTube Channel
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="https://github.com/gee-community/geemap/issues" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Report Issues
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" checked>
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    API Reference
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            API Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ai/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ai module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    basemaps module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cartoee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    cartoee module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../chart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    chart module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../colormaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    colormaps module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../common/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    common module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../conversion/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    conversion module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    core module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../coreutils/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    coreutils module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    datasets module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../deck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    deck module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ee_tile_layers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ee_tile_layers module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    examples module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../foliumap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    foliumap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    geemap module
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    geemap module
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap" class="md-nav__link">
    <span class="md-ellipsis">
      geemap.geemap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ImageOverlay" class="md-nav__link">
    <span class="md-ellipsis">
      ImageOverlay
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      draw_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_control_lite" class="md-nav__link">
    <span class="md-ellipsis">
      draw_control_lite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      draw_features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_last_feature" class="md-nav__link">
    <span class="md-ellipsis">
      draw_last_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer" class="md-nav__link">
    <span class="md-ellipsis">
      draw_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_layer_dict" class="md-nav__link">
    <span class="md-ellipsis">
      ee_layer_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_raster_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_raster_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_raster_layers" class="md-nav__link">
    <span class="md-ellipsis">
      ee_raster_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_vector_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_vector_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_vector_layers" class="md-nav__link">
    <span class="md-ellipsis">
      ee_vector_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_roi" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_rois" class="md-nav__link">
    <span class="md-ellipsis">
      user_rois
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add" class="md-nav__link">
    <span class="md-ellipsis">
      add()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayer" class="md-nav__link">
    <span class="md-ellipsis">
      addLayer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayerControl" class="md-nav__link">
    <span class="md-ellipsis">
      addLayerControl()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_census_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_census_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_circle_markers_from_xy" class="md-nav__link">
    <span class="md-ellipsis">
      add_circle_markers_from_xy()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar_branca" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar_branca()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_controls" class="md-nav__link">
    <span class="md-ellipsis">
      add_controls()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_draw_control_lite" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control_lite()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gdf_from_postgis" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf_from_postgis()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_gui()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_heatmap" class="md-nav__link">
    <span class="md-ellipsis">
      add_heatmap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      add_inspector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_kml" class="md-nav__link">
    <span class="md-ellipsis">
      add_kml()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_labels" class="md-nav__link">
    <span class="md-ellipsis">
      add_labels()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_landsat_ts_gif" class="md-nav__link">
    <span class="md-ellipsis">
      add_landsat_ts_gif()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_manager" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_manager()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_marker_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker_cluster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_minimap" class="md-nav__link">
    <span class="md-ellipsis">
      add_minimap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_netcdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_netcdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_address" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_address()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_bbox" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_bbox()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_geocode" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_geocode()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_place" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_place()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_point" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_view" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_view()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_planet_by_month" class="md-nav__link">
    <span class="md-ellipsis">
      add_planet_by_month()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_planet_by_quarter" class="md-nav__link">
    <span class="md-ellipsis">
      add_planet_by_quarter()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_plot_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_plot_gui()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_point_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_point_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_points_from_xy" class="md-nav__link">
    <span class="md-ellipsis">
      add_points_from_xy()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_remote_tile" class="md-nav__link">
    <span class="md-ellipsis">
      add_remote_tile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_search_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_search_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shapefile" class="md-nav__link">
    <span class="md-ellipsis">
      add_shapefile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shp" class="md-nav__link">
    <span class="md-ellipsis">
      add_shp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_styled_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_styled_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_time_slider" class="md-nav__link">
    <span class="md-ellipsis">
      add_time_slider()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_toolbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_toolbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      add_velocity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_xy_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_xy_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_xyz_service" class="md-nav__link">
    <span class="md-ellipsis">
      add_xyz_service()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.basemap_demo" class="md-nav__link">
    <span class="md-ellipsis">
      basemap_demo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.centerObject" class="md-nav__link">
    <span class="md-ellipsis">
      centerObject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.center_object" class="md-nav__link">
    <span class="md-ellipsis">
      center_object()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.create_vis_widget" class="md-nav__link">
    <span class="md-ellipsis">
      create_vis_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer_on_top" class="md-nav__link">
    <span class="md-ellipsis">
      draw_layer_on_top()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.extract_values_to_points" class="md-nav__link">
    <span class="md-ellipsis">
      extract_values_to_points()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer_index" class="md-nav__link">
    <span class="md-ellipsis">
      find_layer_index()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.getScale" class="md-nav__link">
    <span class="md-ellipsis">
      getScale()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      get_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      get_layer_names()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_scale" class="md-nav__link">
    <span class="md-ellipsis">
      get_scale()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.image_overlay" class="md-nav__link">
    <span class="md-ellipsis">
      image_overlay()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      layer_opacity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_to_image" class="md-nav__link">
    <span class="md-ellipsis">
      layer_to_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.marker_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      marker_cluster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_demo" class="md-nav__link">
    <span class="md-ellipsis">
      plot_demo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_raster" class="md-nav__link">
    <span class="md-ellipsis">
      plot_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbars" class="md-nav__link">
    <span class="md-ellipsis">
      remove_colorbars()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      remove_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_drawn_features" class="md-nav__link">
    <span class="md-ellipsis">
      remove_drawn_features()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_labels" class="md-nav__link">
    <span class="md-ellipsis">
      remove_labels()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_last_drawn" class="md-nav__link">
    <span class="md-ellipsis">
      remove_last_drawn()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_legend" class="md-nav__link">
    <span class="md-ellipsis">
      remove_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_legends" class="md-nav__link">
    <span class="md-ellipsis">
      remove_legends()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setCenter" class="md-nav__link">
    <span class="md-ellipsis">
      setCenter()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setControlVisibility" class="md-nav__link">
    <span class="md-ellipsis">
      setControlVisibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setOptions" class="md-nav__link">
    <span class="md-ellipsis">
      setOptions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_control_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_control_visibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_options" class="md-nav__link">
    <span class="md-ellipsis">
      set_options()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_plot_options" class="md-nav__link">
    <span class="md-ellipsis">
      set_plot_options()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.show_layer" class="md-nav__link">
    <span class="md-ellipsis">
      show_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.split_map" class="md-nav__link">
    <span class="md-ellipsis">
      split_map()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_gradio" class="md-nav__link">
    <span class="md-ellipsis">
      to_gradio()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_image" class="md-nav__link">
    <span class="md-ellipsis">
      to_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.toolbar_reset" class="md-nav__link">
    <span class="md-ellipsis">
      toolbar_reset()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ts_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      ts_inspector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_roi_coords" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi_coords()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.video_overlay" class="md-nav__link">
    <span class="md-ellipsis">
      video_overlay()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_me" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_me()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ee_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      ee_tile_layer()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.get_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      get_basemap()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.linked_maps" class="md-nav__link">
    <span class="md-ellipsis">
      linked_maps()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ts_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      ts_inspector()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../kepler/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kepler module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../legends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    legends module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../map_widgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    map_widgets module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../maplibregl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    maplibregl module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../ml/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ml module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../osm/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    osm module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plot module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../plotlymap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plotlymap module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../report/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    report module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    timelapse module
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../toolbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    toolbar module
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Workshops
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Workshops
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GeoPython_2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoPython 2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2021/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GEE Workshop 2021
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SRM_Workshop_2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SRM Workshop 2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Crop_Mapping_2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Crop Mapping 2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Japan_2022/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Japan 2022
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2022_Part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GEE Workshop 2022 Part1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2022_Part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GEE Workshop 2022 Part2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/AmericaView_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AmericaView 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SciPy_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SciPy 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/City_Plus_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    City Plus 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/G4G_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    G4G 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/NCSU_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    NCSU 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/AGU_2023/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AGU 2023
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Alaska_2024_Part1/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alaska 2024 Part1
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Alaska_2024_Part2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alaska 2024 Part2
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Alaska_2024_Part3/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Alaska 2024 Part3
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GEE_Workshop_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GEE Workshop 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/TNGIC_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    TNGIC 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/IGIC_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IGIC 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SciPy_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SciPy 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/SatMOC_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    SatMOC 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/GeoAI_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    GeoAI 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/Taiwan_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Taiwan 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/FOSS4GNA_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    FOSS4GNA 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/IPPN_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    IPPN 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/HGAC_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    HGAC 2024
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../workshops/AGU_2024/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    AGU 2024
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_17" >
        
          
          <label class="md-nav__link" for="__nav_17" id="__nav_17_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Notebooks
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_17">
            <span class="md-nav__icon md-icon"></span>
            Notebooks
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_ee_auth_colab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00 ee auth colab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_geemap_colab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00 geemap colab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/00_geemap_key_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    00 geemap key features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/01_geemap_intro/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    01 geemap intro
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/02_using_basemaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    02 using basemaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/03_inspector_tool/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    03 inspector tool
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/04_split_panel_map/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    04 split panel map
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/05_drawing_tools/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    05 drawing tools
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/06_marker_cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    06 marker cluster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/07_geojson/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    07 geojson
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/08_ee_js_to_ipynb/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    08 ee js to ipynb
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/09_plotting/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    09 plotting
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/10_shapefiles/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    10 shapefiles
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/11_export_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    11 export image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/12_zonal_statistics/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    12 zonal statistics
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/13_zonal_statistics_by_group/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    13 zonal statistics by group
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/14_legends/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    14 legends
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/15_convert_js_to_py/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    15 convert js to py
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/16_add_animated_text/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    16 add animated text
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/17_add_colorbar_to_gif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    17 add colorbar to gif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/18_create_landsat_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    18 create landsat timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/19_search_places_and_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    19 search places and datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/20_timeseries_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    20 timeseries inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/21_export_map_to_html_png/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    21 export map to html png
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/22_import_scripts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    22 import scripts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/23_import_assets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    23 import assets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/24_publish_maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    24 publish maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/25_load_rasters/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    25 load rasters
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/26_heroku/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    26 heroku
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/27_timelapse_app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    27 timelapse app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/28_voila/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    28 voila
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/29_pydeck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    29 pydeck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/30_image_props_stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    30 image props stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/31_unsupervised_classification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    31 unsupervised classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/32_supervised_classification/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    32 supervised classification
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/33_accuracy_assessment/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    33 accuracy assessment
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/34_extract_values/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    34 extract values
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/35_geemap_colab/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    35 geemap colab
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/36_quality_mosaic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    36 quality mosaic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/37_pydeck_3d/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    37 pydeck 3d
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/38_cloud_geotiff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    38 cloud geotiff
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/39_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    39 timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/40_ipywidgets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    40 ipywidgets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/41_water_app/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    41 water app
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/42_upload_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    42 upload data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/43_extract_values_to_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    43 extract values to points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/44_cog_stac/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    44 cog stac
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/45_cog_mosaic/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    45 cog mosaic
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/46_local_rf_training/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    46 local rf training
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/47_image_thumbnails/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    47 image thumbnails
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/48_folium_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    48 folium legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/49_colorbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    49 colorbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/50_cartoee_quickstart/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    50 cartoee quickstart
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/51_cartoee_projections/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    51 cartoee projections
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/52_cartoee_gif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    52 cartoee gif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/53_layer_vis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    53 layer vis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/54_vector_vis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    54 vector vis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/55_raster_vis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    55 raster vis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/56_local_data/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    56 local data
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/57_cartoee_blend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    57 cartoee blend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/58_add_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    58 add vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/59_whitebox/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    59 whitebox
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/60_colormaps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    60 colormaps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/61_cartoee_scalebar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    61 cartoee scalebar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/62_time_slider/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    62 time slider
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/63_charts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    63 charts
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/64_data_catalog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    64 data catalog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/65_vector_styling/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    65 vector styling
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/66_cartoee_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    66 cartoee legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/67_training_samples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    67 training samples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/68_netcdf_to_ee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    68 netcdf to ee
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/69_cartoee_vector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    69 cartoee vector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/70_linked_maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    70 linked maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/71_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    71 timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/72_time_slider_gui/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    72 time slider gui
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/73_transect/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    73 transect
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/74_csv_to_points/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    74 csv to points
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/75_sankee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    75 sankee
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/76_osm_to_ee/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    76 osm to ee
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/77_planet_imagery/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    77 planet imagery
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/78_ts_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    78 ts inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/79_chart_histogram/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    79 chart histogram
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/80_point_layer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    80 point layer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/81_goes_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    81 goes timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/82_contours/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    82 contours
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/83_local_tile/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    83 local tile
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/84_openstreetmap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    84 openstreetmap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/85_postgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    85 postgis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/86_image_overlay/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    86 image overlay
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/87_add_points_from_xy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    87 add points from xy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/88_circle_markers/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    88 circle markers
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/89_add_labels/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    89 add labels
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/90_naip_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    90 naip timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/91_planetary_computer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    91 planetary computer
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/92_plotly/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    92 plotly
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/93_cog_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    93 cog inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/94_heremap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    94 heremap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/95_create_cog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    95 create cog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/96_image_chips/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    96 image chips
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/97_join_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    97 join table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/98_timelapse_fading/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    98 timelapse fading
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/99_landsat_9/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    99 landsat 9
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/100_numpy_to_cog/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    100 numpy to cog
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/101_lidar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    101 lidar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/102_blend_hillshade/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    102 blend hillshade
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/103_split_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    103 split control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/104_clip_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    104 clip image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/105_netcdf/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    105 netcdf
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/106_kepler_gl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    106 kepler gl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/107_pydeck/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    107 pydeck
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/108_image_zonal_stats/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    108 image zonal stats
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/109_coordinate_grids/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    109 coordinate grids
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/110_choropleth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    110 choropleth
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/111_image_count/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    111 image count
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/112_cartoee_basemap/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    112 cartoee basemap
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/113_image_area/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    113 image area
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/114_dynamic_world/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    114 dynamic world
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/115_land_cover/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    115 land cover
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/116_land_cover_timeseries/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    116 land cover timeseries
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/117_fishnet/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    117 fishnet
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/118_download_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    118 download image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/119_plot_raster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    119 plot raster
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/120_javascript/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    120 javascript
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/121_vector_style/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    121 vector style
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/122_lidar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    122 lidar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/123_sentinel1_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    123 sentinel1 timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/124_more_datasets/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    124 more datasets
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/125_example_code/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    125 example code
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/126_inspector/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    126 inspector
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/127_create_legend/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    127 create legend
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/128_add_widget/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    128 add widget
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/129_vector_to_gif/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    129 vector to gif
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/130_print_objects/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    130 print objects
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/131_arcgis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    131 arcgis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/132_folium_colorbar/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    132 folium colorbar
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/133_gradio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    133 gradio
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/134_ee_to_geotiff/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    134 ee to geotiff
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/135_segmentation/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    135 segmentation
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/136_download_parallel/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    136 download parallel
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/137_create_grid/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    137 create grid
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/138_draw_control/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    138 draw control
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/139_layer_to_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    139 layer to image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/140_ee_to_xarray/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    140 ee to xarray
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/141_image_array_viz/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    141 image array viz
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/142_google_maps/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    142 google maps
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/143_precipitation_timelapse/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    143 precipitation timelapse
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/144_chart_features/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    144 chart features
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/145_chart_image/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    145 chart image
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/146_chart_image_collection/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    146 chart image collection
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/147_chart_array_list/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    147 chart array list
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/148_chart_data_table/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    148 chart data table
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/149_gemini/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    149 gemini
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/150_maplibre/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    150 maplibre
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../notebooks/151_dataset_explorer/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    151 dataset explorer
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap" class="md-nav__link">
    <span class="md-ellipsis">
      geemap.geemap
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ImageOverlay" class="md-nav__link">
    <span class="md-ellipsis">
      ImageOverlay
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.Map" class="md-nav__link">
    <span class="md-ellipsis">
      Map
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Map">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      draw_control
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_control_lite" class="md-nav__link">
    <span class="md-ellipsis">
      draw_control_lite
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_features" class="md-nav__link">
    <span class="md-ellipsis">
      draw_features
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_last_feature" class="md-nav__link">
    <span class="md-ellipsis">
      draw_last_feature
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer" class="md-nav__link">
    <span class="md-ellipsis">
      draw_layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_layer_dict" class="md-nav__link">
    <span class="md-ellipsis">
      ee_layer_dict
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_raster_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_raster_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_raster_layers" class="md-nav__link">
    <span class="md-ellipsis">
      ee_raster_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_vector_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      ee_vector_layer_names
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ee_vector_layers" class="md-nav__link">
    <span class="md-ellipsis">
      ee_vector_layers
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_roi" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_rois" class="md-nav__link">
    <span class="md-ellipsis">
      user_rois
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add" class="md-nav__link">
    <span class="md-ellipsis">
      add()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayer" class="md-nav__link">
    <span class="md-ellipsis">
      addLayer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.addLayerControl" class="md-nav__link">
    <span class="md-ellipsis">
      addLayerControl()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_basemap_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_basemap_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_census_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_census_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_circle_markers_from_xy" class="md-nav__link">
    <span class="md-ellipsis">
      add_circle_markers_from_xy()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_cog_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_cog_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_colorbar_branca" class="md-nav__link">
    <span class="md-ellipsis">
      add_colorbar_branca()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_controls" class="md-nav__link">
    <span class="md-ellipsis">
      add_controls()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_draw_control_lite" class="md-nav__link">
    <span class="md-ellipsis">
      add_draw_control_lite()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gdf_from_postgis" class="md-nav__link">
    <span class="md-ellipsis">
      add_gdf_from_postgis()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_geojson" class="md-nav__link">
    <span class="md-ellipsis">
      add_geojson()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_gui()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_heatmap" class="md-nav__link">
    <span class="md-ellipsis">
      add_heatmap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_html" class="md-nav__link">
    <span class="md-ellipsis">
      add_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_image" class="md-nav__link">
    <span class="md-ellipsis">
      add_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      add_inspector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_kml" class="md-nav__link">
    <span class="md-ellipsis">
      add_kml()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_labels" class="md-nav__link">
    <span class="md-ellipsis">
      add_labels()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_landsat_ts_gif" class="md-nav__link">
    <span class="md-ellipsis">
      add_landsat_ts_gif()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_layer_manager" class="md-nav__link">
    <span class="md-ellipsis">
      add_layer_manager()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_legend" class="md-nav__link">
    <span class="md-ellipsis">
      add_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_marker" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_marker_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      add_marker_cluster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_minimap" class="md-nav__link">
    <span class="md-ellipsis">
      add_minimap()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_netcdf" class="md-nav__link">
    <span class="md-ellipsis">
      add_netcdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_address" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_address()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_bbox" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_bbox()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_geocode" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_geocode()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_place" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_place()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_point" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_point()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_polygon" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_polygon()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_osm_from_view" class="md-nav__link">
    <span class="md-ellipsis">
      add_osm_from_view()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_planet_by_month" class="md-nav__link">
    <span class="md-ellipsis">
      add_planet_by_month()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_planet_by_quarter" class="md-nav__link">
    <span class="md-ellipsis">
      add_planet_by_quarter()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_plot_gui" class="md-nav__link">
    <span class="md-ellipsis">
      add_plot_gui()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_point_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_point_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_points_from_xy" class="md-nav__link">
    <span class="md-ellipsis">
      add_points_from_xy()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_raster" class="md-nav__link">
    <span class="md-ellipsis">
      add_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_remote_tile" class="md-nav__link">
    <span class="md-ellipsis">
      add_remote_tile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_search_control" class="md-nav__link">
    <span class="md-ellipsis">
      add_search_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shapefile" class="md-nav__link">
    <span class="md-ellipsis">
      add_shapefile()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_shp" class="md-nav__link">
    <span class="md-ellipsis">
      add_shp()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_stac_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_stac_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_styled_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_styled_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_text" class="md-nav__link">
    <span class="md-ellipsis">
      add_text()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_tile_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_time_slider" class="md-nav__link">
    <span class="md-ellipsis">
      add_time_slider()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_toolbar" class="md-nav__link">
    <span class="md-ellipsis">
      add_toolbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_vector" class="md-nav__link">
    <span class="md-ellipsis">
      add_vector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_velocity" class="md-nav__link">
    <span class="md-ellipsis">
      add_velocity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_widget" class="md-nav__link">
    <span class="md-ellipsis">
      add_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_wms_layer" class="md-nav__link">
    <span class="md-ellipsis">
      add_wms_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_xy_data" class="md-nav__link">
    <span class="md-ellipsis">
      add_xy_data()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.add_xyz_service" class="md-nav__link">
    <span class="md-ellipsis">
      add_xyz_service()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.basemap_demo" class="md-nav__link">
    <span class="md-ellipsis">
      basemap_demo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.centerObject" class="md-nav__link">
    <span class="md-ellipsis">
      centerObject()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.center_object" class="md-nav__link">
    <span class="md-ellipsis">
      center_object()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.create_vis_widget" class="md-nav__link">
    <span class="md-ellipsis">
      create_vis_widget()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.draw_layer_on_top" class="md-nav__link">
    <span class="md-ellipsis">
      draw_layer_on_top()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.extract_values_to_points" class="md-nav__link">
    <span class="md-ellipsis">
      extract_values_to_points()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer" class="md-nav__link">
    <span class="md-ellipsis">
      find_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.find_layer_index" class="md-nav__link">
    <span class="md-ellipsis">
      find_layer_index()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.getScale" class="md-nav__link">
    <span class="md-ellipsis">
      getScale()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      get_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_layer_names" class="md-nav__link">
    <span class="md-ellipsis">
      get_layer_names()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.get_scale" class="md-nav__link">
    <span class="md-ellipsis">
      get_scale()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.image_overlay" class="md-nav__link">
    <span class="md-ellipsis">
      image_overlay()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_opacity" class="md-nav__link">
    <span class="md-ellipsis">
      layer_opacity()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.layer_to_image" class="md-nav__link">
    <span class="md-ellipsis">
      layer_to_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.marker_cluster" class="md-nav__link">
    <span class="md-ellipsis">
      marker_cluster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot" class="md-nav__link">
    <span class="md-ellipsis">
      plot()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_demo" class="md-nav__link">
    <span class="md-ellipsis">
      plot_demo()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.plot_raster" class="md-nav__link">
    <span class="md-ellipsis">
      plot_raster()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbar" class="md-nav__link">
    <span class="md-ellipsis">
      remove_colorbar()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_colorbars" class="md-nav__link">
    <span class="md-ellipsis">
      remove_colorbars()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_draw_control" class="md-nav__link">
    <span class="md-ellipsis">
      remove_draw_control()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_drawn_features" class="md-nav__link">
    <span class="md-ellipsis">
      remove_drawn_features()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_ee_layer" class="md-nav__link">
    <span class="md-ellipsis">
      remove_ee_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_labels" class="md-nav__link">
    <span class="md-ellipsis">
      remove_labels()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_last_drawn" class="md-nav__link">
    <span class="md-ellipsis">
      remove_last_drawn()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_legend" class="md-nav__link">
    <span class="md-ellipsis">
      remove_legend()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.remove_legends" class="md-nav__link">
    <span class="md-ellipsis">
      remove_legends()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setCenter" class="md-nav__link">
    <span class="md-ellipsis">
      setCenter()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setControlVisibility" class="md-nav__link">
    <span class="md-ellipsis">
      setControlVisibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.setOptions" class="md-nav__link">
    <span class="md-ellipsis">
      setOptions()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_center" class="md-nav__link">
    <span class="md-ellipsis">
      set_center()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_control_visibility" class="md-nav__link">
    <span class="md-ellipsis">
      set_control_visibility()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_options" class="md-nav__link">
    <span class="md-ellipsis">
      set_options()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.set_plot_options" class="md-nav__link">
    <span class="md-ellipsis">
      set_plot_options()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.show_layer" class="md-nav__link">
    <span class="md-ellipsis">
      show_layer()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.split_map" class="md-nav__link">
    <span class="md-ellipsis">
      split_map()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_gradio" class="md-nav__link">
    <span class="md-ellipsis">
      to_gradio()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_html" class="md-nav__link">
    <span class="md-ellipsis">
      to_html()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_image" class="md-nav__link">
    <span class="md-ellipsis">
      to_image()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.to_streamlit" class="md-nav__link">
    <span class="md-ellipsis">
      to_streamlit()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.toolbar_reset" class="md-nav__link">
    <span class="md-ellipsis">
      toolbar_reset()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.ts_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      ts_inspector()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.user_roi_coords" class="md-nav__link">
    <span class="md-ellipsis">
      user_roi_coords()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.video_overlay" class="md-nav__link">
    <span class="md-ellipsis">
      video_overlay()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_bounds" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_bounds()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_gdf" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_gdf()
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#geemap.geemap.Map.zoom_to_me" class="md-nav__link">
    <span class="md-ellipsis">
      zoom_to_me()
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ee_tile_layer" class="md-nav__link">
    <span class="md-ellipsis">
      ee_tile_layer()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.get_basemap" class="md-nav__link">
    <span class="md-ellipsis">
      get_basemap()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.linked_maps" class="md-nav__link">
    <span class="md-ellipsis">
      linked_maps()
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#geemap.geemap.ts_inspector" class="md-nav__link">
    <span class="md-ellipsis">
      ts_inspector()
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                



                  

  
  


<h1 id="geemap-module">geemap module<a class="headerlink" href="#geemap-module" title="Permanent link">&para;</a></h1>


  <div class="doc doc-object doc-module">

<a id="geemap.geemap"></a>
    <div class="doc doc-contents first">

      <p>Main module for interactive mapping using Google Earth Engine Python API and ipyleaflet.
Keep in mind that Earth Engine functions use both camel case and snake case,
such as setOptions(), setCenter(), centerObject(), addLayer().
ipyleaflet functions use snake case, such as add_tile_layer(), add_wms_layer(), add_minimap().</p>



  <div class="doc doc-children">








  <div class="doc doc-object doc-class">



<h2 id="geemap.geemap.ImageOverlay" class="doc doc-heading">
        <code>
ImageOverlay            (<span title="ipyleaflet.leaflet.ImageOverlay">ImageOverlay</span>)
        </code>



<a href="#geemap.geemap.ImageOverlay" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>ImageOverlay class.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>http URL or local file path to the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bounds</code></td>
        <td><code>tuple</code></td>
        <td><p>bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">ImageOverlay</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;ImageOverlay class.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL or local file path to the image.</span>
<span class="sd">        bounds (tuple): bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): The name of the layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageSequence</span>
        <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;url&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided file does not exist.&quot;</span><span class="p">)</span>

                <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># file extension</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

                <span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;gif&quot;</span><span class="p">:</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="c1"># Loop over each frame in the animated image</span>
                    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>
                        <span class="n">b</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                        <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;gif&quot;</span><span class="p">)</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                        <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
                    <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                        <span class="n">f</span><span class="p">,</span>
                        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;GIF&quot;</span><span class="p">,</span>
                        <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                        <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>

                <span class="n">data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;data:image/</span><span class="si">{}</span><span class="s2">;base64,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">url</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">












  </div>

    </div>

  </div>



  <div class="doc doc-object doc-class">



<h2 id="geemap.geemap.Map" class="doc doc-heading">
        <code>
Map            (<a class="autorefs autorefs-internal" title="geemap.core.Map" href="../core/#geemap.core.Map">Map</a>)
        </code>



<a href="#geemap.geemap.Map" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>The Map class inherits the core Map class. The arguments you can pass to the Map initialization
    can be found at https://ipyleaflet.readthedocs.io/en/latest/map_and_basemaps/map.html.
    By default, the Map will add Google Maps as the basemap. Set add_google_map = False
    to use OpenStreetMap as the basemap.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>ipyleaflet map object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">Map</span><span class="p">(</span><span class="n">core</span><span class="o">.</span><span class="n">Map</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;The Map class inherits the core Map class. The arguments you can pass to the Map initialization</span>
<span class="sd">        can be found at https://ipyleaflet.readthedocs.io/en/latest/map_and_basemaps/map.html.</span>
<span class="sd">        By default, the Map will add Google Maps as the basemap. Set add_google_map = False</span>
<span class="sd">        to use OpenStreetMap as the basemap.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: ipyleaflet map object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="c1"># Map attributes for drawing features</span>
    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the draw control.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The draw control.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_draw_control</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">draw_control_lite</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the lite version of the draw control.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The lite draw control.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_draw_control</span><span class="p">()</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">draw_features</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the drawn features.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[Any]: The list of drawn features.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">features</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="k">else</span> <span class="p">[]</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">draw_last_feature</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the last drawn feature.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Any]: The last drawn feature.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">last_feature</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">draw_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the draw layer.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Any]: The draw layer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">layer</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_roi</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the user region of interest.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Any]: The user region of interest.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">last_geometry</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">user_rois</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the user regions of interest.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[Any]: The user regions of interest.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">collection</span> <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="k">else</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Initialize a map object. The following additional parameters can be</span>
<span class="sd">            passed in addition to the ipyleaflet.Map parameters:</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_initialize (bool, optional): Whether or not to initialize ee. Defaults to True.</span>
<span class="sd">            center (list, optional): Center of the map (lat, lon). Defaults to [20, 0].</span>
<span class="sd">            zoom (int, optional): Zoom level of the map. Defaults to 2.</span>
<span class="sd">            height (str, optional): Height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">            width (str, optional): Width of the map. Defaults to &quot;100%&quot;.</span>
<span class="sd">            basemap (str, optional): Name of the basemap to add to the map.</span>
<span class="sd">                Defaults to &quot;ROADMAP&quot;. Other options include &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;TERRAIN&quot;.</span>
<span class="sd">            add_google_map (bool, optional): Whether to add Google Maps to the map. Defaults to True.</span>
<span class="sd">            sandbox_path (str, optional): The path to a sandbox folder for voila web app. Defaults to None.</span>
<span class="sd">            lite_mode (bool, optional): Whether to enable lite mode, which only displays</span>
<span class="sd">                zoom control on the map. Defaults to False.</span>
<span class="sd">            data_ctrl (bool, optional): Deprecated: use search_ctrl instead.</span>
<span class="sd">            zoom_ctrl (bool, optional): Whether to add the zoom control to the map. Defaults to True.</span>
<span class="sd">            fullscreen_ctrl (bool, optional): Whether to add the fullscreen control to the map. Defaults to True.</span>
<span class="sd">            search_ctrl (bool, optional): Whether to add the search control to the map. Defaults to True.</span>
<span class="sd">            draw_ctrl (bool, optional): Whether to add the draw control to the map. Defaults to True.</span>
<span class="sd">            scale_ctrl (bool, optional): Whether to add the scale control to the map. Defaults to True.</span>
<span class="sd">            measure_ctrl (bool, optional): Whether to add the measure control to the map. Defaults to True.</span>
<span class="sd">            toolbar_ctrl (bool, optional): Whether to add the toolbar control to the map. Defaults to True.</span>
<span class="sd">            layer_ctrl (bool, optional): Whether to add the layer control to the map. Defaults to False.</span>
<span class="sd">            attribution_ctrl (bool, optional): Whether to add the attribution control to the map. Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments for ipyleaflet.Map.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">24</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_xyz_dict</span> <span class="o">=</span> <span class="n">get_xyz_dict</span><span class="p">()</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">baseclass</span> <span class="o">=</span> <span class="s2">&quot;ipyleaflet&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_USER_AGENT_PREFIX</span> <span class="o">=</span> <span class="s2">&quot;geemap&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_var_name</span> <span class="o">=</span> <span class="s2">&quot;Map&quot;</span>  <span class="c1"># The Map variable name for converting JS to Python</span>

        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>

        <span class="c1"># sandbox path for Voila app to restrict access to system directories.</span>
        <span class="k">if</span> <span class="s2">&quot;sandbox_path&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="kc">None</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sandbox_path&quot;</span><span class="p">])):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sandbox_path&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The sandbox path is invalid.&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="c1"># Add Google Maps as the default basemap</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;add_google_map&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;ROADMAP&quot;</span><span class="p">)</span>

        <span class="c1"># ipyleaflet built-in layer control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="s2">&quot;ee_initialize&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ee_initialize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="c1"># Default reducer to use</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ee_initialize&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">roi_reducer</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roi_reducer_scale</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">_control_config</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Configures the map controls based on the provided arguments.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, List[str]]: The configuration of map controls.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;lite_mode&quot;</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;topleft&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;zoom_control&quot;</span><span class="p">]}</span>

        <span class="n">topleft</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bottomleft</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">topright</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">bottomright</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;search_ctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;zoom_ctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;fullscreen_ctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;draw_ctrl&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">topleft</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;scale_ctrl&quot;</span><span class="p">,</span> <span class="s2">&quot;measure_ctrl&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">bottomleft</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;toolbar_ctrl&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">topright</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;layer_manager&quot;</span><span class="p">)</span>
                <span class="n">topright</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;attribution_control&quot;</span><span class="p">]:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="kc">True</span><span class="p">):</span>
                <span class="n">bottomright</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;topleft&quot;</span><span class="p">:</span> <span class="n">topleft</span><span class="p">,</span>
            <span class="s2">&quot;bottomleft&quot;</span><span class="p">:</span> <span class="n">bottomleft</span><span class="p">,</span>
            <span class="s2">&quot;topright&quot;</span><span class="p">:</span> <span class="n">topright</span><span class="p">,</span>
            <span class="s2">&quot;bottomright&quot;</span><span class="p">:</span> <span class="n">bottomright</span><span class="p">,</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the names of the EE layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The names of the EE layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;ee_layer_names is deprecated. Use ee_layers.keys() instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_layer_dict</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the dictionary of EE layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The dictionary of EE layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;ee_layer_dict is deprecated. Use ee_layers instead.&quot;</span><span class="p">,</span> <span class="ne">DeprecationWarning</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_raster_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the names of the EE raster layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The names of the EE raster layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;ee_raster_layer_names is deprecated. Use self.ee_raster_layers.keys() instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_vector_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the names of the EE vector layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: The names of the EE vector layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">warnings</span><span class="o">.</span><span class="n">warn</span><span class="p">(</span>
            <span class="s2">&quot;ee_vector_layer_names is deprecated. Use self.ee_vector_layers.keys() instead.&quot;</span><span class="p">,</span>
            <span class="ne">DeprecationWarning</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">return</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_vector_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_raster_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the dictionary of EE raster layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The dictionary of EE raster layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_raster_filter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">ee_vector_layers</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the dictionary of EE vector layers.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Dict[str, Any]: The dictionary of EE vector layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_vector_filter</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">items</span><span class="p">()))</span>

    <span class="k">def</span> <span class="nf">_raster_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filters the raster layers.</span>

<span class="sd">        Args:</span>
<span class="sd">            pair (Tuple[str, Dict[str, Any]]): The layer pair to filter.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the layer is a raster layer, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;ee_object&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">))</span>

    <span class="k">def</span> <span class="nf">_vector_filter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pair</span><span class="p">:</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]])</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Filters the vector layers.</span>

<span class="sd">        Args:</span>
<span class="sd">            pair (Tuple[str, Dict[str, Any]]): The layer pair to filter.</span>

<span class="sd">        Returns:</span>
<span class="sd">            bool: True if the layer is a vector layer, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">isinstance</span><span class="p">(</span>
            <span class="n">pair</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;ee_object&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">)</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a layer or control to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            obj (Union[str, Any]): The layer or control to add to the map.</span>
<span class="sd">            position (str, optional): The position of the control on the map. Defaults to &quot;topright&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">basemap</span> <span class="o">=</span> <span class="n">check_basemap</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">get_basemap</span><span class="p">(</span><span class="n">basemap</span><span class="p">))</span>
                <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

        <span class="n">backward_compatibilities</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;zoom_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;zoom_control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fullscreen_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;fullscreen_control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;scale_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;scale_control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;toolbar_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;toolbar&quot;</span><span class="p">,</span>
            <span class="s2">&quot;draw_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;draw_control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;data_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;search_control&quot;</span><span class="p">,</span>
            <span class="s2">&quot;search_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;search_control&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">backward_compatibilities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;measure_ctrl&quot;</span><span class="p">:</span>
            <span class="n">measure</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MeasureControl</span><span class="p">(</span>
                <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                <span class="n">active_color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span>
                <span class="n">primary_length_unit</span><span class="o">=</span><span class="s2">&quot;kilometers&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">measure</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;layer_ctrl&quot;</span><span class="p">:</span>
            <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_controls</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">controls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a list of controls to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            controls (Union[List[Any], Any]): A list of controls or a single</span>
<span class="sd">                control to add to the map.</span>
<span class="sd">            position (str, optional): The position of the controls on the map.</span>
<span class="sd">                Defaults to &quot;topleft&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="n">controls</span><span class="p">]</span>
        <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;HYBRID&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">        Args:</span>
<span class="sd">            mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be</span>
<span class="sd">                one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot; to select</span>
<span class="sd">                one of the standard Google Maps API map types. Defaults to &#39;HYBRID&#39;.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mapTypeId</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s1">&#39;Google basemaps can only be one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot;.&#39;</span>
            <span class="p">)</span>

    <span class="n">setOptions</span> <span class="o">=</span> <span class="n">set_options</span>

    <span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
            <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span>
        <span class="p">],</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">shown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a given EE object to the map as a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (Union[ee.FeatureCollection, ee.Feature, ee.Image, ee.ImageCollection]):</span>
<span class="sd">                The object to add to the map.</span>
<span class="sd">            vis_params (Optional[Dict[str, Any]], optional): The visualization parameters.</span>
<span class="sd">                Defaults to {}.</span>
<span class="sd">            name (Optional[str], optional): The name of the layer. Defaults to &#39;Layer N&#39;.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should be on by</span>
<span class="sd">                default. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The layer&#39;s opacity represented as a number</span>
<span class="sd">                between 0 and 1. Defaults to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">has_plot_dropdown</span> <span class="o">=</span> <span class="p">(</span>
            <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_dropdown_widget&quot;</span><span class="p">)</span>
            <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
        <span class="p">)</span>

        <span class="n">ee_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">ee_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_layer</span><span class="p">[</span><span class="s2">&quot;ee_object&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
                <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                    <span class="p">)</span>

        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="n">tile_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">tile_layer</span><span class="p">:</span>
            <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="n">addLayer</span> <span class="o">=</span> <span class="n">add_ee_layer</span>

    <span class="k">def</span> <span class="nf">remove_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes an Earth Engine layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the Earth Engine layer to remove.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="n">ee_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">ee_layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">ee_layer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">        Args:</span>
<span class="sd">            lon (float): The longitude of the center, in degrees.</span>
<span class="sd">            lat (float): The latitude of the center, in degrees.</span>
<span class="sd">            zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
            <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>

    <span class="n">setCenter</span> <span class="o">=</span> <span class="n">set_center</span>

    <span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ee</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">],</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Centers the map view on a given object.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (Union[ee.Element, ee.Geometry]): An Earth Engine object to</span>
<span class="sd">                center on a geometry, image or feature.</span>
<span class="sd">            zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">center_object</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
            <span class="n">bds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>

    <span class="n">centerObject</span> <span class="o">=</span> <span class="n">center_object</span>

    <span class="k">def</span> <span class="nf">zoom_to_bounds</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Zooms to a bounding box in the form of [minx, miny, maxx, maxy].</span>

<span class="sd">        Args:</span>
<span class="sd">            bounds (Union[List[float], Tuple[float, float, float, float]]): A</span>
<span class="sd">                list/tuple containing minx, miny, maxx, maxy values for the bounds.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="c1">#  The ipyleaflet fit_bounds method takes lat/lon bounds in the form [[south, west], [north, east]].</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">        Returns:</span>
<span class="sd">            float: Map resolution in meters.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>

    <span class="n">getScale</span> <span class="o">=</span> <span class="n">get_scale</span>

    <span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">basemap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ROADMAP&quot;</span><span class="p">,</span>
        <span class="n">show</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a basemap to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            basemap (Optional[str], optional): Can be one of the strings from basemaps.</span>
<span class="sd">                Defaults to &#39;ROADMAP&#39;.</span>
<span class="sd">            show (Optional[bool], optional): Whether the basemap is visible or not.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments for the TileLayer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">xyzservices</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">layer_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">()</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">for</span> <span class="n">map_name</span><span class="p">,</span> <span class="n">tile_provider</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available_basemaps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                    <span class="k">if</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">map_name</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                        <span class="n">basemap</span> <span class="o">=</span> <span class="n">tile_provider</span>
                        <span class="k">break</span>

            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
                <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
                <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                    <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                    <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                    <span class="n">visible</span><span class="o">=</span><span class="n">show</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
                <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span> <span class="ow">and</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">basemap</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">show</span>
                <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">basemap</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span> <span class="ow">and</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">basemap</span><span class="si">}</span><span class="s2"> has been already added before.&quot;</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">basemap</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">basemap</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span>
                    <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                        <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                    <span class="p">)</span>
                <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets layer names as a list.</span>

<span class="sd">        Returns:</span>
<span class="sd">            List[str]: A list of layer names.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[]</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

        <span class="k">return</span> <span class="n">layer_names</span>

    <span class="k">def</span> <span class="nf">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Layer</span><span class="p">]:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds a layer by name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of the layer to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Optional[ipyleaflet.Layer]: The ipyleaflet layer object if found, else None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">layer</span>

        <span class="k">return</span> <span class="kc">None</span>

    <span class="k">def</span> <span class="nf">show_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Shows or hides a layer on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of the layer to show/hide.</span>
<span class="sd">            show (bool, optional): Whether to show or hide the layer. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">show</span>

    <span class="k">def</span> <span class="nf">find_layer_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Finds the index of a layer by name.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): Name of the layer to find.</span>

<span class="sd">        Returns:</span>
<span class="sd">            int: Index of the layer with the specified name, or -1 if not found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

        <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">layers</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
                <span class="k">return</span> <span class="n">index</span>

        <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>

    <span class="k">def</span> <span class="nf">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Changes the opacity of a layer.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the layer to change opacity.</span>
<span class="sd">            opacity (float, optional): The opacity value to set. Defaults to 1.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">layer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://</span><span class="si">{s}</span><span class="s2">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
        <span class="n">shown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a TileLayer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str, optional): The URL of the tile layer. Defaults to</span>
<span class="sd">                &#39;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;.</span>
<span class="sd">            name (str, optional): The layer name to use for the layer. Defaults to &#39;Untitled&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">                be on by default. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">if</span> <span class="s2">&quot;max_native_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_native_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to add the specified TileLayer.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_plot_options</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">add_marker_cluster</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">sample_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">plot_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overlay</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">min_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">min_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets plotting options.</span>

<span class="sd">        Args:</span>
<span class="sd">            add_marker_cluster (bool, optional): Whether to add a marker cluster.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            sample_scale (float, optional):  A nominal scale in meters of the</span>
<span class="sd">                projection to sample in . Defaults to None.</span>
<span class="sd">            plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;,</span>
<span class="sd">                &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">            overlay (bool, optional): Whether to overlay plotted lines on the figure.</span>
<span class="sd">                Defaults to False.</span>
<span class="sd">            position (str, optional): Position of the control, can be bottomleft,</span>
<span class="sd">                bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">            min_width (int, optional): Min width of the widget (in pixels),</span>
<span class="sd">                if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_width (int, optional): Max width of the widget (in pixels),</span>
<span class="sd">                if None it will respect the content size. Defaults to None.</span>
<span class="sd">            min_height (int, optional): Min height of the widget (in pixels),</span>
<span class="sd">                if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_height (int, optional): Max height of the widget (in pixels),</span>
<span class="sd">                if None it will respect the content size. Defaults to None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">plot_options_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;add_marker_cluster&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_marker_cluster</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;sample_scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_scale</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;plot_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot_type</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;overlay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlay</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;min_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_height</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;max_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>

        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">plot_options_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_options</span> <span class="o">=</span> <span class="n">plot_options_dict</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_marker_cluster&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_marker_cluster</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">y</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span>
        <span class="n">plot_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">overlay</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">min_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">min_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">max_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a plot based on x-array and y-array data.</span>

<span class="sd">        Args:</span>
<span class="sd">            x (numpy.ndarray or list): The x-coordinates of the plotted line.</span>
<span class="sd">            y (numpy.ndarray or list): The y-coordinates of the plotted line.</span>
<span class="sd">            plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">            overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">            position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">            min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_widget&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">plot_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
                <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;border&quot;</span><span class="p">:</span> <span class="s2">&quot;1px solid black&quot;</span><span class="p">,</span> <span class="s2">&quot;max_width&quot;</span><span class="p">:</span> <span class="s2">&quot;500px&quot;</span><span class="p">}</span>
            <span class="p">)</span>
            <span class="n">plot_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
                <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>
        <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_height</span> <span class="o">=</span> <span class="mi">300</span>

        <span class="k">if</span> <span class="p">(</span><span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;markers&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">):</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;markers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>

        <span class="k">with</span> <span class="n">plot_widget</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_width</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
                <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_height</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>

                <span class="n">plot_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">overlay</span><span class="p">:</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

                <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">if</span> <span class="s2">&quot;marker&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;marker&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;hist&quot;</span><span class="p">:</span>
                    <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to create plot.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a layer control to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the layer control on the map.</span>
<span class="sd">                Defaults to &quot;topright&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">)</span>

    <span class="n">addLayerControl</span> <span class="o">=</span> <span class="n">add_layer_control</span>

    <span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
        <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a customized basemap to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            title (str, optional): Title of the legend. Defaults to &#39;Legend&#39;.</span>
<span class="sd">            legend_dict (dict, optional): A dictionary containing legend items</span>
<span class="sd">                as keys and color as values. If provided, keys and</span>
<span class="sd">                colors will be ignored. Defaults to None.</span>
<span class="sd">            keys (list, optional): A list of legend keys. Defaults to None.</span>
<span class="sd">            colors (list, optional): A list of legend colors. Defaults to None.</span>
<span class="sd">            position (str, optional): Position of the legend. Defaults to</span>
<span class="sd">                &#39;bottomright&#39;.</span>
<span class="sd">            builtin_legend (str, optional): Name of the builtin legend to add</span>
<span class="sd">                to the map. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The associated layer for the legend.</span>
<span class="sd">                Defaults to None.</span>
<span class="sd">            add_header (bool, optional): Whether the legend can be closed or</span>
<span class="sd">                not. Defaults to True.</span>
<span class="sd">            widget_args (dict, optional): Additional arguments passed to the</span>
<span class="sd">                widget_template() function. Defaults to {}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_legend</span><span class="p">(</span>
                <span class="n">title</span><span class="p">,</span>
                <span class="n">legend_dict</span><span class="p">,</span>
                <span class="n">keys</span><span class="p">,</span>
                <span class="n">colors</span><span class="p">,</span>
                <span class="n">position</span><span class="p">,</span>
                <span class="n">builtin_legend</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="p">,</span>
                <span class="n">add_header</span><span class="p">,</span>
                <span class="n">widget_args</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="o">=</span> <span class="n">legend</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;legends&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legends</span> <span class="o">=</span> <span class="p">[</span><span class="n">legend</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">legends</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">transparent_bg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
        <span class="n">axis_off</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a matplotlib colorbar to the map</span>

<span class="sd">        Args:</span>
<span class="sd">            vis_params (dict): Visualization parameters as a dictionary. See https://developers.google.com/earth-engine/guides/image_visualization for options.</span>
<span class="sd">            cmap (str, optional): Matplotlib colormap. Defaults to &quot;gray&quot;. See https://matplotlib.org/3.3.4/tutorials/colors/colormaps.html#sphx-glr-tutorials-colors-colormaps-py for options.</span>
<span class="sd">            discrete (bool, optional): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">            label (str, optional): Label for the colorbar. Defaults to None.</span>
<span class="sd">            orientation (str, optional): Orientation of the colorbar, such as &quot;vertical&quot; and &quot;horizontal&quot;. Defaults to &quot;horizontal&quot;.</span>
<span class="sd">            position (str, optional): Position of the colorbar on the map. It can be one of: topleft, topright, bottomleft, and bottomright. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">            transparent_bg (bool, optional): Whether to use transparent background. Defaults to False.</span>
<span class="sd">            layer_name (str, optional): The layer name associated with the colorbar. Defaults to None.</span>
<span class="sd">            font_size (int, optional): Font size for the colorbar. Defaults to 9.</span>
<span class="sd">            axis_off (bool, optional): Whether to turn off the axis. Defaults to False.</span>
<span class="sd">            max_width (str, optional): Maximum width of the colorbar in pixels. Defaults to None.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the vis_params is not a dictionary.</span>
<span class="sd">            ValueError: If the orientation is not either horizontal or vertical.</span>
<span class="sd">            TypeError: If the provided min value is not scalar type.</span>
<span class="sd">            TypeError: If the provided max value is not scalar type.</span>
<span class="sd">            TypeError: If the provided opacity value is not scalar type.</span>
<span class="sd">            TypeError: If cmap or palette is not provided.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">colorbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_colorbar</span><span class="p">(</span>
            <span class="n">vis_params</span><span class="p">,</span>
            <span class="n">cmap</span><span class="p">,</span>
            <span class="n">discrete</span><span class="p">,</span>
            <span class="n">label</span><span class="p">,</span>
            <span class="n">orientation</span><span class="p">,</span>
            <span class="n">position</span><span class="p">,</span>
            <span class="n">transparent_bg</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">font_size</span><span class="p">,</span>
            <span class="n">axis_off</span><span class="p">,</span>
            <span class="n">max_width</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="o">=</span> <span class="n">colorbar</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span> <span class="o">=</span> <span class="p">[</span><span class="n">colorbar</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the colorbar from the map.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_colorbar&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_colorbars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all colorbars from the map.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">widget</span> <span class="o">:=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colorbar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the legend from the map.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_legend&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_legends</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all legends from the map.&quot;&quot;&quot;</span>
        <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
            <span class="k">if</span> <span class="n">widget</span> <span class="o">:=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;legends&quot;</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">legends</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">create_vis_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a GUI for changing layer visualization parameters interactively.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_dict (Dict[str, Any]): A dictionary containing information about</span>
<span class="sd">                the layer. It is an element from Map.ee_layers.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_add_layer_editor</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="n">layer_dict</span><span class="o">=</span><span class="n">layer_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_inspector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">decimals</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
        <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the Inspector GUI to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            names (str | list, optional): The names of the layers to be included. Defaults to None.</span>
<span class="sd">            visible (bool, optional): Whether to inspect visible layers only. Defaults to True.</span>
<span class="sd">            decimals (int, optional): The number of decimal places to round the coordinates. Defaults to 2.</span>
<span class="sd">            position (str, optional): The position of the Inspector GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">            opened (bool, optional): Whether the control is opened. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_inspector</span><span class="p">(</span>
            <span class="n">position</span><span class="p">,</span>
            <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
            <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">,</span>
            <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">,</span>
            <span class="n">show_close_button</span><span class="o">=</span><span class="n">show_close_button</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_layer_manager</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
        <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the Layer Manager to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the Layer Manager. Defaults to &quot;topright&quot;.</span>
<span class="sd">            opened (bool, optional): Whether the control is opened. Defaults to True.</span>
<span class="sd">            show_close_button (bool, optional): Whether to show the close button. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_layer_manager</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layer_manager</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layer_manager</span><span class="p">:</span>
            <span class="n">layer_manager</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">opened</span>
            <span class="n">layer_manager</span><span class="o">.</span><span class="n">close_button_hidden</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">show_close_button</span>

    <span class="k">def</span> <span class="nf">_on_basemap_changed</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Handles the event when the basemap is changed.</span>

<span class="sd">        Args:</span>
<span class="sd">            basemap_name (str): The name of the new basemap.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">basemap_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">():</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="n">basemap_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">basemap_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xyz_dict</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;bounds&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xyz_dict</span><span class="p">[</span><span class="n">basemap_name</span><span class="p">]:</span>
                    <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_xyz_dict</span><span class="p">[</span><span class="n">basemap_name</span><span class="p">][</span><span class="s2">&quot;bounds&quot;</span><span class="p">]</span>
                    <span class="n">bounds</span> <span class="o">=</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_basemap_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add the Basemap GUI to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the Basemap GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_basemap_selector</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a draw control to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the draw control. Defaults to &quot;topleft&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;draw_control&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_draw_control_lite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a lite version draw control to the map for the plotting tool.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the draw control. Defaults to &quot;topleft&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
            <span class="s2">&quot;draw_control&quot;</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">rectangle</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shapeOptions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">}},</span>
            <span class="n">circle</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shapeOptions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">}},</span>
            <span class="n">circlemarker</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">polyline</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">polygon</span><span class="o">=</span><span class="p">{},</span>
            <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a toolbar to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): The position of the toolbar. Defaults to &quot;topright&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;toolbar&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">_toolbar_main_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the main tools for the toolbar.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The main tools for the toolbar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">main_tools</span>

    <span class="k">def</span> <span class="nf">_toolbar_extra_tools</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Gets the extra tools for the toolbar.</span>

<span class="sd">        Returns:</span>
<span class="sd">            Any: The extra tools for the toolbar.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">toolbar</span><span class="o">.</span><span class="n">extra_tools</span>

    <span class="k">def</span> <span class="nf">add_plot_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds the plot widget to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            position (str, optional): Position of the widget. Defaults to &quot;topright&quot;.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">ee_plot_gui</span>

        <span class="n">ee_plot_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gui</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
        <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a GUI to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            name (str): The name of the GUI. Options include &quot;layer_manager&quot;,</span>
<span class="sd">                &quot;inspector&quot;, &quot;plot&quot;, and &quot;timelapse&quot;.</span>
<span class="sd">            position (str, optional): The position of the GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">            opened (bool, optional): Whether the GUI is opened. Defaults to True.</span>
<span class="sd">            show_close_button (bool, optional): Whether to show the close button.</span>
<span class="sd">                Defaults to True.</span>
<span class="sd">            **kwargs: Additional keyword arguments.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;layer_manager&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_manager</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">opened</span><span class="p">,</span> <span class="n">show_close_button</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;inspector&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_inspector</span><span class="p">(</span>
                <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
                <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">,</span>
                <span class="n">show_close_button</span><span class="o">=</span><span class="n">show_close_button</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_plot_gui</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;timelapse&quot;</span><span class="p">:</span>
            <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">timelapse_gui</span>

            <span class="n">timelapse_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="c1"># ******************************************************************************#</span>
    <span class="c1"># The classes and functions above are the core features of the geemap package.  #</span>
    <span class="c1"># The Earth Engine team and the geemap community will maintain these features.  #</span>
    <span class="c1"># ******************************************************************************#</span>

    <span class="c1"># ******************************************************************************#</span>
    <span class="c1"># The classes and functions below are the extra features of the geemap package. #</span>
    <span class="c1"># The geemap community will maintain these features.                            #</span>
    <span class="c1"># ******************************************************************************#</span>

    <span class="k">def</span> <span class="nf">draw_layer_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Move user-drawn feature layer to the top of all layers.&quot;&quot;&quot;</span>
        <span class="n">draw_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Drawn Features&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">draw_layer_index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">draw_layer_index</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">draw_layer_index</span><span class="p">]</span>
                <span class="o">+</span> <span class="n">layers</span><span class="p">[(</span><span class="n">draw_layer_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:]</span>
                <span class="o">+</span> <span class="p">[</span><span class="n">layers</span><span class="p">[</span><span class="n">draw_layer_index</span><span class="p">]]</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>

    <span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a marker to the map. More info about marker at https://ipyleaflet.readthedocs.io/en/latest/api_reference/marker.html.</span>

<span class="sd">        Args:</span>
<span class="sd">            location (list | tuple): The location of the marker in the format of [lat, lng].</span>

<span class="sd">            **kwargs: Keyword arguments for the marker.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">location</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The location must be a list or a tuple.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">layers</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
        <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a WMS layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the WMS web service.</span>
<span class="sd">            layers (str): Comma-separated list of WMS layers to show.</span>
<span class="sd">            name (str, optional): The layer name to use on the layer control. Defaults to None.</span>
<span class="sd">            attribution (str, optional): The attribution of the data layer. Defaults to &#39;&#39;.</span>
<span class="sd">            format (str, optional): WMS image format (use image/png for layers with transparency). Defaults to &#39;image/png&#39;.</span>
<span class="sd">            transparent (bool, optional): If True, the WMS service will return images with transparency. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">wms_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WMSLayer</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
                <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">,</span>
                <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wms_layer</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to add the specified WMS TileLayer.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">zoom_to_me</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Zoom to the current device location.</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (int, optional): Zoom level. Defaults to 14.</span>
<span class="sd">            add_marker (bool, optional): Whether to add a marker of the current device location. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">get_current_latlon</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">),</span>
                <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Device location&quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">zoom_to_gdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdf</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Zooms to the bounding box of a GeoPandas GeoDataFrame.</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf (GeoDataFrame): A GeoPandas GeoDataFrame.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">total_bounds</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">get_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asGeoJSON</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Returns the bounds of the current map view, as a list in the format [west, south, east, north] in degrees.</span>

<span class="sd">        Args:</span>
<span class="sd">            asGeoJSON (bool, optional): If true, returns map bounds as GeoJSON. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            list | dict: A list in the format [west, south, east, north] in degrees.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">(</span><span class="n">as_geo_json</span><span class="o">=</span><span class="n">asGeoJSON</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a COG TileLayer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): The URL of the COG tile layer.</span>
<span class="sd">            name (str, optional): The layer name to use for the layer. Defaults to &#39;Untitled&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">            bands (list, optional): A list of bands to use for the layer. Defaults to None.</span>
<span class="sd">            titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">            **kwargs: Arbitrary keyword arguments, including bidx, expression, nodata, unscale, resampling, rescale, color_formula, colormap, colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/ and https://cogeotiff.github.io/rio-tiler/colormap/. To select a certain bands, use bidx=[1, 2, 3]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;titizer_endpoint&quot;</span><span class="p">:</span> <span class="n">titiler_endpoint</span><span class="p">,</span>
            <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;COG&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">add_cog_mosaic</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">NotImplementedError</span><span class="p">(</span>
            <span class="s2">&quot;This function is no longer supported.See https://github.com/giswqs/leafmap/issues/180.&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a STAC TileLayer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">            collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">            item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">            assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">            bands (list): A list of band names, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]</span>
<span class="sd">            titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">            name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">            attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">tile_url</span> <span class="o">=</span> <span class="n">stac_tile</span><span class="p">(</span>
            <span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
        <span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">assets</span> <span class="o">=</span> <span class="n">bands</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
            <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="n">collection</span><span class="p">,</span>
            <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="n">item</span><span class="p">,</span>
            <span class="s2">&quot;assets&quot;</span><span class="p">:</span> <span class="n">assets</span><span class="p">,</span>
            <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
            <span class="s2">&quot;titiler_endpoint&quot;</span><span class="p">:</span> <span class="n">titiler_endpoint</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;STAC&quot;</span><span class="p">,</span>
        <span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a minimap (overview) to the ipyleaflet map.</span>

<span class="sd">        Args:</span>
<span class="sd">            zoom (int, optional): Initial map zoom level. Defaults to 5.</span>
<span class="sd">            position (str, optional): Position of the minimap. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">minimap</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
            <span class="n">zoom_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">attribution_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span>
            <span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="n">get_basemap</span><span class="p">(</span><span class="s2">&quot;ROADMAP&quot;</span><span class="p">)],</span>
        <span class="p">)</span>
        <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span>
        <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span>
        <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">link</span><span class="p">((</span><span class="n">minimap</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">))</span>
        <span class="n">minimap_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">minimap</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">minimap_control</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</span>

<span class="sd">        Returns:</span>
<span class="sd">            object: a list of ee.Feature</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
                <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
            <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot_demo</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A demo of interactive plotting using random pixel coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            iterations (int, optional): How many iterations to run for the demo. Defaults to 20.</span>
<span class="sd">            plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">            overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">            position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">            min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;random_marker&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;LANDSAT/LE7_TOA_5YEAR/1999_2003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
            <span class="n">image</span><span class="p">,</span>
            <span class="p">{</span><span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;B4&quot;</span><span class="p">,</span> <span class="s2">&quot;B3&quot;</span><span class="p">,</span> <span class="s2">&quot;B2&quot;</span><span class="p">],</span> <span class="s2">&quot;gamma&quot;</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">},</span>
            <span class="s2">&quot;LANDSAT/LE7_TOA_5YEAR/1999_2003&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="o">-</span><span class="mf">50.078877</span><span class="p">,</span> <span class="mf">25.190030</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
        <span class="n">band_names</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="c1"># band_count = len(band_names)</span>

        <span class="n">latitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>
        <span class="n">longitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">121</span><span class="p">,</span> <span class="o">-</span><span class="mi">76</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="o">=</span> <span class="n">marker</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coordinate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">([</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
                <span class="n">dict_values</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">coordinate</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">: Spectral signature at (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                    <span class="n">iterations</span><span class="p">,</span>
                    <span class="nb">round</span><span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
                    <span class="nb">round</span><span class="p">(</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
                <span class="p">)</span>
                <span class="n">marker</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                    <span class="n">band_names</span><span class="p">,</span>
                    <span class="n">band_values</span><span class="p">,</span>
                    <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                    <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                    <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                    <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                    <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                    <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                    <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">plot_raster</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Interactive plotting of Earth Engine data by clicking on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (object, optional): The ee.Image or ee.ImageCollection to sample. Defaults to None.</span>
<span class="sd">            sample_scale (float, optional): A nominal scale in meters of the projection to sample in. Defaults to None.</span>
<span class="sd">            plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">            overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">            position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">            min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">            max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_control&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;random_marker&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

        <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;border&quot;</span><span class="p">:</span> <span class="s2">&quot;1px solid black&quot;</span><span class="p">})</span>
        <span class="n">plot_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
            <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
            <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
            <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The plot function can only be used on ee.Image or ee.ImageCollection with more than one band.&quot;</span>
        <span class="k">if</span> <span class="p">(</span><span class="n">ee_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;ee_object&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="n">sample_scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">sample_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>

        <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                    <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                    <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>
                    <span class="n">xy</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                    <span class="n">dict_values</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">ee_object</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sample_scale</span><span class="p">)</span>
                        <span class="o">.</span><span class="n">first</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span>
                        <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                    <span class="p">)</span>
                    <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                        <span class="n">band_names</span><span class="p">,</span>
                        <span class="n">band_values</span><span class="p">,</span>
                        <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                        <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                        <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                        <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                        <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                        <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span><span class="p">:</span>
                            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No data for the clicked location.&quot;</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Captures user inputs and add markers to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            event (str, optional): [description]. Defaults to &#39;click&#39;.</span>
<span class="sd">            add_marker (bool, optional): If True, add markers to the map. Defaults to True.</span>

<span class="sd">        Returns:</span>
<span class="sd">            object: a marker cluster.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
                <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
                    <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                    <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
            <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">:</span>
                <span class="k">pass</span>

        <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Sets the visibility of the controls on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">            fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">            latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">pass</span>

    <span class="n">setControlVisibility</span> <span class="o">=</span> <span class="n">set_control_visibility</span>

    <span class="k">def</span> <span class="nf">split_map</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">left_layer</span><span class="o">=</span><span class="s2">&quot;OpenTopoMap&quot;</span><span class="p">,</span>
        <span class="n">right_layer</span><span class="o">=</span><span class="s2">&quot;Esri.WorldTopoMap&quot;</span><span class="p">,</span>
        <span class="n">zoom_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">fullscreen_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">close_button_position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">,</span>
        <span class="n">left_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">right_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">left_position</span><span class="o">=</span><span class="s2">&quot;bottomleft&quot;</span><span class="p">,</span>
        <span class="n">right_position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">widget_layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds split map.</span>

<span class="sd">        Args:</span>
<span class="sd">            left_layer (str, optional): The layer tile layer. Defaults to &#39;OpenTopoMap&#39;.</span>
<span class="sd">            right_layer (str, optional): The right tile layer. Defaults to &#39;Esri.WorldTopoMap&#39;.</span>
<span class="sd">            zoom_control (bool, optional): Whether to show the zoom control. Defaults to True.</span>
<span class="sd">            fullscreen_control (bool, optional): Whether to show the full screen control. Defaults to True.</span>
<span class="sd">            layer_control (bool, optional): Whether to show the layer control. Defaults to True.</span>
<span class="sd">            add_close_button (bool, optional): Whether to add a close button. Defaults to False.</span>
<span class="sd">            close_button_position (str, optional): The position of the close button. Defaults to &#39;topright&#39;.</span>
<span class="sd">            left_label (str, optional): The label for the left map. Defaults to None.</span>
<span class="sd">            right_label (str, optional): The label for the right map. Defaults to None.</span>
<span class="sd">            left_position (str, optional): The position of the left label. Defaults to &#39;bottomleft&#39;.</span>
<span class="sd">            right_position (str, optional): The position of the right label. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">            widget_layout (str, optional): The layout of the label widget, such as ipywidgets.Layout(padding=&quot;0px 4px 0px 4px&quot;). Defaults to None.</span>
<span class="sd">            kwargs: Other arguments for ipyleaflet.TileLayer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">if</span> <span class="s2">&quot;max_native_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_native_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
            <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">zoom_control</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">())</span>
            <span class="k">if</span> <span class="n">fullscreen_control</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

            <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">left_name</span> <span class="o">=</span> <span class="n">left_label</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">left_name</span> <span class="o">=</span> <span class="s2">&quot;Left Layer&quot;</span>

            <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">right_name</span> <span class="o">=</span> <span class="n">right_label</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">right_name</span> <span class="o">=</span> <span class="s2">&quot;Right Layer&quot;</span>

            <span class="k">if</span> <span class="s2">&quot;attribution&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>

            <span class="k">if</span> <span class="n">left_layer</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">left_layer</span> <span class="o">=</span> <span class="n">get_basemap</span><span class="p">(</span><span class="n">left_layer</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_layer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">left_layer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">left_layer</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">left_layer</span><span class="p">)</span>
                    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                        <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">left_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                        <span class="n">url</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">left_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;left_layer must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> or a string url to a tif file.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">right_layer</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">right_layer</span> <span class="o">=</span> <span class="n">get_basemap</span><span class="p">(</span><span class="n">right_layer</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_layer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">right_layer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">right_layer</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
                    <span class="n">url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">right_layer</span><span class="p">)</span>
                    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                        <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">right_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                        <span class="n">url</span><span class="o">=</span><span class="n">right_layer</span><span class="p">,</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">right_name</span><span class="p">,</span>
                        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_layer</span><span class="p">,</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;right_layer must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> or a string url to a tif file.&quot;</span>
                <span class="p">)</span>

            <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
                <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
            <span class="c1"># self.dragging = False</span>

            <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">widget_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">widget_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
                <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">left_label</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widget_layout</span><span class="p">)</span>

                <span class="n">left_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                    <span class="n">widget</span><span class="o">=</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">left_position</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">widget_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">widget_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
                <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">right_label</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widget_layout</span><span class="p">)</span>
                <span class="n">right_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                    <span class="n">widget</span><span class="o">=</span><span class="n">right_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">right_position</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

            <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
                <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close split-panel map&quot;</span><span class="p">,</span>
                <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                    <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
                <span class="p">),</span>
            <span class="p">)</span>

            <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

                <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">controls</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

                <span class="c1"># self.dragging = True</span>

            <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
            <span class="n">close_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                <span class="n">widget</span><span class="o">=</span><span class="n">close_button</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">close_button_position</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">add_close_button</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">close_control</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">layer_control</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addLayerControl</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided layers are invalid!&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">ts_inspector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">left_ts</span><span class="p">,</span>
        <span class="n">left_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">left_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">right_ts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">right_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">right_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">right_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="s2">&quot;130px&quot;</span><span class="p">,</span>
        <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">,</span>
        <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Creates a split-panel map for inspecting timeseries images.</span>

<span class="sd">        Args:</span>
<span class="sd">            left_ts (object): An ee.ImageCollection to show on the left panel.</span>
<span class="sd">            left_names (list): A list of names to show under the left dropdown.</span>
<span class="sd">            left_vis (dict, optional): Visualization parameters for the left layer. Defaults to {}.</span>
<span class="sd">            left_index (int, optional): The index of the left layer to show. Defaults to 0.</span>
<span class="sd">            right_ts (object): An ee.ImageCollection to show on the right panel.</span>
<span class="sd">            right_names (list): A list of names to show under the right dropdown.</span>
<span class="sd">            right_vis (dict, optional): Visualization parameters for the right layer. Defaults to {}.</span>
<span class="sd">            right_index (int, optional): The index of the right layer to show. Defaults to -1.</span>
<span class="sd">            width (str, optional): The width of the dropdown list. Defaults to &#39;130px&#39;.</span>
<span class="sd">            date_format (str, optional): The date format to show in the dropdown. Defaults to &#39;YYYY-MM-dd&#39;.</span>
<span class="sd">            add_close_button (bool, optional): Whether to show the close button. Defaults to False.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

        <span class="k">if</span> <span class="n">left_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">left_names</span> <span class="o">=</span> <span class="n">image_dates</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">right_ts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right_ts</span> <span class="o">=</span> <span class="n">left_ts</span>

        <span class="k">if</span> <span class="n">right_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right_names</span> <span class="o">=</span> <span class="n">left_names</span>

        <span class="k">if</span> <span class="n">right_vis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right_vis</span> <span class="o">=</span> <span class="n">left_vis</span>

        <span class="n">left_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
        <span class="n">right_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">right_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">left_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">left_names</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The number of images in left_ts must match the number of layer names in left_names.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>
        <span class="k">if</span> <span class="n">right_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">right_names</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The number of images in right_ts must match the number of layer names in right_names.&quot;</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Esri&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Esri.WorldStreetMap&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">&quot;</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Esri&quot;</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Esri.WorldStreetMap&quot;</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
        <span class="n">left_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">left_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">right_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">right_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
        <span class="n">left_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="n">right_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">width</span>

        <span class="n">left_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">left_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span>
        <span class="p">)</span>
        <span class="n">right_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">right_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomleft&quot;</span><span class="p">))</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

        <span class="k">def</span> <span class="nf">left_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">left_dropdown_index</span> <span class="o">=</span> <span class="n">left_dropdown</span><span class="o">.</span><span class="n">index</span>
            <span class="k">if</span> <span class="n">left_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">left_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                        <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">left_dropdown_index</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                        <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">left_dropdown_index</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The left_ts argument must be an ImageCollection.&quot;</span><span class="p">)</span>
                        <span class="k">return</span>

                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                        <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="p">)</span>

                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">EELeafletTileLayer</span><span class="p">(</span>
                        <span class="n">left_image</span><span class="p">,</span> <span class="n">left_vis</span><span class="p">,</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_dropdown_index</span><span class="p">]</span>
                    <span class="p">)</span>
                    <span class="n">left_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">left_image</span><span class="o">.</span><span class="n">url</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">return</span>

        <span class="n">left_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">left_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">right_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="n">right_dropdown_index</span> <span class="o">=</span> <span class="n">right_dropdown</span><span class="o">.</span><span class="n">index</span>
            <span class="k">if</span> <span class="n">right_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">right_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                        <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                            <span class="n">right_dropdown_index</span>
                        <span class="p">)</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                        <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">right_dropdown_index</span><span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The left_ts argument must be an ImageCollection.&quot;</span><span class="p">)</span>
                        <span class="k">return</span>

                    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                        <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                        <span class="k">pass</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="p">)</span>

                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">EELeafletTileLayer</span><span class="p">(</span>
                        <span class="n">right_image</span><span class="p">,</span>
                        <span class="n">right_vis</span><span class="p">,</span>
                        <span class="n">right_names</span><span class="p">[</span><span class="n">right_dropdown_index</span><span class="p">],</span>
                    <span class="p">)</span>
                    <span class="n">right_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">right_image</span><span class="o">.</span><span class="n">url</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                    <span class="k">return</span>

        <span class="n">right_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">right_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">left_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">left_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_index</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">right_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">right_names</span><span class="p">[</span><span class="n">right_index</span><span class="p">]</span>

        <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the tool&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
            <span class="c1"># button_style=&quot;primary&quot;,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">controls</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>

        <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">close_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">close_button</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span>
        <span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">split_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
                <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">split_control</span><span class="p">)</span>
            <span class="c1"># self.dragging = False</span>

            <span class="k">if</span> <span class="n">add_close_button</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">close_control</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;A demo for using geemap basemaps.&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_basemap_widget</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_colorbar_branca</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">colors</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
        <span class="n">categorical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="s2">&quot;45px&quot;</span><span class="p">,</span>
        <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a branca colorbar to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            colors (list): The set of colors to be used for interpolation. Colors can be provided in the form: * tuples of RGBA ints between 0 and 255 (e.g: (255, 255, 0) or (255, 255, 0, 255)) * tuples of RGBA floats between 0. and 1. (e.g: (1.,1.,0.) or (1., 1., 0., 1.)) * HTML-like string (e.g: #ffff00) * a color name or shortcut (e.g: y or yellow)</span>
<span class="sd">            vmin (int, optional): The minimal value for the colormap. Values lower than vmin will be bound directly to colors[0].. Defaults to 0.</span>
<span class="sd">            vmax (float, optional): The maximal value for the colormap. Values higher than vmax will be bound directly to colors[-1]. Defaults to 1.0.</span>
<span class="sd">            index (list, optional):The values corresponding to each color. It has to be sorted, and have the same length as colors. If None, a regular grid between vmin and vmax is created.. Defaults to None.</span>
<span class="sd">            caption (str, optional): The caption for the colormap. Defaults to &quot;&quot;.</span>
<span class="sd">            categorical (bool, optional): Whether or not to create a categorical colormap. Defaults to False.</span>
<span class="sd">            step (int, optional): The step to split the LinearColormap into a StepColormap. Defaults to None.</span>
<span class="sd">            height (str, optional): The height of the colormap widget. Defaults to &quot;45px&quot;.</span>
<span class="sd">            transparent_bg (bool, optional): Whether to use transparent background for the colormap widget. Defaults to True.</span>
<span class="sd">            position (str, optional): The position for the colormap widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">            layer_name (str, optional): Layer name of the colorbar to be associated with. Defaults to None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">branca.colormap</span> <span class="kn">import</span> <span class="n">LinearColormap</span>

        <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
        <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

        <span class="k">if</span> <span class="s2">&quot;width&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">Box</span><span class="p">):</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">])</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided color list is invalid.&quot;</span><span class="p">)</span>
                <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>

        <span class="n">colormap</span> <span class="o">=</span> <span class="n">LinearColormap</span><span class="p">(</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="n">caption</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">categorical</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

        <span class="n">colormap_ctrl</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">transparent_bg</span><span class="o">=</span><span class="n">transparent_bg</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
            <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="n">display</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">colormap_ctrl</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap_ctrl</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colormap_ctrl</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">layer_name</span><span class="p">][</span><span class="s2">&quot;colorbar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>

    <span class="k">def</span> <span class="nf">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overlays an image from the Internet or locally on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): http URL or local file path to the image.</span>
<span class="sd">            bounds (tuple): bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">            name (str): name of the layer to show on the layer control.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
        <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

        <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageSequence</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided file does not exist.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># file extension</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

                <span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;gif&quot;</span><span class="p">:</span>
                    <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
                    <span class="c1"># Loop over each frame in the animated image</span>
                    <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>
                        <span class="n">b</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                        <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;gif&quot;</span><span class="p">)</span>
                        <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                        <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
                    <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                        <span class="n">f</span><span class="p">,</span>
                        <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;GIF&quot;</span><span class="p">,</span>
                        <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                        <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                        <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>

                <span class="n">data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
                <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;data:image/</span><span class="si">{}</span><span class="s2">;base64,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span>
            <span class="n">img</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Video&quot;</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Overlays a video from the Internet on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            url (str): http URL of the video, such as &quot;https://www.mapbox.com/bites/00188/patricia_nasa.webm&quot;</span>
<span class="sd">            bounds (tuple): bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">            name (str): name of the layer to show on the layer control.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">video</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">VideoOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_landsat_ts_gif</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Timelapse&quot;</span><span class="p">,</span>
        <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span>
        <span class="n">end_year</span><span class="o">=</span><span class="mi">2021</span><span class="p">,</span>
        <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;06-10&quot;</span><span class="p">,</span>
        <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;09-20&quot;</span><span class="p">,</span>
        <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NIR&quot;</span><span class="p">,</span> <span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="s2">&quot;Green&quot;</span><span class="p">],</span>
        <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span>
        <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
        <span class="n">font_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">progress_bar_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">],</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a Landsat timelapse to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_name (str, optional): Layer name to show under the layer control. Defaults to &#39;Timelapse&#39;.</span>
<span class="sd">            roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">            label (str, optional): A label to show on the GIF, such as place name. Defaults to None.</span>
<span class="sd">            start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">            end_year (int, optional): Ending year for the timelapse. Defaults to 2021.</span>
<span class="sd">            start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to &#39;06-10&#39;.</span>
<span class="sd">            end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to &#39;09-20&#39;.</span>
<span class="sd">            bands (list, optional): Three bands selected from [&#39;Blue&#39;, &#39;Green&#39;, &#39;Red&#39;, &#39;NIR&#39;, &#39;SWIR1&#39;, &#39;SWIR2&#39;, &#39;pixel_qa&#39;]. Defaults to [&#39;NIR&#39;, &#39;Red&#39;, &#39;Green&#39;].</span>
<span class="sd">            vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">            dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">            frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">            font_size (int, optional): Font size of the animated text and label. Defaults to 30.</span>
<span class="sd">            font_color (str, optional): Font color of the animated text and label. Defaults to &#39;black&#39;.</span>
<span class="sd">            add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.</span>
<span class="sd">            progress_bar_color (str, optional): Color for the progress bar. Defaults to &#39;white&#39;.</span>
<span class="sd">            progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.</span>
<span class="sd">            out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">            download (bool, optional): Whether to download the gif. Defaults to False.</span>
<span class="sd">            apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">            nd_bands (list, optional): A list of names specifying the bands to use, e.g., [&#39;Green&#39;, &#39;SWIR1&#39;]. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).</span>
<span class="sd">            nd_threshold (float, optional): The threshold for extracting pixels from the normalized difference band.</span>
<span class="sd">            nd_palette (str, optional): The color palette to use for displaying the normalized difference band.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span>
                    <span class="n">roi</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
                        <span class="p">[</span>
                            <span class="p">[</span>
                                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                                <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                                <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                            <span class="p">]</span>
                        <span class="p">],</span>
                        <span class="kc">None</span><span class="p">,</span>
                        <span class="kc">False</span><span class="p">,</span>
                    <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided roi is invalid. It must be an ee.Geometry&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

            <span class="n">in_gif</span> <span class="o">=</span> <span class="n">landsat_timelapse</span><span class="p">(</span>
                <span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span>
                <span class="n">out_gif</span><span class="o">=</span><span class="n">out_gif</span><span class="p">,</span>
                <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
                <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
                <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span>
                <span class="n">bands</span><span class="o">=</span><span class="n">bands</span><span class="p">,</span>
                <span class="n">vis_params</span><span class="o">=</span><span class="n">vis_params</span><span class="p">,</span>
                <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span>
                <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">,</span>
                <span class="n">apply_fmask</span><span class="o">=</span><span class="n">apply_fmask</span><span class="p">,</span>
                <span class="n">nd_bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span>
                <span class="n">nd_threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">,</span>
                <span class="n">nd_palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">in_nd_gif</span> <span class="o">=</span> <span class="n">in_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.gif&quot;</span><span class="p">,</span> <span class="s2">&quot;_nd.gif&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">add_text_to_gif</span><span class="p">(</span>
                    <span class="n">in_nd_gif</span><span class="p">,</span>
                    <span class="n">in_nd_gif</span><span class="p">,</span>
                    <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;2%&quot;</span><span class="p">,</span> <span class="s2">&quot;2%&quot;</span><span class="p">),</span>
                    <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                    <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                    <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                    <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                    <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                    <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                    <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">add_text_to_gif</span><span class="p">(</span>
                    <span class="n">in_gif</span><span class="p">,</span>
                    <span class="n">in_gif</span><span class="p">,</span>
                    <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;2%&quot;</span><span class="p">,</span> <span class="s2">&quot;90%&quot;</span><span class="p">),</span>
                    <span class="n">text_sequence</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                    <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                    <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                    <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                    <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                    <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                    <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="c1"># if nd_bands is not None:</span>
                <span class="c1">#     add_text_to_gif(in_nd_gif, in_nd_gif, xy=(&#39;2%&#39;, &#39;90%&#39;), text_sequence=label,</span>
                <span class="c1">#                     font_size=font_size, font_color=font_color, duration=int(1000 / frames_per_second), add_progress_bar=add_progress_bar, progress_bar_color=progress_bar_color, progress_bar_height=progress_bar_height)</span>

            <span class="k">if</span> <span class="n">is_tool</span><span class="p">(</span><span class="s2">&quot;ffmpeg&quot;</span><span class="p">):</span>
                <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_nd_gif</span><span class="p">)</span>

            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding GIF to the map ...&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span> <span class="o">+</span> <span class="s2">&quot; ND&quot;</span>
                <span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The timelapse has been added to the map.&quot;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
                <span class="n">link</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                    <span class="n">in_gif</span><span class="p">,</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download the Landsat timelapse: &quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
                <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">link2</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                        <span class="n">in_nd_gif</span><span class="p">,</span>
                        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download the Normalized Difference Index timelapse: &quot;</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">link2</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">title</span><span class="o">=</span><span class="s2">&quot;My Map&quot;</span><span class="p">,</span>
        <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span>
        <span class="n">height</span><span class="o">=</span><span class="s2">&quot;880px&quot;</span><span class="p">,</span>
        <span class="n">add_layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves the map as an HTML file.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str, optional): The output file path to the HTML file.</span>
<span class="sd">            title (str, optional): The title of the HTML file. Defaults to &#39;My Map&#39;.</span>
<span class="sd">            width (str, optional): The width of the map in pixels or percentage. Defaults to &#39;100%&#39;.</span>
<span class="sd">            height (str, optional): The height of the map in pixels. Defaults to &#39;880px&#39;.</span>
<span class="sd">            add_layer_control (bool, optional): Whether to add the LayersControl. Defaults to True.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">save</span> <span class="o">=</span> <span class="kc">True</span>
            <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The output file extension must be html.&quot;</span><span class="p">)</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
                    <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">)</span>
                <span class="n">save</span> <span class="o">=</span> <span class="kc">False</span>

            <span class="k">if</span> <span class="n">add_layer_control</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="o">=</span> <span class="n">layer_control</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">)</span>

            <span class="n">before_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span>
            <span class="n">before_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;width must be a string.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;width must end with px or %&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;height must be a string.&quot;</span><span class="p">)</span>
                <span class="k">return</span>
            <span class="k">elif</span> <span class="ow">not</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;height must end with px&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">before_width</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">before_height</span>

            <span class="k">if</span> <span class="ow">not</span> <span class="n">save</span><span class="p">:</span>
                <span class="n">out_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                    <span class="n">out_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
                <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
                <span class="k">return</span> <span class="n">out_html</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Saves the map as a PNG or JPG image.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str, optional): The output file path to the image. Defaults to None.</span>
<span class="sd">            monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;my_map.png&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.jpg&quot;</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file must be a PNG or JPG image.&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">work_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

        <span class="n">screenshot</span> <span class="o">=</span> <span class="n">screen_capture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">monitor</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="n">screenshot</span>

    <span class="k">def</span> <span class="nf">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reset the toolbar so that no tool is selected.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_toolbar&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_toolbar</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">            If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer) and</span>
<span class="sd">            if the raster does not render properly, try installing jupyter-server-proxy using `pip install jupyter-server-proxy`,</span>
<span class="sd">            then running the following code before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">            import os</span>
<span class="sd">            os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            source (str): The path to the GeoTIFF file or the URL of the Cloud Optimized GeoTIFF.</span>
<span class="sd">            indexes (int, optional): The band(s) to use. Band indexing starts at 1. Defaults to None.</span>
<span class="sd">            colormap (str, optional): The name of the colormap from `matplotlib` to use when plotting a single band. See https://matplotlib.org/stable/gallery/color/colormap_reference.html. Default is greyscale.</span>
<span class="sd">            vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">            attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">            zoom_to_layer (bool, optional): Whether to zoom to the extent of the layer. Defaults to True.</span>
<span class="sd">            visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">            array_args (dict, optional): Additional arguments to pass to `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
            <span class="n">source</span> <span class="o">=</span> <span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

        <span class="n">tile_layer</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">get_local_tile_layer</span><span class="p">(</span>
            <span class="n">source</span><span class="p">,</span>
            <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
            <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">tile_layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">visible</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
        <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

        <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
            <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;tile_layer&quot;</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">,</span>
            <span class="s2">&quot;tile_client&quot;</span><span class="p">:</span> <span class="n">tile_client</span><span class="p">,</span>
            <span class="s2">&quot;indexes&quot;</span><span class="p">:</span> <span class="n">indexes</span><span class="p">,</span>
            <span class="s2">&quot;band_names&quot;</span><span class="p">:</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">band_names</span><span class="p">,</span>
            <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LOCAL&quot;</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">add_remote_tile</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a remote Cloud Optimized GeoTIFF (COG) to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            source (str): The path to the remote Cloud Optimized GeoTIFF.</span>
<span class="sd">            band (int, optional): The band to use. Band indexing starts at 1. Defaults to None.</span>
<span class="sd">            palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">            vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">            attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
                <span class="n">source</span><span class="p">,</span>
                <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span>
                <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
                <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
                <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
                <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The source must be a URL.&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes the draw control from the map&quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;draw_control&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes user-drawn geometries from the map&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
        <span class="k">if</span> <span class="s2">&quot;Drawn Features&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;Drawn Features&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">remove_last_drawn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes last user-drawn geometry from the map&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_drawn_features</span><span class="p">()</span>
            <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">count</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">remove_geometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">geometries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_chart_values&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_chart_points&quot;</span><span class="p">):</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="c1"># self._chart_labels = None</span>

    <span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Exports pixel values to a csv file based on user-drawn geometries.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): The output file path to the csv file or shapefile.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">csv</span>

        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;The output file must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
                <span class="p">)</span>
            <span class="p">)</span>
            <span class="k">return</span>

        <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">out_csv</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;csv&quot;</span>
        <span class="n">out_shp</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;shp&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
            <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

        <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">)</span>
        <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_labels</span>
            <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
                <span class="nb">id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
                <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
                <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
                <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">out_list</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The csv file has been saved to: </span><span class="si">{</span><span class="n">out_csv</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">csv_to_shp</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">)</span>
                <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The shapefile has been saved to: </span><span class="si">{</span><span class="n">out_shp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_styled_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="p">,</span>
        <span class="n">column</span><span class="p">,</span>
        <span class="n">palette</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a styled vector to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (object): An ee.FeatureCollection.</span>
<span class="sd">            column (str): The column name to use for styling.</span>
<span class="sd">            palette (list | dict): The palette (e.g., list of colors or a dict containing label and color pairs) to use for styling.</span>
<span class="sd">            layer_name (str, optional): The name to be used for the new layer. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">            opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="kn">from</span> <span class="nn">.colormaps</span> <span class="kn">import</span> <span class="n">get_palette</span>

            <span class="n">count</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">palette</span> <span class="o">=</span> <span class="n">get_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

        <span class="n">styled_vector</span> <span class="o">=</span> <span class="n">vector_styling</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
            <span class="n">styled_vector</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;styleProperty&quot;</span><span class="p">:</span> <span class="s2">&quot;style&quot;</span><span class="p">}),</span>
            <span class="p">{},</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">shown</span><span class="p">,</span>
            <span class="n">opacity</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_shp</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">in_shp</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a shapefile to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            in_shp (str): The input file path to the shapefile.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            encoding (str, optional): The encoding of the shapefile. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: The provided shapefile could not be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided shapefile could not be found.&quot;</span><span class="p">)</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="p">,</span>
            <span class="n">encoding</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="n">add_shapefile</span> <span class="o">=</span> <span class="n">add_shp</span>

    <span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">in_geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a GeoJSON file to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            in_geojson (str | dict): The file path or http URL to the input GeoJSON or a dictionary containing the geojson.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            encoding (str, optional): The encoding of the GeoJSON file. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: The provided GeoJSON file could not be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">json</span>
        <span class="kn">import</span> <span class="nn">random</span>
        <span class="kn">import</span> <span class="nn">requests</span>
        <span class="kn">import</span> <span class="nn">warnings</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

        <span class="n">style_callback_only</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style_callback_only</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">in_geojson</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                    <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
                    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">):</span>
                        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                            <span class="s2">&quot;The provided GeoJSON file could not be found.&quot;</span>
                        <span class="p">)</span>

                    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                        <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">in_geojson</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input geojson must be a type of str or dict.&quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="c1"># &quot;stroke&quot;: True,</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
                <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="c1"># &quot;fill&quot;: True,</span>
                <span class="c1"># &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
                <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
                <span class="c1"># &quot;dashArray&quot;: &quot;9&quot;</span>
                <span class="c1"># &quot;clickable&quot;: True,</span>
            <span class="p">}</span>
        <span class="k">elif</span> <span class="s2">&quot;weight&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">hover_style</span><span class="p">:</span>
            <span class="n">hover_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>

        <span class="k">def</span> <span class="nf">random_color</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
            <span class="k">return</span> <span class="p">{</span>
                <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
                <span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">fill_colors</span><span class="p">),</span>
            <span class="p">}</span>

        <span class="n">toolbar_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Toolbar&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the tool&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
            <span class="c1"># button_style=&quot;primary&quot;,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="n">html</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>
        <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">margin</span> <span class="o">=</span> <span class="s2">&quot;0px 10px 0px 10px&quot;</span>
        <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_height</span> <span class="o">=</span> <span class="s2">&quot;250px&quot;</span>
        <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;250px&quot;</span>

        <span class="n">output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
            <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span> <span class="n">html</span><span class="p">]</span>
        <span class="p">)</span>
        <span class="n">info_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">output_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">info_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span> <span class="s2">&quot;on_click&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">info_control</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">toolbar_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="n">close_button</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="n">output_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span> <span class="n">html</span><span class="p">])</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">output_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">])]</span>

        <span class="n">toolbar_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">toolbar_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="n">toolbar_button</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
                <span class="k">if</span> <span class="n">info_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">info_control</span><span class="p">)</span>
                <span class="n">output_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">update_html</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
            <span class="n">value</span> <span class="o">=</span> <span class="p">[</span>
                <span class="s2">&quot;&lt;b&gt;</span><span class="si">{}</span><span class="s2">: &lt;/b&gt;</span><span class="si">{}</span><span class="s2">&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">])</span>
                <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
            <span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

            <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">{}</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
            <span class="n">html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

        <span class="k">if</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style_callback</span> <span class="o">=</span> <span class="n">random_color</span>

        <span class="k">if</span> <span class="n">style_callback_only</span><span class="p">:</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span>
                <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">info_mode</span> <span class="o">==</span> <span class="s2">&quot;on_hover&quot;</span><span class="p">:</span>
            <span class="n">geojson</span><span class="o">.</span><span class="n">on_hover</span><span class="p">(</span><span class="n">update_html</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">info_mode</span> <span class="o">==</span> <span class="s2">&quot;on_click&quot;</span><span class="p">:</span>
            <span class="n">geojson</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update_html</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">geojson_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;json_layer_dict&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">json_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
            <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">,</span>
            <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">,</span>
            <span class="s2">&quot;hover_style&quot;</span><span class="p">:</span> <span class="n">hover_style</span><span class="p">,</span>
            <span class="s2">&quot;style_callback&quot;</span><span class="p">:</span> <span class="n">style_callback</span><span class="p">,</span>
        <span class="p">}</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">json_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>

    <span class="k">def</span> <span class="nf">add_kml</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">in_kml</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a GeoJSON file to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            in_kml (str): The input file path to the KML.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: The provided KML file could not be found.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_kml</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">in_kml</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
            <span class="n">in_kml</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>

        <span class="n">in_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided KML file could not be found.&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_vector</span><span class="p">(</span>
            <span class="n">in_kml</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds any geopandas-supported vector dataset to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            to_ee (bool, optional): Whether to convert the GeoJSON to ee.FeatureCollection. Defaults to False.</span>
<span class="sd">            bbox (tuple | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</span>
<span class="sd">            mask (dict | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</span>
<span class="sd">            rows (int or slice, optional): Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            encoding (str, optional): The encoding to use to read the file. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
            <span class="n">fc</span> <span class="o">=</span> <span class="n">vector_to_ee</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span>
                <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
                <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
                <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.shp&quot;</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_shapefile</span><span class="p">(</span>
                    <span class="n">filename</span><span class="p">,</span>
                    <span class="n">layer_name</span><span class="p">,</span>
                    <span class="n">style</span><span class="p">,</span>
                    <span class="n">hover_style</span><span class="p">,</span>
                    <span class="n">style_callback</span><span class="p">,</span>
                    <span class="n">fill_colors</span><span class="p">,</span>
                    <span class="n">info_mode</span><span class="p">,</span>
                    <span class="n">encoding</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                    <span class="n">filename</span><span class="p">,</span>
                    <span class="n">layer_name</span><span class="p">,</span>
                    <span class="n">style</span><span class="p">,</span>
                    <span class="n">hover_style</span><span class="p">,</span>
                    <span class="n">style_callback</span><span class="p">,</span>
                    <span class="n">fill_colors</span><span class="p">,</span>
                    <span class="n">info_mode</span><span class="p">,</span>
                    <span class="n">encoding</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">geojson</span> <span class="o">=</span> <span class="n">vector_to_geojson</span><span class="p">(</span>
                    <span class="n">filename</span><span class="p">,</span>
                    <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span>
                    <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
                    <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
                    <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>

                <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                    <span class="n">geojson</span><span class="p">,</span>
                    <span class="n">layer_name</span><span class="p">,</span>
                    <span class="n">style</span><span class="p">,</span>
                    <span class="n">hover_style</span><span class="p">,</span>
                    <span class="n">style_callback</span><span class="p">,</span>
                    <span class="n">fill_colors</span><span class="p">,</span>
                    <span class="n">info_mode</span><span class="p">,</span>
                    <span class="n">encoding</span><span class="p">,</span>
                <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM data to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">            by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">            buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">            to_ee (bool, optional): Whether to convert the csv to an ee.FeatureCollection.</span>
<span class="sd">            geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_to_gdf</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="n">buffer_dist</span>
        <span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
            <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">zoomToObject</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                <span class="n">geojson</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
                <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
                <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
                <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

    <span class="k">def</span> <span class="nf">add_osm_from_geocode</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">,</span>
        <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM data of place(s) by name or ID to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">            which_result (int, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">            by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">            buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_geocode</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_geocode</span><span class="p">(</span>
            <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="n">buffer_dist</span>
        <span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_address</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">address</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within some distance N, S, E, W of address to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            address (str): The address to geocode and use as the central point around which to get the geometries.</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            dist (int, optional): Distance in meters. Defaults to 1000.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_address</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_address</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_place</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">query</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within boundaries of geocodable place(s) to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            which_result (int, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">            buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_place</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_place</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_point</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">center_point</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within some distance N, S, E, W of a point to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            center_point (tuple): The (lat, lng) center point around which to get the geometries.</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            dist (int, optional): Distance in meters. Defaults to 1000.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_point</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_point</span><span class="p">(</span><span class="n">center_point</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_polygon</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">polygon</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within boundaries of a (multi)polygon to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            polygon (shapely.geometry.Polygon | shapely.geometry.MultiPolygon): Geographic boundaries to fetch geometries within</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_polygon</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_polygon</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_bbox</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">north</span><span class="p">,</span>
        <span class="n">south</span><span class="p">,</span>
        <span class="n">east</span><span class="p">,</span>
        <span class="n">west</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within a N, S, E, W bounding box to the map.</span>


<span class="sd">        Args:</span>
<span class="sd">            north (float): Northern latitude of bounding box.</span>
<span class="sd">            south (float): Southern latitude of bounding box.</span>
<span class="sd">            east (float): Eastern longitude of bounding box.</span>
<span class="sd">            west (float): Western longitude of bounding box.</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_bbox</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_bbox</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_osm_from_view</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">tags</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within the current map view to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_bbox</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span>
                <span class="p">(</span><span class="mf">40.74824858675827</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.98933637940563</span><span class="p">),</span>
                <span class="p">(</span><span class="mf">40.75068694343106</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.98364473187601</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
            <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
        <span class="p">)</span>

        <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_bbox</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">gdf</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a GeoDataFrame to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            gdf (GeoDataFrame): A GeoPandas GeoDataFrame.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            zoom_to_layer (bool, optional): Whether to zoom to the layer.</span>
<span class="sd">            encoding (str, optional): The encoding of the GeoDataFrame. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">gdf_to_geojson</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">data</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="p">,</span>
            <span class="n">encoding</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

            <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">west</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;minx&quot;</span><span class="p">])</span>
            <span class="n">south</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;miny&quot;</span><span class="p">])</span>
            <span class="n">east</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;maxx&quot;</span><span class="p">])</span>
            <span class="n">north</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;maxy&quot;</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">],</span> <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">west</span><span class="p">]])</span>

    <span class="k">def</span> <span class="nf">add_gdf_from_postgis</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">sql</span><span class="p">,</span>
        <span class="n">con</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Reads a PostGIS database and returns data as a GeoDataFrame to be added to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            sql (str): SQL query to execute in selecting entries from database, or name of the table to read from the database.</span>
<span class="sd">            con (sqlalchemy.engine.Engine): Active connection to the database to query.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            zoom_to_layer (bool, optional): Whether to zoom to the layer.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
            <span class="n">gdf</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="p">,</span>
            <span class="n">zoom_to_layer</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_time_slider</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">ee_object</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Time series&quot;</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">time_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">slider_length</span><span class="o">=</span><span class="s2">&quot;150px&quot;</span><span class="p">,</span>
        <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">,</span>
        <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a time slider to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            ee_object (ee.Image | ee.ImageCollection): The Image or ImageCollection to visualize.</span>
<span class="sd">            vis_params (dict, optional): Visualization parameters to use for visualizing image. Defaults to {}.</span>
<span class="sd">            region (ee.Geometry | ee.FeatureCollection): The region to visualize.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used. Defaults to &quot;Time series&quot;.</span>
<span class="sd">            labels (list, optional): The list of labels to be used for the time series. Defaults to None.</span>
<span class="sd">            time_interval (int, optional): Time interval in seconds. Defaults to 1.</span>
<span class="sd">            position (str, optional): Position to place the time slider, can be any of [&#39;topleft&#39;, &#39;topright&#39;, &#39;bottomleft&#39;, &#39;bottomright&#39;]. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">            slider_length (str, optional): Length of the time slider. Defaults to &quot;150px&quot;.</span>
<span class="sd">            date_format (str, optional): The date format to use. Defaults to &#39;YYYY-MM-dd&#39;.</span>
<span class="sd">            opacity (float, optional): The opacity of layers. Defaults to 1.0.</span>

<span class="sd">        Raises:</span>
<span class="sd">            TypeError: If the ee_object is not ee.Image | ee.ImageCollection.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">threading</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span>
                <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">]))</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;The length of labels must be equal to the number of bands in the image.&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="n">band_names</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>

            <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()):</span>
                    <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                        <span class="s2">&quot;The length of labels must be equal to the number of images in the ImageCollection.&quot;</span>
                    <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">))</span>
                    <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.Image or ee.ImageCollection&quot;</span><span class="p">)</span>

        <span class="c1"># if labels is not None:</span>
        <span class="c1">#     size = len(labels)</span>
        <span class="c1"># else:</span>
        <span class="c1">#     size = ee_object.size().getInfo()</span>
        <span class="c1">#     labels = [str(i) for i in range(1, size + 1)]</span>

        <span class="n">first</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toBands</span><span class="p">(),</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="s2">&quot;Image X&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

        <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
            <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
            <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
            <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">slider_length</span><span class="p">),</span>
        <span class="p">)</span>
        <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 5px 0px 5px&quot;</span><span class="p">)</span>
        <span class="p">)</span>

        <span class="n">play_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;play&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Play the time slider&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">pause_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Pause the time slider&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">close_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the time slider&quot;</span><span class="p">,</span>
            <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="n">play_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

        <span class="n">slider_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">slider</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">play_btn</span><span class="p">,</span> <span class="n">pause_btn</span><span class="p">,</span> <span class="n">close_btn</span><span class="p">])</span>

        <span class="k">def</span> <span class="nf">play_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="kn">import</span> <span class="nn">time</span>

            <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="k">def</span> <span class="nf">work</span><span class="p">(</span><span class="n">slider</span><span class="p">):</span>
                <span class="k">while</span> <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                    <span class="k">if</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
                        <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
                    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">time_interval</span><span class="p">)</span>

            <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">slider</span><span class="p">,))</span>
            <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

        <span class="k">def</span> <span class="nf">pause_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="n">play_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">play_click</span><span class="p">)</span>
        <span class="n">pause_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">pause_click</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">slider_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="mi">1</span>
            <span class="n">label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
            <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toBands</span><span class="p">(),</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="s2">&quot;Image X&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>

        <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">slider_changed</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

        <span class="k">def</span> <span class="nf">close_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
            <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">toolbar_reset</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_ee_layer</span><span class="p">(</span><span class="s2">&quot;Image X&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_ee_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>

            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span><span class="p">)</span>
            <span class="n">slider_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

        <span class="n">close_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_click</span><span class="p">)</span>

        <span class="n">slider_ctrl</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">slider_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">slider_ctrl</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="o">=</span> <span class="n">slider_ctrl</span>

    <span class="k">def</span> <span class="nf">add_xy_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">in_csv</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker cluster&quot;</span><span class="p">,</span>
        <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds points from a CSV file containing lat/lon information and display data on the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            in_csv (str): The file path to the input CSV file.</span>
<span class="sd">            x (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            y (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            label (str, optional): The name of the column containing label information to used for marker popup. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to &quot;Marker cluster&quot;.</span>
<span class="sd">            to_ee (bool, optional): Whether to convert the csv to an ee.FeatureCollection.</span>

<span class="sd">        Raises:</span>
<span class="sd">            FileNotFoundError: The specified input csv does not exist.</span>
<span class="sd">            ValueError: The specified x column does not exist.</span>
<span class="sd">            ValueError: The specified y column does not exist.</span>
<span class="sd">            ValueError: The specified label column does not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
        <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">label</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;label must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
            <span class="n">fc</span> <span class="o">=</span> <span class="n">csv_to_ee</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span>

            <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
                <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                        <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                        <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                    <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span>
                <span class="p">]</span>

            <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">add_points_from_xy</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">,</span>
        <span class="n">color_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">marker_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">icon_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;white&quot;</span><span class="p">],</span>
        <span class="n">icon_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">],</span>
        <span class="n">spin</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | pd.DataFrame): A csv or Pandas DataFrame containing x, y, z values.</span>
<span class="sd">            x (str, optional): The column name for the x values. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            y (str, optional): The column name for the y values. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            popup (list, optional): A list of column names to be used as the popup. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The name of the layer. Defaults to &quot;Marker Cluster&quot;.</span>
<span class="sd">            color_column (str, optional): The column name for the color values. Defaults to None.</span>
<span class="sd">            marker_colors (list, optional): A list of colors to be used for the markers. Defaults to None.</span>
<span class="sd">            icon_colors (list, optional): A list of colors to be used for the icons. Defaults to [&#39;white&#39;].</span>
<span class="sd">            icon_names (list, optional): A list of names to be used for the icons. More icons can be found at https://fontawesome.com/v4/icons. Defaults to [&#39;info&#39;].</span>
<span class="sd">            spin (bool, optional): If True, the icon will spin. Defaults to False.</span>
<span class="sd">            add_legend (bool, optional): If True, a legend will be added to the map. Defaults to True.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">color_options</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;red&quot;</span><span class="p">,</span>
            <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;green&quot;</span><span class="p">,</span>
            <span class="s2">&quot;purple&quot;</span><span class="p">,</span>
            <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
            <span class="s2">&quot;darkred&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lightred&quot;</span><span class="p">,</span>
            <span class="s2">&quot;beige&quot;</span><span class="p">,</span>
            <span class="s2">&quot;darkblue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;darkgreen&quot;</span><span class="p">,</span>
            <span class="s2">&quot;cadetblue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;darkpurple&quot;</span><span class="p">,</span>
            <span class="s2">&quot;white&quot;</span><span class="p">,</span>
            <span class="s2">&quot;pink&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lightgreen&quot;</span><span class="p">,</span>
            <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
            <span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
        <span class="p">]</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">df</span> <span class="o">=</span> <span class="n">points_from_xy</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

        <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">color_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> does not exist in the dataframe.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">]))</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">items</span> <span class="o">=</span> <span class="kc">None</span>

        <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker_colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">color_options</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is greater than the number of available colors.&quot;</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">marker_colors</span> <span class="o">=</span> <span class="n">color_options</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)]</span>
        <span class="k">elif</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker_colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">marker_colors</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_colors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">icon_colors</span> <span class="o">=</span> <span class="n">icon_colors</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_colors</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
                <span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                <span class="n">icon_names</span> <span class="o">=</span> <span class="n">icon_names</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_names</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
                <span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="n">col_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;popup must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">item</span> <span class="ow">in</span> <span class="n">col_names</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;All popup items must be select from: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">popup</span> <span class="o">=</span> <span class="n">col_names</span>

        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span>

        <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">popup</span><span class="p">]</span>

                <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span>
                            <span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])</span>
                        <span class="p">]</span>
                        <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                        <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                        <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                            <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                            <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                            <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

                    <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                        <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                        <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                        <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
                        <span class="n">label</span> <span class="o">=</span> <span class="p">(</span>
                            <span class="n">label</span>
                            <span class="o">+</span> <span class="s2">&quot;&lt;b&gt;&quot;</span>
                            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                            <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span>
                            <span class="o">+</span> <span class="s2">&quot;: &quot;</span>
                            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                            <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
                        <span class="p">)</span>
                    <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
                <span class="n">df</span><span class="p">[</span><span class="s2">&quot;popup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

                <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                        <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span>
                            <span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])</span>
                        <span class="p">]</span>
                        <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                        <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                        <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                            <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                            <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                            <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                            <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                        <span class="p">)</span>
                    <span class="k">else</span><span class="p">:</span>
                        <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

                    <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                        <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                        <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]),</span>
                        <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span><span class="p">,</span>
                    <span class="p">)</span>
                    <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                        <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                        <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                        <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span>
                <span class="p">)</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="n">marker_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">check_color</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">marker_colors</span><span class="p">]</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
                <span class="n">title</span><span class="o">=</span><span class="n">color_column</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="n">colors</span><span class="o">=</span><span class="n">marker_colors</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="n">items</span>
            <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">add_circle_markers_from_xy</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
        <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map. For a list of options, see https://ipyleaflet.readthedocs.io/en/latest/api_reference/circle_marker.html</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | pd.DataFrame): A csv or Pandas DataFrame containing x, y, z values.</span>
<span class="sd">            x (str, optional): The column name for the x values. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            y (str, optional): The column name for the y values. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            radius (int, optional): The radius of the circle. Defaults to 10.</span>
<span class="sd">            popup (list, optional): A list of column names to be used as the popup. Defaults to None.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">popup</span> <span class="o">=</span> <span class="n">col_names</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">popup</span> <span class="o">=</span> <span class="p">[</span><span class="n">popup</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
            <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
                <span class="n">html</span> <span class="o">=</span> <span class="n">html</span> <span class="o">+</span> <span class="s2">&quot;&lt;b&gt;&quot;</span> <span class="o">+</span> <span class="n">p</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
            <span class="n">popup_html</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">CircleMarker</span><span class="p">(</span>
                <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">x</span><span class="p">)],</span>
                <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
                <span class="n">popup</span><span class="o">=</span><span class="n">popup_html</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_planet_by_month</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a Planet global mosaic by month to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">        Args:</span>
<span class="sd">            year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">            month (int, optional): The month of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">            name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">            api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">            token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">planet_tile_by_month</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_planet_by_quarter</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a Planet global mosaic by quarter to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">        Args:</span>
<span class="sd">            year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">            quarter (int, optional): The quarter of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">            name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">            api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">            token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="n">layer</span> <span class="o">=</span> <span class="n">planet_tile_by_quarter</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">quarter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Renders map figure in a Streamlit app.</span>

<span class="sd">        Args:</span>
<span class="sd">            width (int, optional): Width of the map. Defaults to None.</span>
<span class="sd">            height (int, optional): Height of the map. Defaults to 600.</span>
<span class="sd">            responsive (bool, optional): Whether to make the map responsive. Defaults to True.</span>
<span class="sd">            scrolling (bool, optional): If True, show a scrollbar when the content is larger than the iframe. Otherwise, do not show a scrollbar. Defaults to False.</span>

<span class="sd">        Returns:</span>
<span class="sd">            streamlit.components: components.html object.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>

            <span class="c1"># if responsive:</span>
            <span class="c1">#     make_map_responsive = &quot;&quot;&quot;</span>
            <span class="c1">#     &lt;style&gt;</span>
            <span class="c1">#     [title~=&quot;st.iframe&quot;] { width: 100%}</span>
            <span class="c1">#     &lt;/style&gt;</span>
            <span class="c1">#     &quot;&quot;&quot;</span>
            <span class="c1">#     st.markdown(make_map_responsive, unsafe_allow_html=True)</span>
            <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">html</span><span class="p">(</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">(),</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span>
            <span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_point_layer</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a point layer to the map with a popup attribute.</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): str, http url, path object or file-like object. Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO)</span>
<span class="sd">            popup (str | list, optional): Column name(s) to be used for popup. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): A layer name to use. Defaults to &quot;Marker Cluster&quot;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If the specified column name does not exist.</span>
<span class="sd">            ValueError: If the specified column names do not exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">warnings</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
        <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
        <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.kml&quot;</span><span class="p">:</span>
            <span class="n">gpd</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s2">&quot;KML&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rw&quot;</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;KML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span>
        <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;popup must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
                <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">item</span> <span class="ow">in</span> <span class="n">col_names</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">)</span>
            <span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;All popup items must be select from: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span>
        <span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span>

        <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">popup</span><span class="p">]</span>
                <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                        <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                        <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
                <span class="p">]</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
                        <span class="n">label</span> <span class="o">=</span> <span class="n">label</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
                    <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
                <span class="n">df</span><span class="p">[</span><span class="s2">&quot;popup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

                <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                        <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                        <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                        <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]),</span>
                    <span class="p">)</span>
                    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
                <span class="p">]</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span>
            <span class="p">]</span>

        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">add_census_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wms</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">census_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a census data layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            wms (str): The wms to use. For example, &quot;Current&quot;, &quot;ACS 2021&quot;, &quot;Census 2020&quot;.  See the complete list at https://tigerweb.geo.census.gov/tigerwebmain/TIGERweb_wms.html</span>
<span class="sd">            layer (str): The layer name to add to the map.</span>
<span class="sd">            census_dict (dict, optional): A dictionary containing census data. Defaults to None. It can be obtained from the get_census_dict() function.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">census_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">census_dict</span> <span class="o">=</span> <span class="n">get_census_dict</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">wms</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">census_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The provided WMS is invalid. It must be one of </span><span class="si">{</span><span class="n">census_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">layers</span> <span class="o">=</span> <span class="n">census_dict</span><span class="p">[</span><span class="n">wms</span><span class="p">][</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="sa">f</span><span class="s2">&quot;The layer name is not valid. It must be one of </span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&quot;</span>
                <span class="p">)</span>

            <span class="n">url</span> <span class="o">=</span> <span class="n">census_dict</span><span class="p">[</span><span class="n">wms</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
            <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span>
            <span class="k">if</span> <span class="s2">&quot;attribution&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;U.S. Census Bureau&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span>
            <span class="k">if</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;transparent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_wms_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_xyz_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a XYZ tile layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            provider (str): A tile layer name starts with xyz or qms. For example, xyz.OpenTopoMap,</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: The provider is not valid. It must start with xyz or qms.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">xyzservices.providers</span> <span class="k">as</span> <span class="nn">xyz</span>
        <span class="kn">from</span> <span class="nn">xyzservices</span> <span class="kn">import</span> <span class="n">TileProvider</span>

        <span class="k">if</span> <span class="n">provider</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">provider</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
            <span class="n">xyz_provider</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">xyz_provider</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">xyz_provider</span><span class="o">.</span><span class="n">attribution</span>
            <span class="k">if</span> <span class="n">attribution</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">provider</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;qms&quot;</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">provider</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
            <span class="n">qms_provider</span> <span class="o">=</span> <span class="n">TileProvider</span><span class="o">.</span><span class="n">from_qms</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">qms_provider</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">qms_provider</span><span class="o">.</span><span class="n">attribution</span>
            <span class="k">if</span> <span class="n">attribution</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
                <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The provider </span><span class="si">{</span><span class="n">provider</span><span class="si">}</span><span class="s2"> is not valid. It must start with xyz or qms.&quot;</span>
            <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_heatmap</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">value</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Heat map&quot;</span><span class="p">,</span>
        <span class="n">radius</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a heat map to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/heatmap.html</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | list | pd.DataFrame): File path or HTTP URL to the input file or a list of data points in the format of [[x1, y1, z1], [x2, y2, z2]]. For example, https://raw.githubusercontent.com/giswqs/leafmap/master/examples/data/world_cities.csv</span>
<span class="sd">            latitude (str, optional): The column name of latitude. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            longitude (str, optional): The column name of longitude. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            value (str, optional): The column name of values. Defaults to &quot;value&quot;.</span>
<span class="sd">            name (str, optional): Layer name to use. Defaults to &quot;Heat map&quot;.</span>
<span class="sd">            radius (int, optional): Radius of each point of the heatmap. Defaults to 25.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ValueError: If data is not a list.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
        <span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Heatmap</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">value</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">value</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data must be a list, a DataFrame, or a file path.&quot;</span><span class="p">)</span>

            <span class="n">heatmap</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span><span class="n">locations</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">heatmap</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_labels</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">column</span><span class="p">,</span>
        <span class="n">font_size</span><span class="o">=</span><span class="s2">&quot;12pt&quot;</span><span class="p">,</span>
        <span class="n">font_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">font_family</span><span class="o">=</span><span class="s2">&quot;arial&quot;</span><span class="p">,</span>
        <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
        <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
        <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
        <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Labels&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Adds a label layer to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/divicon.html</span>

<span class="sd">        Args:</span>
<span class="sd">            data (pd.DataFrame | ee.FeatureCollection): The input data to label.</span>
<span class="sd">            column (str): The column name of the data to label.</span>
<span class="sd">            font_size (str, optional): The font size of the labels. Defaults to &quot;12pt&quot;.</span>
<span class="sd">            font_color (str, optional): The font color of the labels. Defaults to &quot;black&quot;.</span>
<span class="sd">            font_family (str, optional): The font family of the labels. Defaults to &quot;arial&quot;.</span>
<span class="sd">            font_weight (str, optional): The font weight of the labels, can be normal, bold. Defaults to &quot;normal&quot;.</span>
<span class="sd">            x (str, optional): The column name of the longitude. Defaults to &quot;longitude&quot;.</span>
<span class="sd">            y (str, optional): The column name of the latitude. Defaults to &quot;latitude&quot;.</span>
<span class="sd">            draggable (bool, optional): Whether the labels are draggable. Defaults to True.</span>
<span class="sd">            layer_name (str, optional): Layer name to use. Defaults to &quot;Labels&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>
        <span class="kn">import</span> <span class="nn">warnings</span>
        <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

        <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">centroids</span> <span class="o">=</span> <span class="n">vector_centroids</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">ee_to_df</span><span class="p">(</span><span class="n">centroids</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.csv&quot;</span><span class="p">:</span>
                <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;.gpkg&quot;</span><span class="p">]:</span>
                <span class="k">try</span><span class="p">:</span>
                    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

                    <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                    <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">x</span>
                    <span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span>
                <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;geopandas is required to read geojson.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data must be a DataFrame or an ee.FeatureCollection.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

        <span class="k">try</span><span class="p">:</span>
            <span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">font_size</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
        <span class="k">except</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;font_size must be something like &#39;10pt&#39;&quot;</span><span class="p">)</span>

        <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">font_size</span><span class="si">}</span><span class="s1">;color:</span><span class="si">{</span><span class="n">font_color</span><span class="si">}</span><span class="s1">;font-family:</span><span class="si">{</span><span class="n">font_family</span><span class="si">}</span><span class="s1">;font-weight: </span><span class="si">{</span><span class="n">font_weight</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">][</span><span class="n">index</span><span class="p">]</span><span class="si">}</span><span class="s1">&lt;/div&gt;&#39;</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">index</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">index</span><span class="p">]],</span>
                <span class="n">icon</span><span class="o">=</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">DivIcon</span><span class="p">(</span>
                    <span class="n">icon_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                    <span class="n">icon_anchor</span><span class="o">=</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>
                    <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">),</span>
                <span class="n">draggable</span><span class="o">=</span><span class="n">draggable</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
        <span class="n">layer_group</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayerGroup</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_group</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">layer_group</span>

    <span class="k">def</span> <span class="nf">remove_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Removes all labels from the map.&quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;labels&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">)</span>
            <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;labels&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_netcdf</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">filename</span><span class="p">,</span>
        <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;NetCDF layer&quot;</span><span class="p">,</span>
        <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">lat</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
        <span class="n">lon</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Generate an ipyleaflet/folium TileLayer from a netCDF file.</span>
<span class="sd">            If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),</span>
<span class="sd">            try adding to following two lines to the beginning of the notebook if the raster does not render properly.</span>

<span class="sd">            import os</span>
<span class="sd">            os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;</span>

<span class="sd">        Args:</span>
<span class="sd">            filename (str): File path or HTTP URL to the netCDF file.</span>
<span class="sd">            variables (int, optional): The variable/band names to extract data from the netCDF file. Defaults to None. If None, all variables will be extracted.</span>
<span class="sd">            port (str, optional): The port to use for the server. Defaults to &quot;default&quot;.</span>
<span class="sd">            palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">            vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">            nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">            attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to use. Defaults to &quot;netCDF layer&quot;.</span>
<span class="sd">            shift_lon (bool, optional): Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</span>
<span class="sd">            lat (str, optional): Name of the latitude variable. Defaults to &#39;lat&#39;.</span>
<span class="sd">            lon (str, optional): Name of the longitude variable. Defaults to &#39;lon&#39;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">tif</span><span class="p">,</span> <span class="nb">vars</span> <span class="o">=</span> <span class="n">netcdf_to_tif</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span> <span class="n">shift_lon</span><span class="o">=</span><span class="n">shift_lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">return_vars</span><span class="o">=</span><span class="kc">True</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">vars</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
                <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">vars</span><span class="p">)):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The variables must be a subset of </span><span class="si">{</span><span class="nb">vars</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="nb">vars</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
            <span class="n">tif</span><span class="p">,</span>
            <span class="n">band</span><span class="o">=</span><span class="n">band_idx</span><span class="p">,</span>
            <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_velocity</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">zonal_speed</span><span class="p">,</span>
        <span class="n">meridional_speed</span><span class="p">,</span>
        <span class="n">latitude_dimension</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
        <span class="n">longitude_dimension</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
        <span class="n">level_dimension</span><span class="o">=</span><span class="s2">&quot;lev&quot;</span><span class="p">,</span>
        <span class="n">level_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">time_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
        <span class="n">velocity_scale</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
        <span class="n">max_velocity</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">display_options</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Velocity&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a velocity layer to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | xr.Dataset): The data to use for the velocity layer. It can be a file path to a NetCDF file or an xarray Dataset.</span>
<span class="sd">            zonal_speed (str): Name of the zonal speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</span>
<span class="sd">            meridional_speed (str): Name of the meridional speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</span>
<span class="sd">            latitude_dimension (str, optional): Name of the latitude dimension in the dataset. Defaults to &#39;lat&#39;.</span>
<span class="sd">            longitude_dimension (str, optional): Name of the longitude dimension in the dataset. Defaults to &#39;lon&#39;.</span>
<span class="sd">            level_dimension (str, optional): Name of the level dimension in the dataset. Defaults to &#39;lev&#39;.</span>
<span class="sd">            level_index (int, optional): The index of the level dimension to display. Defaults to 0.</span>
<span class="sd">            time_index (int, optional): The index of the time dimension to display. Defaults to 0.</span>
<span class="sd">            velocity_scale (float, optional): The scale of the velocity. Defaults to 0.01.</span>
<span class="sd">            max_velocity (int, optional): The maximum velocity to display. Defaults to 20.</span>
<span class="sd">            display_options (dict, optional): The display options for the velocity layer. Defaults to {}. See https://bit.ly/3uf8t6w.</span>
<span class="sd">            name (str, optional): Layer name to use . Defaults to &#39;Velocity&#39;.</span>

<span class="sd">        Raises:</span>
<span class="sd">            ImportError: If the xarray package is not installed.</span>
<span class="sd">            ValueError: If the data is not a NetCDF file or an xarray Dataset.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
            <span class="kn">from</span> <span class="nn">ipyleaflet.velocity</span> <span class="kn">import</span> <span class="n">Velocity</span>
        <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
                <span class="s2">&quot;The xarray package is required to add a velocity layer. &quot;</span>
                <span class="s2">&quot;Please install it with `pip install xarray`.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">data</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a file path or xarray dataset.&quot;</span><span class="p">)</span>

        <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

        <span class="c1"># Rasterio does not handle time or levels. So we must drop them</span>
        <span class="k">if</span> <span class="s2">&quot;time&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time_index</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">level_dimension</span><span class="p">:</span> <span class="n">level_index</span><span class="p">}</span>
        <span class="k">if</span> <span class="n">level_dimension</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
            <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

        <span class="n">wind</span> <span class="o">=</span> <span class="n">Velocity</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span>
            <span class="n">zonal_speed</span><span class="o">=</span><span class="n">zonal_speed</span><span class="p">,</span>
            <span class="n">meridional_speed</span><span class="o">=</span><span class="n">meridional_speed</span><span class="p">,</span>
            <span class="n">latitude_dimension</span><span class="o">=</span><span class="n">latitude_dimension</span><span class="p">,</span>
            <span class="n">longitude_dimension</span><span class="o">=</span><span class="n">longitude_dimension</span><span class="p">,</span>
            <span class="n">velocity_scale</span><span class="o">=</span><span class="n">velocity_scale</span><span class="p">,</span>
            <span class="n">max_velocity</span><span class="o">=</span><span class="n">max_velocity</span><span class="p">,</span>
            <span class="n">display_options</span><span class="o">=</span><span class="n">display_options</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wind</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_data</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">column</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">legend_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add vector data to the map with a variety of classification schemes.</span>

<span class="sd">        Args:</span>
<span class="sd">            data (str | pd.DataFrame | gpd.GeoDataFrame): The data to classify. It can be a filepath to a vector dataset, a pandas dataframe, or a geopandas geodataframe.</span>
<span class="sd">            column (str): The column to classify.</span>
<span class="sd">            cmap (str, optional): The name of a colormap recognized by matplotlib. Defaults to None.</span>
<span class="sd">            colors (list, optional): A list of colors to use for the classification. Defaults to None.</span>
<span class="sd">            labels (list, optional): A list of labels to use for the legend. Defaults to None.</span>
<span class="sd">            scheme (str, optional): Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">                Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">                A mapclassify.MapClassifier object will be used</span>
<span class="sd">                under the hood. Supported are all schemes provided by mapclassify (e.g.</span>
<span class="sd">                &#39;BoxPlot&#39;, &#39;EqualInterval&#39;, &#39;FisherJenks&#39;, &#39;FisherJenksSampled&#39;,</span>
<span class="sd">                &#39;HeadTailBreaks&#39;, &#39;JenksCaspall&#39;, &#39;JenksCaspallForced&#39;,</span>
<span class="sd">                &#39;JenksCaspallSampled&#39;, &#39;MaxP&#39;, &#39;MaximumBreaks&#39;,</span>
<span class="sd">                &#39;NaturalBreaks&#39;, &#39;Quantiles&#39;, &#39;Percentiles&#39;, &#39;StdMean&#39;,</span>
<span class="sd">                &#39;UserDefined&#39;). Arguments can be passed in classification_kwds.</span>
<span class="sd">            k (int, optional): Number of classes (ignored if scheme is None or if column is categorical). Default to 5.</span>
<span class="sd">            legend_kwds (dict, optional): Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or `matplotlib.pyplot.colorbar`. Defaults to None.</span>
<span class="sd">                Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or</span>
<span class="sd">                Additional accepted keywords when `scheme` is specified:</span>
<span class="sd">                fmt : string</span>
<span class="sd">                    A formatting specification for the bin edges of the classes in the</span>
<span class="sd">                    legend. For example, to have no decimals: ``{&quot;fmt&quot;: &quot;{:.0f}&quot;}``.</span>
<span class="sd">                labels : list-like</span>
<span class="sd">                    A list of legend labels to override the auto-generated labblels.</span>
<span class="sd">                    Needs to have the same number of elements as the number of</span>
<span class="sd">                    classes (`k`).</span>
<span class="sd">                interval : boolean (default False)</span>
<span class="sd">                    An option to control brackets from mapclassify legend.</span>
<span class="sd">                    If True, open/closed interval brackets are shown in the legend.</span>
<span class="sd">            classification_kwds (dict, optional): Keyword arguments to pass to mapclassify. Defaults to None.</span>
<span class="sd">            layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">            style (dict, optional): A dictionary specifying the style to be used. Defaults to None.</span>
<span class="sd">                style is a dictionary of the following form:</span>
<span class="sd">                    style = {</span>
<span class="sd">                    &quot;stroke&quot;: False,</span>
<span class="sd">                    &quot;color&quot;: &quot;#ff0000&quot;,</span>
<span class="sd">                    &quot;weight&quot;: 1,</span>
<span class="sd">                    &quot;opacity&quot;: 1,</span>
<span class="sd">                    &quot;fill&quot;: True,</span>
<span class="sd">                    &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
<span class="sd">                    &quot;fillOpacity&quot;: 1.0,</span>
<span class="sd">                    &quot;dashArray&quot;: &quot;9&quot;</span>
<span class="sd">                    &quot;clickable&quot;: True,</span>
<span class="sd">                }</span>
<span class="sd">            hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">                hover_style is a dictionary of the following form:</span>
<span class="sd">                    hover_style = {&quot;weight&quot;: style[&quot;weight&quot;] + 1, &quot;fillOpacity&quot;: 0.5}</span>
<span class="sd">            style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">                style_callback is a function that takes the feature as argument and should return a dictionary of the following form:</span>
<span class="sd">                style_callback = lambda feat: {&quot;fillColor&quot;: feat[&quot;properties&quot;][&quot;color&quot;]}</span>
<span class="sd">            info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">            encoding (str, optional): The encoding of the GeoJSON file. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">gdf</span><span class="p">,</span> <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">classify</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
            <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
            <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
            <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
            <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">,</span>
            <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
            <span class="n">legend_kwds</span><span class="o">=</span><span class="n">legend_kwds</span><span class="p">,</span>
            <span class="n">classification_kwds</span><span class="o">=</span><span class="n">classification_kwds</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">legend_title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">legend_title</span> <span class="o">=</span> <span class="n">column</span>

        <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
                <span class="c1"># &quot;stroke&quot;: False,</span>
                <span class="c1"># &quot;color&quot;: &quot;#ff0000&quot;,</span>
                <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
                <span class="c1"># &quot;fill&quot;: True,</span>
                <span class="c1"># &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
                <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
                <span class="c1"># &quot;dashArray&quot;: &quot;9&quot;</span>
                <span class="c1"># &quot;clickable&quot;: True,</span>
            <span class="p">}</span>
            <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">style</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#000000&quot;</span>

        <span class="k">if</span> <span class="n">hover_style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">hover_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>

        <span class="k">if</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style_callback</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">feat</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">feat</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]}</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
            <span class="n">gdf</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
            <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">legend_title</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">user_roi_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Return the bounding box of the ROI as a list of coordinates.</span>

<span class="sd">        Args:</span>
<span class="sd">            decimals (int, optional): Number of decimals to round the coordinates to. Defaults to 4.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="n">bbox_coords</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_widget</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">content</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;gear&quot;</span><span class="p">,</span>
        <span class="n">close_button_icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
        <span class="n">widget_args</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">close_button_args</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">display_widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a widget (e.g., text, HTML, figure) to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            content (str | ipywidgets.Widget | object): The widget to add.</span>
<span class="sd">            position (str, optional): The position of the widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">            add_header (bool, optional): Whether to add a header with close buttons to the widget. Defaults to False.</span>
<span class="sd">            opened (bool, optional): Whether to open the toolbar. Defaults to True.</span>
<span class="sd">            show_close_button (bool, optional): Whether to show the close button. Defaults to True.</span>
<span class="sd">            widget_icon (str, optional): The icon name for the toolbar button. Defaults to &#39;gear&#39;.</span>
<span class="sd">            close_button_icon (str, optional): The icon name for the close button. Defaults to &quot;times&quot;.</span>
<span class="sd">            widget_args (dict, optional): Additional arguments to pass to the toolbar button. Defaults to {}.</span>
<span class="sd">            close_button_args (dict, optional): Additional arguments to pass to the close button. Defaults to {}.</span>
<span class="sd">            display_widget (ipywidgets.Widget, optional): The widget to be displayed when the toolbar is clicked.</span>
<span class="sd">            **kwargs: Additional arguments to pass to the HTML or Output widgets</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;topleft&quot;</span><span class="p">,</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="s2">&quot;bottomleft&quot;</span><span class="p">,</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;position must be one of </span><span class="si">{</span><span class="n">allowed_positions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="n">content</span>

                <span class="n">widget_template</span><span class="p">(</span>
                    <span class="n">widget</span><span class="p">,</span>
                    <span class="n">opened</span><span class="p">,</span>
                    <span class="n">show_close_button</span><span class="p">,</span>
                    <span class="n">widget_icon</span><span class="p">,</span>
                    <span class="n">close_button_icon</span><span class="p">,</span>
                    <span class="n">widget_args</span><span class="p">,</span>
                    <span class="n">close_button_args</span><span class="p">,</span>
                    <span class="n">display_widget</span><span class="p">,</span>
                    <span class="bp">self</span><span class="p">,</span>
                    <span class="n">position</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                    <span class="k">with</span> <span class="n">widget</span><span class="p">:</span>
                        <span class="n">display</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error adding widget: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            image (str | ipywidgets.Image): The image to add.</span>
<span class="sd">            position (str, optional): The position of the image, can be one of &quot;topleft&quot;,</span>
<span class="sd">                &quot;topright&quot;, &quot;bottomleft&quot;, &quot;bottomright&quot;. Defaults to &quot;bottomright&quot;.</span>

<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">image</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid image&quot;</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add HTML to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            html (str): The HTML to add.</span>
<span class="sd">            position (str, optional): The position of the HTML, can be one of &quot;topleft&quot;,</span>
<span class="sd">                &quot;topright&quot;, &quot;bottomleft&quot;, &quot;bottomright&quot;. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">text</span><span class="p">,</span>
        <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
        <span class="n">fontcolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">background</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">bg_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="n">border_radius</span><span class="o">=</span><span class="s2">&quot;5px&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add text to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            text (str): The text to add.</span>
<span class="sd">            fontsize (int, optional): The font size. Defaults to 20.</span>
<span class="sd">            fontcolor (str, optional): The font color. Defaults to &quot;black&quot;.</span>
<span class="sd">            bold (bool, optional): Whether to use bold font. Defaults to False.</span>
<span class="sd">            padding (str, optional): The padding. Defaults to &quot;5px&quot;.</span>
<span class="sd">            background (bool, optional): Whether to use background. Defaults to True.</span>
<span class="sd">            bg_color (str, optional): The background color. Defaults to &quot;white&quot;.</span>
<span class="sd">            border_radius (str, optional): The border radius. Defaults to &quot;5px&quot;.</span>
<span class="sd">            position (str, optional): The position of the widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">background</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">; font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">            padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">            border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&gt;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&lt;/div&gt;&quot;&quot;&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">; font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">            padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;&quot;&gt;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&lt;/div&gt;&quot;&quot;&quot;</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">to_gradio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;500px&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Converts the map to an HTML string that can be used in Gradio. Removes unsupported elements, such as</span>
<span class="sd">            attribution and any code blocks containing functions. See https://github.com/gradio-app/gradio/issues/3190</span>

<span class="sd">        Args:</span>
<span class="sd">            width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">            height (str, optional): The height of the map. Defaults to &#39;500px&#39;.</span>

<span class="sd">        Returns:</span>
<span class="sd">            str: The HTML string to use in Gradio.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The ipyleaflet plotting backend does not support this function. Please use the folium backend instead.&quot;</span>
        <span class="p">)</span>

    <span class="k">def</span> <span class="nf">add_search_control</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
        <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
        <span class="n">property_name</span><span class="o">=</span><span class="s2">&quot;display_name&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span><span class="p">,</span>
    <span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Add a search control to the map.</span>

<span class="sd">        Args:</span>
<span class="sd">            marker (ipyleaflet.Marker, optional): The marker to use. Defaults to None.</span>
<span class="sd">            url (str, optional): The URL to use for the search. Defaults to None.</span>
<span class="sd">            zoom (int, optional): The zoom level to use. Defaults to 5.</span>
<span class="sd">            property_name (str, optional): The property name to use. Defaults to &quot;display_name&quot;.</span>
<span class="sd">            position (str, optional): The position of the widget. Defaults to &quot;topleft&quot;.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                <span class="n">icon</span><span class="o">=</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">marker_color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">icon_color</span><span class="o">=</span><span class="s2">&quot;darkgreen&quot;</span>
                <span class="p">)</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://nominatim.openstreetmap.org/search?format=json&amp;q=</span><span class="si">{s}</span><span class="s2">&quot;</span>
        <span class="n">search</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SearchControl</span><span class="p">(</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span>
            <span class="n">property_name</span><span class="o">=</span><span class="n">property_name</span><span class="p">,</span>
            <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">search</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">layer_to_image</span><span class="p">(</span>
        <span class="bp">self</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
        <span class="n">output</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">crs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
        <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">region</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
    <span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Converts a specific layer from Earth Engine to an image file.</span>

<span class="sd">        Args:</span>
<span class="sd">            layer_name (str): The name of the layer to convert.</span>
<span class="sd">            output (str): The output file path for the image. Defaults to None.</span>
<span class="sd">            crs (str, optional): The coordinate reference system (CRS) of the output image. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">            scale (int, optional): The scale of the output image. Defaults to None.</span>
<span class="sd">            region (ee.Geometry, optional): The region of interest for the conversion. Defaults to None.</span>
<span class="sd">            vis_params (dict, optional): The visualization parameters. Defaults to None.</span>
<span class="sd">            **kwargs: Additional keyword arguments to pass to the `download_ee_image` function.</span>

<span class="sd">        Returns:</span>
<span class="sd">            None</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
            <span class="n">west</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">north</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
            <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span><span class="n">west</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">north</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">scale</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_scale</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">output</span> <span class="o">=</span> <span class="n">layer_name</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>

        <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;ee_object&quot;</span><span class="p">]</span>

        <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">vis_params</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;vis_params&quot;</span><span class="p">]</span>

        <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">vis_params</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
            <span class="n">geotiff</span> <span class="o">=</span> <span class="n">output</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">geotiff</span> <span class="o">=</span> <span class="n">output</span>
        <span class="n">download_ee_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">geotiff</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
            <span class="n">geotiff_to_image</span><span class="p">(</span><span class="n">geotiff</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">geotiff</span><span class="p">)</span>
</code></pre></div>
        </details>



  <div class="doc doc-children">






  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.draw_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_control</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.draw_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the draw control.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The draw control.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.draw_control_lite" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_control_lite</span><span class="p">:</span> <span class="n">Any</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.draw_control_lite" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the lite version of the draw control.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Any</code></td>
      <td><p>The lite draw control.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.draw_features" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_features</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.draw_features" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the drawn features.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[Any]</code></td>
      <td><p>The list of drawn features.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.draw_last_feature" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_last_feature</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.draw_last_feature" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the last drawn feature.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Any]</code></td>
      <td><p>The last drawn feature.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.draw_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_layer</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.draw_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the draw layer.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Any]</code></td>
      <td><p>The draw layer.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_layer_dict" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_layer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_layer_dict" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the dictionary of EE layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The dictionary of EE layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_layer_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_layer_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_layer_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the names of the EE layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The names of the EE layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_raster_layer_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_raster_layer_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_raster_layer_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the names of the EE raster layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The names of the EE raster layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_raster_layers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_raster_layers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_raster_layers" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the dictionary of EE raster layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The dictionary of EE raster layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_vector_layer_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_vector_layer_names</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_vector_layer_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the names of the EE vector layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>The names of the EE vector layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.ee_vector_layers" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_vector_layers</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.ee_vector_layers" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the dictionary of EE vector layers.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Dict[str, Any]</code></td>
      <td><p>The dictionary of EE vector layers.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.user_roi" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_roi</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.user_roi" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the user region of interest.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Any]</code></td>
      <td><p>The user region of interest.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>



  <div class="doc doc-object doc-attribute">



<h3 id="geemap.geemap.Map.user_rois" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_rois</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Any</span><span class="p">]</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-property"><code>property</code></small>
      <small class="doc doc-property doc-property-readonly"><code>readonly</code></small>
  </span>

<a href="#geemap.geemap.Map.user_rois" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets the user regions of interest.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[Any]</code></td>
      <td><p>The user regions of interest.</p></td>
    </tr>
  </tbody>
</table>    </div>

  </div>






  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.__init__" class="doc doc-heading">
<code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

  <span class="doc doc-properties">
      <small class="doc doc-property doc-property-special"><code>special</code></small>
  </span>

<a href="#geemap.geemap.Map.__init__" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Initialize a map object. The following additional parameters can be
    passed in addition to the ipyleaflet.Map parameters:</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_initialize</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not to initialize ee. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>center</code></td>
        <td><code>list</code></td>
        <td><p>Center of the map (lat, lon). Defaults to [20, 0].</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>Zoom level of the map. Defaults to 2.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>Height of the map. Defaults to "600px".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>Width of the map. Defaults to "100%".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>basemap</code></td>
        <td><code>str</code></td>
        <td><p>Name of the basemap to add to the map.
Defaults to "ROADMAP". Other options include "ROADMAP", "SATELLITE", "TERRAIN".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>add_google_map</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add Google Maps to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>sandbox_path</code></td>
        <td><code>str</code></td>
        <td><p>The path to a sandbox folder for voila web app. Defaults to None.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lite_mode</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to enable lite mode, which only displays
zoom control on the map. Defaults to False.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>data_ctrl</code></td>
        <td><code>bool</code></td>
        <td></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the zoom control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fullscreen_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the fullscreen control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>search_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the search control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>draw_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the draw control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scale_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the scale control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>measure_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the measure control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>toolbar_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the toolbar control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the layer control to the map. Defaults to False.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>attribution_ctrl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the attribution control to the map. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional keyword arguments for ipyleaflet.Map.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Initialize a map object. The following additional parameters can be</span>
<span class="sd">        passed in addition to the ipyleaflet.Map parameters:</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_initialize (bool, optional): Whether or not to initialize ee. Defaults to True.</span>
<span class="sd">        center (list, optional): Center of the map (lat, lon). Defaults to [20, 0].</span>
<span class="sd">        zoom (int, optional): Zoom level of the map. Defaults to 2.</span>
<span class="sd">        height (str, optional): Height of the map. Defaults to &quot;600px&quot;.</span>
<span class="sd">        width (str, optional): Width of the map. Defaults to &quot;100%&quot;.</span>
<span class="sd">        basemap (str, optional): Name of the basemap to add to the map.</span>
<span class="sd">            Defaults to &quot;ROADMAP&quot;. Other options include &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;TERRAIN&quot;.</span>
<span class="sd">        add_google_map (bool, optional): Whether to add Google Maps to the map. Defaults to True.</span>
<span class="sd">        sandbox_path (str, optional): The path to a sandbox folder for voila web app. Defaults to None.</span>
<span class="sd">        lite_mode (bool, optional): Whether to enable lite mode, which only displays</span>
<span class="sd">            zoom control on the map. Defaults to False.</span>
<span class="sd">        data_ctrl (bool, optional): Deprecated: use search_ctrl instead.</span>
<span class="sd">        zoom_ctrl (bool, optional): Whether to add the zoom control to the map. Defaults to True.</span>
<span class="sd">        fullscreen_ctrl (bool, optional): Whether to add the fullscreen control to the map. Defaults to True.</span>
<span class="sd">        search_ctrl (bool, optional): Whether to add the search control to the map. Defaults to True.</span>
<span class="sd">        draw_ctrl (bool, optional): Whether to add the draw control to the map. Defaults to True.</span>
<span class="sd">        scale_ctrl (bool, optional): Whether to add the scale control to the map. Defaults to True.</span>
<span class="sd">        measure_ctrl (bool, optional): Whether to add the measure control to the map. Defaults to True.</span>
<span class="sd">        toolbar_ctrl (bool, optional): Whether to add the toolbar control to the map. Defaults to True.</span>
<span class="sd">        layer_ctrl (bool, optional): Whether to add the layer control to the map. Defaults to False.</span>
<span class="sd">        attribution_ctrl (bool, optional): Whether to add the attribution control to the map. Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments for ipyleaflet.Map.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;height&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;width&quot;</span><span class="p">),</span> <span class="nb">int</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">24</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_xyz_dict</span> <span class="o">=</span> <span class="n">get_xyz_dict</span><span class="p">()</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">baseclass</span> <span class="o">=</span> <span class="s2">&quot;ipyleaflet&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_USER_AGENT_PREFIX</span> <span class="o">=</span> <span class="s2">&quot;geemap&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">kwargs</span> <span class="o">=</span> <span class="n">kwargs</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_var_name</span> <span class="o">=</span> <span class="s2">&quot;Map&quot;</span>  <span class="c1"># The Map variable name for converting JS to Python</span>

    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;height&quot;</span><span class="p">)</span>

    <span class="c1"># sandbox path for Voila app to restrict access to system directories.</span>
    <span class="k">if</span> <span class="s2">&quot;sandbox_path&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sandbox_path&quot;</span><span class="p">])):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;sandbox_path&quot;</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The sandbox path is invalid.&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">sandbox_path</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="c1"># Add Google Maps as the default basemap</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;add_google_map&quot;</span><span class="p">,</span> <span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_basemap</span><span class="p">(</span><span class="s2">&quot;ROADMAP&quot;</span><span class="p">)</span>

    <span class="c1"># ipyleaflet built-in layer control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="s2">&quot;ee_initialize&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ee_initialize&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># Default reducer to use</span>
    <span class="k">if</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;ee_initialize&quot;</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">roi_reducer</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Reducer</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">roi_reducer_scale</span> <span class="o">=</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a layer or control to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>obj</code></td>
        <td><code>Union[str, Any]</code></td>
        <td><p>The layer or control to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the control on the map. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">obj</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a layer or control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        obj (Union[str, Any]): The layer or control to add to the map.</span>
<span class="sd">        position (str, optional): The position of the control on the map. Defaults to &quot;topright&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">basemap</span> <span class="o">=</span> <span class="n">check_basemap</span><span class="p">(</span><span class="n">obj</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">get_basemap</span><span class="p">(</span><span class="n">basemap</span><span class="p">))</span>
            <span class="k">return</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">obj</span> <span class="o">=</span> <span class="n">obj</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>

    <span class="n">backward_compatibilities</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;zoom_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;zoom_control&quot;</span><span class="p">,</span>
        <span class="s2">&quot;fullscreen_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;fullscreen_control&quot;</span><span class="p">,</span>
        <span class="s2">&quot;scale_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;scale_control&quot;</span><span class="p">,</span>
        <span class="s2">&quot;toolbar_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;toolbar&quot;</span><span class="p">,</span>
        <span class="s2">&quot;draw_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;draw_control&quot;</span><span class="p">,</span>
        <span class="s2">&quot;data_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;search_control&quot;</span><span class="p">,</span>
        <span class="s2">&quot;search_ctrl&quot;</span><span class="p">:</span> <span class="s2">&quot;search_control&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="n">obj</span> <span class="o">=</span> <span class="n">backward_compatibilities</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">obj</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;measure_ctrl&quot;</span><span class="p">:</span>
        <span class="n">measure</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MeasureControl</span><span class="p">(</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">active_color</span><span class="o">=</span><span class="s2">&quot;orange&quot;</span><span class="p">,</span>
            <span class="n">primary_length_unit</span><span class="o">=</span><span class="s2">&quot;kilometers&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">measure</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">obj</span> <span class="o">==</span> <span class="s2">&quot;layer_ctrl&quot;</span><span class="p">:</span>
        <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.addLayer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addLayer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.addLayer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a given EE object to the map as a layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>Union[ee.FeatureCollection, ee.Feature, ee.Image, ee.ImageCollection]</code></td>
        <td><p>The object to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The visualization parameters.
Defaults to {}.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the layer. Defaults to 'Layer N'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by
default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The layer's opacity represented as a number
between 0 and 1. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span>
    <span class="p">],</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">shown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Union[ee.FeatureCollection, ee.Feature, ee.Image, ee.ImageCollection]):</span>
<span class="sd">            The object to add to the map.</span>
<span class="sd">        vis_params (Optional[Dict[str, Any]], optional): The visualization parameters.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        name (Optional[str], optional): The name of the layer. Defaults to &#39;Layer N&#39;.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer&#39;s opacity represented as a number</span>
<span class="sd">            between 0 and 1. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">has_plot_dropdown</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_dropdown_widget&quot;</span><span class="p">)</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">)</span>

    <span class="n">ee_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">ee_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_layer</span><span class="p">[</span><span class="s2">&quot;ee_object&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="n">tile_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tile_layer</span><span class="p">:</span>
        <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.addLayerControl" class="doc doc-heading">
<code class="highlight language-python"><span class="n">addLayerControl</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.addLayerControl" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a layer control to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the layer control on the map.
Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a layer control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the layer control on the map.</span>
<span class="sd">            Defaults to &quot;topright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_basemap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_basemap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">basemap</span><span class="o">=</span><span class="s1">&#39;ROADMAP&#39;</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_basemap" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a basemap to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>basemap</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>Can be one of the strings from basemaps.
Defaults to 'ROADMAP'.</p></td>
        <td><code>&#39;ROADMAP&#39;</code></td>
      </tr>
      <tr>
        <td><code>show</code></td>
        <td><code>Optional[bool]</code></td>
        <td><p>Whether the basemap is visible or not.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments for the TileLayer.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">basemap</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;ROADMAP&quot;</span><span class="p">,</span>
    <span class="n">show</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">bool</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        basemap (Optional[str], optional): Can be one of the strings from basemaps.</span>
<span class="sd">            Defaults to &#39;ROADMAP&#39;.</span>
<span class="sd">        show (Optional[bool], optional): Whether the basemap is visible or not.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments for the TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">xyzservices</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">layer_names</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">get_layer_names</span><span class="p">()</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">for</span> <span class="n">map_name</span><span class="p">,</span> <span class="n">tile_provider</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">_available_basemaps</span><span class="o">.</span><span class="n">items</span><span class="p">():</span>
                <span class="k">if</span> <span class="n">basemap</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="n">map_name</span><span class="o">.</span><span class="n">upper</span><span class="p">():</span>
                    <span class="n">basemap</span> <span class="o">=</span> <span class="n">tile_provider</span>
                    <span class="k">break</span>

        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">basemap</span><span class="p">,</span> <span class="n">xyzservices</span><span class="o">.</span><span class="n">TileProvider</span><span class="p">):</span>
            <span class="n">name</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">name</span>
            <span class="n">url</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="n">basemap</span><span class="o">.</span><span class="n">attribution</span>
            <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">in</span> <span class="n">basemap</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">max_zoom</span> <span class="o">=</span> <span class="mi">30</span>
            <span class="n">layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
                <span class="n">max_zoom</span><span class="o">=</span><span class="n">max_zoom</span><span class="p">,</span>
                <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
                <span class="n">visible</span><span class="o">=</span><span class="n">show</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
            <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span> <span class="ow">and</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">basemap</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">show</span>
            <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">basemap</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">basemap</span> <span class="ow">in</span> <span class="n">basemaps</span> <span class="ow">and</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">basemap</span><span class="p">]</span><span class="o">.</span><span class="n">name</span> <span class="ow">in</span> <span class="n">layer_names</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">basemap</span><span class="si">}</span><span class="s2"> has been already added before.&quot;</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">basemap</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">basemap</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="n">show</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span>
                <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                    <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
                <span class="p">)</span>
            <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Basemap can only be one of the following:</span><span class="se">\n</span><span class="s2">  </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">  &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
            <span class="p">)</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_basemap_widget" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_basemap_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_basemap_widget" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add the Basemap GUI to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the Basemap GUI. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_basemap_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add the Basemap GUI to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the Basemap GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_basemap_selector</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_census_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_census_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wms</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">census_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_census_data" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a census data layer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>wms</code></td>
        <td><code>str</code></td>
        <td><p>The wms to use. For example, "Current", "ACS 2021", "Census 2020".  See the complete list at https://tigerweb.geo.census.gov/tigerwebmain/TIGERweb_wms.html</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>census_dict</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary containing census data. Defaults to None. It can be obtained from the get_census_dict() function.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_census_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">wms</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="n">census_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a census data layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        wms (str): The wms to use. For example, &quot;Current&quot;, &quot;ACS 2021&quot;, &quot;Census 2020&quot;.  See the complete list at https://tigerweb.geo.census.gov/tigerwebmain/TIGERweb_wms.html</span>
<span class="sd">        layer (str): The layer name to add to the map.</span>
<span class="sd">        census_dict (dict, optional): A dictionary containing census data. Defaults to None. It can be obtained from the get_census_dict() function.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">census_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">census_dict</span> <span class="o">=</span> <span class="n">get_census_dict</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">wms</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">census_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The provided WMS is invalid. It must be one of </span><span class="si">{</span><span class="n">census_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">layers</span> <span class="o">=</span> <span class="n">census_dict</span><span class="p">[</span><span class="n">wms</span><span class="p">][</span><span class="s2">&quot;layers&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">layer</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The layer name is not valid. It must be one of </span><span class="si">{</span><span class="n">layers</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

        <span class="n">url</span> <span class="o">=</span> <span class="n">census_dict</span><span class="p">[</span><span class="n">wms</span><span class="p">][</span><span class="s2">&quot;url&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="s2">&quot;name&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">layer</span>
        <span class="k">if</span> <span class="s2">&quot;attribution&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;U.S. Census Bureau&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;format&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;image/png&quot;</span>
        <span class="k">if</span> <span class="s2">&quot;transparent&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;transparent&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add_wms_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">layer</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_circle_markers_from_xy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_circle_markers_from_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_circle_markers_from_xy" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a marker cluster to the map. For a list of options, see https://ipyleaflet.readthedocs.io/en/latest/api_reference/circle_marker.html</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFrame</code></td>
        <td><p>A csv or Pandas DataFrame containing x, y, z values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the x values. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the y values. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>radius</code></td>
        <td><code>int</code></td>
        <td><p>The radius of the circle. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>popup</code></td>
        <td><code>list</code></td>
        <td><p>A list of column names to be used as the popup. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_circle_markers_from_xy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map. For a list of options, see https://ipyleaflet.readthedocs.io/en/latest/api_reference/circle_marker.html</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame): A csv or Pandas DataFrame containing x, y, z values.</span>
<span class="sd">        x (str, optional): The column name for the x values. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The column name for the y values. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        radius (int, optional): The radius of the circle. Defaults to 10.</span>
<span class="sd">        popup (list, optional): A list of column names to be used as the popup. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">col_names</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="p">[</span><span class="n">popup</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">itertuples</span><span class="p">():</span>
        <span class="n">html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
        <span class="k">for</span> <span class="n">p</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
            <span class="n">html</span> <span class="o">=</span> <span class="n">html</span> <span class="o">+</span> <span class="s2">&quot;&lt;b&gt;&quot;</span> <span class="o">+</span> <span class="n">p</span> <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">p</span><span class="p">))</span> <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
        <span class="n">popup_html</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">html</span><span class="p">)</span>

        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">CircleMarker</span><span class="p">(</span>
            <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">y</span><span class="p">),</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">row</span><span class="p">,</span> <span class="n">x</span><span class="p">)],</span>
            <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span>
            <span class="n">popup</span><span class="o">=</span><span class="n">popup_html</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_cog_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_cog_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_cog_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a COG TileLayer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the COG tile layer.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use for the layer. Defaults to 'Untitled'.</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of bands to use for the layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint. Defaults to "https://titiler.xyz".</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Arbitrary keyword arguments, including bidx, expression, nodata, unscale, resampling, rescale, color_formula, colormap, colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/ and https://cogeotiff.github.io/rio-tiler/colormap/. To select a certain bands, use bidx=[1, 2, 3]</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_cog_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a COG TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the COG tile layer.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to &#39;Untitled&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        bands (list, optional): A list of bands to use for the layer. Defaults to None.</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint. Defaults to &quot;https://titiler.xyz&quot;.</span>
<span class="sd">        **kwargs: Arbitrary keyword arguments, including bidx, expression, nodata, unscale, resampling, rescale, color_formula, colormap, colormap_name, return_mask. See https://developmentseed.org/titiler/endpoints/cog/ and https://cogeotiff.github.io/rio-tiler/colormap/. To select a certain bands, use bidx=[1, 2, 3]</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">cog_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="s2">&quot;titizer_endpoint&quot;</span><span class="p">:</span> <span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;COG&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div>
        </details>
    </div>

  </div>




  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_colorbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="s1">&#39;gray&#39;</span><span class="p">,</span> <span class="n">discrete</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">orientation</span><span class="o">=</span><span class="s1">&#39;horizontal&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">9</span><span class="p">,</span> <span class="n">axis_off</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_colorbar" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a matplotlib colorbar to the map</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters as a dictionary. See https://developers.google.com/earth-engine/guides/image_visualization for options.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>Matplotlib colormap. Defaults to "gray". See https://matplotlib.org/3.3.4/tutorials/colors/colormaps.html#sphx-glr-tutorials-colors-colormaps-py for options.</p></td>
        <td><code>&#39;gray&#39;</code></td>
      </tr>
      <tr>
        <td><code>discrete</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to create a discrete colorbar. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>Label for the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>orientation</code></td>
        <td><code>str</code></td>
        <td><p>Orientation of the colorbar, such as "vertical" and "horizontal". Defaults to "horizontal".</p></td>
        <td><code>&#39;horizontal&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the colorbar on the map. It can be one of: topleft, topright, bottomleft, and bottomright. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>transparent_bg</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use transparent background. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name associated with the colorbar. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>font_size</code></td>
        <td><code>int</code></td>
        <td><p>Font size for the colorbar. Defaults to 9.</p></td>
        <td><code>9</code></td>
      </tr>
      <tr>
        <td><code>axis_off</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to turn off the axis. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>max_width</code></td>
        <td><code>str</code></td>
        <td><p>Maximum width of the colorbar in pixels. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the vis_params is not a dictionary.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the orientation is not either horizontal or vertical.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the provided min value is not scalar type.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the provided max value is not scalar type.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the provided opacity value is not scalar type.</p></td>
      </tr>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If cmap or palette is not provided.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
    <span class="n">discrete</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">label</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">orientation</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;horizontal&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">transparent_bg</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">font_size</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">9</span><span class="p">,</span>
    <span class="n">axis_off</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a matplotlib colorbar to the map</span>

<span class="sd">    Args:</span>
<span class="sd">        vis_params (dict): Visualization parameters as a dictionary. See https://developers.google.com/earth-engine/guides/image_visualization for options.</span>
<span class="sd">        cmap (str, optional): Matplotlib colormap. Defaults to &quot;gray&quot;. See https://matplotlib.org/3.3.4/tutorials/colors/colormaps.html#sphx-glr-tutorials-colors-colormaps-py for options.</span>
<span class="sd">        discrete (bool, optional): Whether to create a discrete colorbar. Defaults to False.</span>
<span class="sd">        label (str, optional): Label for the colorbar. Defaults to None.</span>
<span class="sd">        orientation (str, optional): Orientation of the colorbar, such as &quot;vertical&quot; and &quot;horizontal&quot;. Defaults to &quot;horizontal&quot;.</span>
<span class="sd">        position (str, optional): Position of the colorbar on the map. It can be one of: topleft, topright, bottomleft, and bottomright. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        transparent_bg (bool, optional): Whether to use transparent background. Defaults to False.</span>
<span class="sd">        layer_name (str, optional): The layer name associated with the colorbar. Defaults to None.</span>
<span class="sd">        font_size (int, optional): Font size for the colorbar. Defaults to 9.</span>
<span class="sd">        axis_off (bool, optional): Whether to turn off the axis. Defaults to False.</span>
<span class="sd">        max_width (str, optional): Maximum width of the colorbar in pixels. Defaults to None.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the vis_params is not a dictionary.</span>
<span class="sd">        ValueError: If the orientation is not either horizontal or vertical.</span>
<span class="sd">        TypeError: If the provided min value is not scalar type.</span>
<span class="sd">        TypeError: If the provided max value is not scalar type.</span>
<span class="sd">        TypeError: If the provided opacity value is not scalar type.</span>
<span class="sd">        TypeError: If cmap or palette is not provided.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">colorbar</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_colorbar</span><span class="p">(</span>
        <span class="n">vis_params</span><span class="p">,</span>
        <span class="n">cmap</span><span class="p">,</span>
        <span class="n">discrete</span><span class="p">,</span>
        <span class="n">label</span><span class="p">,</span>
        <span class="n">orientation</span><span class="p">,</span>
        <span class="n">position</span><span class="p">,</span>
        <span class="n">transparent_bg</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">font_size</span><span class="p">,</span>
        <span class="n">axis_off</span><span class="p">,</span>
        <span class="n">max_width</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="o">=</span> <span class="n">colorbar</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span> <span class="o">=</span> <span class="p">[</span><span class="n">colorbar</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_colorbar_branca" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_colorbar_branca</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">colors</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">categorical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;45px&#39;</span><span class="p">,</span> <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_colorbar_branca" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a branca colorbar to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>The set of colors to be used for interpolation. Colors can be provided in the form: * tuples of RGBA ints between 0 and 255 (e.g: (255, 255, 0) or (255, 255, 0, 255)) * tuples of RGBA floats between 0. and 1. (e.g: (1.,1.,0.) or (1., 1., 0., 1.)) * HTML-like string (e.g: #ffff00) * a color name or shortcut (e.g: y or yellow)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>int</code></td>
        <td><p>The minimal value for the colormap. Values lower than vmin will be bound directly to colors[0].. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximal value for the colormap. Values higher than vmax will be bound directly to colors[-1]. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>index</code></td>
        <td><code>list</code></td>
        <td><p>The values corresponding to each color. It has to be sorted, and have the same length as colors. If None, a regular grid between vmin and vmax is created.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>caption</code></td>
        <td><code>str</code></td>
        <td><p>The caption for the colormap. Defaults to "".</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>categorical</code></td>
        <td><code>bool</code></td>
        <td><p>Whether or not to create a categorical colormap. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>step</code></td>
        <td><code>int</code></td>
        <td><p>The step to split the LinearColormap into a StepColormap. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the colormap widget. Defaults to "45px".</p></td>
        <td><code>&#39;45px&#39;</code></td>
      </tr>
      <tr>
        <td><code>transparent_bg</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use transparent background for the colormap widget. Defaults to True.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position for the colormap widget. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>Layer name of the colorbar to be associated with. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_colorbar_branca</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">index</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">caption</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">categorical</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">step</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="s2">&quot;45px&quot;</span><span class="p">,</span>
    <span class="n">transparent_bg</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a branca colorbar to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        colors (list): The set of colors to be used for interpolation. Colors can be provided in the form: * tuples of RGBA ints between 0 and 255 (e.g: (255, 255, 0) or (255, 255, 0, 255)) * tuples of RGBA floats between 0. and 1. (e.g: (1.,1.,0.) or (1., 1., 0., 1.)) * HTML-like string (e.g: #ffff00) * a color name or shortcut (e.g: y or yellow)</span>
<span class="sd">        vmin (int, optional): The minimal value for the colormap. Values lower than vmin will be bound directly to colors[0].. Defaults to 0.</span>
<span class="sd">        vmax (float, optional): The maximal value for the colormap. Values higher than vmax will be bound directly to colors[-1]. Defaults to 1.0.</span>
<span class="sd">        index (list, optional):The values corresponding to each color. It has to be sorted, and have the same length as colors. If None, a regular grid between vmin and vmax is created.. Defaults to None.</span>
<span class="sd">        caption (str, optional): The caption for the colormap. Defaults to &quot;&quot;.</span>
<span class="sd">        categorical (bool, optional): Whether or not to create a categorical colormap. Defaults to False.</span>
<span class="sd">        step (int, optional): The step to split the LinearColormap into a StepColormap. Defaults to None.</span>
<span class="sd">        height (str, optional): The height of the colormap widget. Defaults to &quot;45px&quot;.</span>
<span class="sd">        transparent_bg (bool, optional): Whether to use transparent background for the colormap widget. Defaults to True.</span>
<span class="sd">        position (str, optional): The position for the colormap widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        layer_name (str, optional): Layer name of the colorbar to be associated with. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">branca.colormap</span> <span class="kn">import</span> <span class="n">LinearColormap</span>

    <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
    <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

    <span class="k">if</span> <span class="s2">&quot;width&quot;</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;width&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">colors</span><span class="p">,</span> <span class="n">Box</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">colors</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">colors</span><span class="p">[</span><span class="s2">&quot;default&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided color list is invalid.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">all</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">color</span><span class="p">)</span> <span class="o">==</span> <span class="mi">6</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">):</span>
        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;#&quot;</span> <span class="o">+</span> <span class="n">color</span> <span class="k">for</span> <span class="n">color</span> <span class="ow">in</span> <span class="n">colors</span><span class="p">]</span>

    <span class="n">colormap</span> <span class="o">=</span> <span class="n">LinearColormap</span><span class="p">(</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="n">index</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span> <span class="n">caption</span><span class="o">=</span><span class="n">caption</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">categorical</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="n">step</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">index</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">colormap</span> <span class="o">=</span> <span class="n">colormap</span><span class="o">.</span><span class="n">to_step</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span>

    <span class="n">colormap_ctrl</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">output</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">transparent_bg</span><span class="o">=</span><span class="n">transparent_bg</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
        <span class="n">output</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
        <span class="n">display</span><span class="p">(</span><span class="n">colormap</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">colormap_ctrl</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span> <span class="o">=</span> <span class="p">[</span><span class="n">colormap_ctrl</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">colormap_ctrl</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">layer_name</span><span class="p">][</span><span class="s2">&quot;colorbar&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">colormap_ctrl</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_controls" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_controls</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">controls</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topleft&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_controls" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a list of controls to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>controls</code></td>
        <td><code>Union[List[Any], Any]</code></td>
        <td><p>A list of controls or a single
control to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the controls on the map.
Defaults to "topleft".</p></td>
        <td><code>&#39;topleft&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_controls</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">controls</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Any</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a list of controls to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        controls (Union[List[Any], Any]): A list of controls or a single</span>
<span class="sd">            control to add to the map.</span>
<span class="sd">        position (str, optional): The position of the controls on the map.</span>
<span class="sd">            Defaults to &quot;topleft&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">controls</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="p">[</span><span class="n">controls</span><span class="p">]</span>
    <span class="k">for</span> <span class="n">control</span> <span class="ow">in</span> <span class="n">controls</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">,</span> <span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">scheme</span><span class="o">=</span><span class="s1">&#39;Quantiles&#39;</span><span class="p">,</span> <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">legend_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">hover_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_data" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add vector data to the map with a variety of classification schemes.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFrame | gpd.GeoDataFrame</code></td>
        <td><p>The data to classify. It can be a filepath to a vector dataset, a pandas dataframe, or a geopandas geodataframe.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The column to classify.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>cmap</code></td>
        <td><code>str</code></td>
        <td><p>The name of a colormap recognized by matplotlib. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of colors to use for the classification. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>A list of labels to use for the legend. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>scheme</code></td>
        <td><code>str</code></td>
        <td><p>Name of a choropleth classification scheme (requires mapclassify).
Name of a choropleth classification scheme (requires mapclassify).
A mapclassify.MapClassifier object will be used
under the hood. Supported are all schemes provided by mapclassify (e.g.
'BoxPlot', 'EqualInterval', 'FisherJenks', 'FisherJenksSampled',
'HeadTailBreaks', 'JenksCaspall', 'JenksCaspallForced',
'JenksCaspallSampled', 'MaxP', 'MaximumBreaks',
'NaturalBreaks', 'Quantiles', 'Percentiles', 'StdMean',
'UserDefined'). Arguments can be passed in classification_kwds.</p></td>
        <td><code>&#39;Quantiles&#39;</code></td>
      </tr>
      <tr>
        <td><code>k</code></td>
        <td><code>int</code></td>
        <td><p>Number of classes (ignored if scheme is None or if column is categorical). Default to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>legend_kwds</code></td>
        <td><code>dict</code></td>
        <td><p>Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code> or <code>matplotlib.pyplot.colorbar</code>. Defaults to None.
Keyword arguments to pass to :func:<code>matplotlib.pyplot.legend</code> or
Additional accepted keywords when <code>scheme</code> is specified:
fmt : string
    A formatting specification for the bin edges of the classes in the
    legend. For example, to have no decimals: <code>{"fmt": "{:.0f}"}</code>.
labels : list-like
    A list of legend labels to override the auto-generated labblels.
    Needs to have the same number of elements as the number of
    classes (<code>k</code>).
interval : boolean (default False)
    An option to control brackets from mapclassify legend.
    If True, open/closed interval brackets are shown in the legend.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>classification_kwds</code></td>
        <td><code>dict</code></td>
        <td><p>Keyword arguments to pass to mapclassify. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to None.
style is a dictionary of the following form:
    style = {
    "stroke": False,
    "color": "#ff0000",
    "weight": 1,
    "opacity": 1,
    "fill": True,
    "fillColor": "#ffffff",
    "fillOpacity": 1.0,
    "dashArray": "9"
    "clickable": True,
}</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.
hover_style is a dictionary of the following form:
    hover_style = {"weight": style["weight"] + 1, "fillOpacity": 0.5}</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.
style_callback is a function that takes the feature as argument and should return a dictionary of the following form:
style_callback = lambda feat: {"fillColor": feat["properties"]["color"]}</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the GeoJSON file. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">cmap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">scheme</span><span class="o">=</span><span class="s2">&quot;Quantiles&quot;</span><span class="p">,</span>
    <span class="n">k</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">legend_title</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">legend_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">classification_kwds</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add vector data to the map with a variety of classification schemes.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame | gpd.GeoDataFrame): The data to classify. It can be a filepath to a vector dataset, a pandas dataframe, or a geopandas geodataframe.</span>
<span class="sd">        column (str): The column to classify.</span>
<span class="sd">        cmap (str, optional): The name of a colormap recognized by matplotlib. Defaults to None.</span>
<span class="sd">        colors (list, optional): A list of colors to use for the classification. Defaults to None.</span>
<span class="sd">        labels (list, optional): A list of labels to use for the legend. Defaults to None.</span>
<span class="sd">        scheme (str, optional): Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            Name of a choropleth classification scheme (requires mapclassify).</span>
<span class="sd">            A mapclassify.MapClassifier object will be used</span>
<span class="sd">            under the hood. Supported are all schemes provided by mapclassify (e.g.</span>
<span class="sd">            &#39;BoxPlot&#39;, &#39;EqualInterval&#39;, &#39;FisherJenks&#39;, &#39;FisherJenksSampled&#39;,</span>
<span class="sd">            &#39;HeadTailBreaks&#39;, &#39;JenksCaspall&#39;, &#39;JenksCaspallForced&#39;,</span>
<span class="sd">            &#39;JenksCaspallSampled&#39;, &#39;MaxP&#39;, &#39;MaximumBreaks&#39;,</span>
<span class="sd">            &#39;NaturalBreaks&#39;, &#39;Quantiles&#39;, &#39;Percentiles&#39;, &#39;StdMean&#39;,</span>
<span class="sd">            &#39;UserDefined&#39;). Arguments can be passed in classification_kwds.</span>
<span class="sd">        k (int, optional): Number of classes (ignored if scheme is None or if column is categorical). Default to 5.</span>
<span class="sd">        legend_kwds (dict, optional): Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or `matplotlib.pyplot.colorbar`. Defaults to None.</span>
<span class="sd">            Keyword arguments to pass to :func:`matplotlib.pyplot.legend` or</span>
<span class="sd">            Additional accepted keywords when `scheme` is specified:</span>
<span class="sd">            fmt : string</span>
<span class="sd">                A formatting specification for the bin edges of the classes in the</span>
<span class="sd">                legend. For example, to have no decimals: ``{&quot;fmt&quot;: &quot;{:.0f}&quot;}``.</span>
<span class="sd">            labels : list-like</span>
<span class="sd">                A list of legend labels to override the auto-generated labblels.</span>
<span class="sd">                Needs to have the same number of elements as the number of</span>
<span class="sd">                classes (`k`).</span>
<span class="sd">            interval : boolean (default False)</span>
<span class="sd">                An option to control brackets from mapclassify legend.</span>
<span class="sd">                If True, open/closed interval brackets are shown in the legend.</span>
<span class="sd">        classification_kwds (dict, optional): Keyword arguments to pass to mapclassify. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to None.</span>
<span class="sd">            style is a dictionary of the following form:</span>
<span class="sd">                style = {</span>
<span class="sd">                &quot;stroke&quot;: False,</span>
<span class="sd">                &quot;color&quot;: &quot;#ff0000&quot;,</span>
<span class="sd">                &quot;weight&quot;: 1,</span>
<span class="sd">                &quot;opacity&quot;: 1,</span>
<span class="sd">                &quot;fill&quot;: True,</span>
<span class="sd">                &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
<span class="sd">                &quot;fillOpacity&quot;: 1.0,</span>
<span class="sd">                &quot;dashArray&quot;: &quot;9&quot;</span>
<span class="sd">                &quot;clickable&quot;: True,</span>
<span class="sd">            }</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">            hover_style is a dictionary of the following form:</span>
<span class="sd">                hover_style = {&quot;weight&quot;: style[&quot;weight&quot;] + 1, &quot;fillOpacity&quot;: 0.5}</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">            style_callback is a function that takes the feature as argument and should return a dictionary of the following form:</span>
<span class="sd">            style_callback = lambda feat: {&quot;fillColor&quot;: feat[&quot;properties&quot;][&quot;color&quot;]}</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of the GeoJSON file. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">gdf</span><span class="p">,</span> <span class="n">legend_dict</span> <span class="o">=</span> <span class="n">classify</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
        <span class="n">column</span><span class="o">=</span><span class="n">column</span><span class="p">,</span>
        <span class="n">cmap</span><span class="o">=</span><span class="n">cmap</span><span class="p">,</span>
        <span class="n">colors</span><span class="o">=</span><span class="n">colors</span><span class="p">,</span>
        <span class="n">labels</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span>
        <span class="n">scheme</span><span class="o">=</span><span class="n">scheme</span><span class="p">,</span>
        <span class="n">k</span><span class="o">=</span><span class="n">k</span><span class="p">,</span>
        <span class="n">legend_kwds</span><span class="o">=</span><span class="n">legend_kwds</span><span class="p">,</span>
        <span class="n">classification_kwds</span><span class="o">=</span><span class="n">classification_kwds</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">legend_title</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">legend_title</span> <span class="o">=</span> <span class="n">column</span>

    <span class="k">if</span> <span class="n">style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># &quot;stroke&quot;: False,</span>
            <span class="c1"># &quot;color&quot;: &quot;#ff0000&quot;,</span>
            <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="c1"># &quot;fill&quot;: True,</span>
            <span class="c1"># &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
            <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">1.0</span><span class="p">,</span>
            <span class="c1"># &quot;dashArray&quot;: &quot;9&quot;</span>
            <span class="c1"># &quot;clickable&quot;: True,</span>
        <span class="p">}</span>
        <span class="k">if</span> <span class="n">colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">style</span><span class="p">[</span><span class="s2">&quot;color&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;#000000&quot;</span>

    <span class="k">if</span> <span class="n">hover_style</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">hover_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style_callback</span> <span class="o">=</span> <span class="k">lambda</span> <span class="n">feat</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">feat</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="s2">&quot;color&quot;</span><span class="p">]}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
        <span class="n">gdf</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span><span class="n">title</span><span class="o">=</span><span class="n">legend_title</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="n">legend_dict</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_draw_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topleft&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_draw_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a draw control to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the draw control. Defaults to "topleft".</p></td>
        <td><code>&#39;topleft&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a draw control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the draw control. Defaults to &quot;topleft&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;draw_control&quot;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_draw_control_lite" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_draw_control_lite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topleft&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_draw_control_lite" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a lite version draw control to the map for the plotting tool.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the draw control. Defaults to "topleft".</p></td>
        <td><code>&#39;topleft&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_draw_control_lite</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topleft&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a lite version draw control to the map for the plotting tool.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the draw control. Defaults to &quot;topleft&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add</span><span class="p">(</span>
        <span class="s2">&quot;draw_control&quot;</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">rectangle</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shapeOptions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">}},</span>
        <span class="n">circle</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;shapeOptions&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#3388ff&quot;</span><span class="p">}},</span>
        <span class="n">circlemarker</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">polyline</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">polygon</span><span class="o">=</span><span class="p">{},</span>
        <span class="n">edit</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">remove</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_ee_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_ee_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a given EE object to the map as a layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>Union[ee.FeatureCollection, ee.Feature, ee.Image, ee.ImageCollection]</code></td>
        <td><p>The object to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>Optional[Dict[str, Any]]</code></td>
        <td><p>The visualization parameters.
Defaults to {}.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>Optional[str]</code></td>
        <td><p>The name of the layer. Defaults to 'Layer N'.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by
default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The layer's opacity represented as a number
between 0 and 1. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_ee_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span>
        <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span>
    <span class="p">],</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">shown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a given EE object to the map as a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Union[ee.FeatureCollection, ee.Feature, ee.Image, ee.ImageCollection]):</span>
<span class="sd">            The object to add to the map.</span>
<span class="sd">        vis_params (Optional[Dict[str, Any]], optional): The visualization parameters.</span>
<span class="sd">            Defaults to {}.</span>
<span class="sd">        name (Optional[str], optional): The name of the layer. Defaults to &#39;Layer N&#39;.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by</span>
<span class="sd">            default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer&#39;s opacity represented as a number</span>
<span class="sd">            between 0 and 1. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">has_plot_dropdown</span> <span class="o">=</span> <span class="p">(</span>
        <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_dropdown_widget&quot;</span><span class="p">)</span>
        <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span>
    <span class="p">)</span>

    <span class="n">ee_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">ee_layer</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_layer</span><span class="p">[</span><span class="s2">&quot;ee_object&quot;</span><span class="p">],</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
            <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span>
                    <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
                <span class="p">)</span>

    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">add_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="p">(</span><span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">)):</span>
        <span class="k">if</span> <span class="n">has_plot_dropdown</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_plot_dropdown_widget</span><span class="o">.</span><span class="n">options</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="n">tile_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">tile_layer</span><span class="p">:</span>
        <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="o">.</span><span class="n">url_format</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_gdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdf</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_gdf" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a GeoDataFrame to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>GeoDataFrame</code></td>
        <td><p>A GeoPandas GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>zoom_to_layer</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to zoom to the layer.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the GeoDataFrame. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_gdf</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">gdf</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a GeoDataFrame to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (GeoDataFrame): A GeoPandas GeoDataFrame.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the layer.</span>
<span class="sd">        encoding (str, optional): The encoding of the GeoDataFrame. Defaults to &quot;utf-8&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">gdf_to_geojson</span><span class="p">(</span><span class="n">gdf</span><span class="p">,</span> <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">data</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

        <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">west</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;minx&quot;</span><span class="p">])</span>
        <span class="n">south</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">min</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;miny&quot;</span><span class="p">])</span>
        <span class="n">east</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;maxx&quot;</span><span class="p">])</span>
        <span class="n">north</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">max</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="s2">&quot;maxy&quot;</span><span class="p">])</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">],</span> <span class="p">[</span><span class="n">north</span><span class="p">,</span> <span class="n">west</span><span class="p">]])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_gdf_from_postgis" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_gdf_from_postgis</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_gdf_from_postgis" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Reads a PostGIS database and returns data as a GeoDataFrame to be added to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>sql</code></td>
        <td><code>str</code></td>
        <td><p>SQL query to execute in selecting entries from database, or name of the table to read from the database.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>con</code></td>
        <td><code>sqlalchemy.engine.Engine</code></td>
        <td><p>Active connection to the database to query.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>zoom_to_layer</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to zoom to the layer.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_gdf_from_postgis</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">sql</span><span class="p">,</span>
    <span class="n">con</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reads a PostGIS database and returns data as a GeoDataFrame to be added to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        sql (str): SQL query to execute in selecting entries from database, or name of the table to read from the database.</span>
<span class="sd">        con (sqlalchemy.engine.Engine): Active connection to the database to query.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">read_postgis</span><span class="p">(</span><span class="n">sql</span><span class="p">,</span> <span class="n">con</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="s2">&quot;epsg:4326&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_gdf</span><span class="p">(</span>
        <span class="n">gdf</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="p">,</span>
        <span class="n">zoom_to_layer</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_geojson" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_geojson</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_geojson</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_geojson" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a GeoJSON file to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_geojson</code></td>
        <td><code>str | dict</code></td>
        <td><p>The file path or http URL to the input GeoJSON or a dictionary containing the geojson.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the GeoJSON file. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided GeoJSON file could not be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_geojson</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">in_geojson</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a GeoJSON file to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_geojson (str | dict): The file path or http URL to the input GeoJSON or a dictionary containing the geojson.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of the GeoJSON file. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided GeoJSON file could not be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">json</span>
    <span class="kn">import</span> <span class="nn">random</span>
    <span class="kn">import</span> <span class="nn">requests</span>
    <span class="kn">import</span> <span class="nn">warnings</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="n">style_callback_only</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">style</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style_callback_only</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">in_geojson</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
                <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
                <span class="n">data</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span><span class="o">.</span><span class="n">json</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">in_geojson</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">)</span>
                <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">):</span>
                    <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span>
                        <span class="s2">&quot;The provided GeoJSON file could not be found.&quot;</span>
                    <span class="p">)</span>

                <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="n">encoding</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_geojson</span><span class="p">,</span> <span class="nb">dict</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">in_geojson</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The input geojson must be a type of str or dict.&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span> <span class="o">=</span> <span class="p">{</span>
            <span class="c1"># &quot;stroke&quot;: True,</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;#000000&quot;</span><span class="p">,</span>
            <span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="s2">&quot;opacity&quot;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
            <span class="c1"># &quot;fill&quot;: True,</span>
            <span class="c1"># &quot;fillColor&quot;: &quot;#ffffff&quot;,</span>
            <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.1</span><span class="p">,</span>
            <span class="c1"># &quot;dashArray&quot;: &quot;9&quot;</span>
            <span class="c1"># &quot;clickable&quot;: True,</span>
        <span class="p">}</span>
    <span class="k">elif</span> <span class="s2">&quot;weight&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">style</span><span class="p">:</span>
        <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">hover_style</span><span class="p">:</span>
        <span class="n">hover_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;weight&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">[</span><span class="s2">&quot;weight&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="s2">&quot;fillOpacity&quot;</span><span class="p">:</span> <span class="mf">0.5</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">random_color</span><span class="p">(</span><span class="n">feature</span><span class="p">):</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;color&quot;</span><span class="p">:</span> <span class="s2">&quot;black&quot;</span><span class="p">,</span>
            <span class="s2">&quot;fillColor&quot;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">fill_colors</span><span class="p">),</span>
        <span class="p">}</span>

    <span class="n">toolbar_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Toolbar&quot;</span><span class="p">,</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;info&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the tool&quot;</span><span class="p">,</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
        <span class="c1"># button_style=&quot;primary&quot;,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="n">html</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">()</span>
    <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">margin</span> <span class="o">=</span> <span class="s2">&quot;0px 10px 0px 10px&quot;</span>
    <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_height</span> <span class="o">=</span> <span class="s2">&quot;250px&quot;</span>
    <span class="n">html</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="s2">&quot;250px&quot;</span>

    <span class="n">output_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">(</span>
        <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span> <span class="n">html</span><span class="p">]</span>
    <span class="p">)</span>
    <span class="n">info_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">output_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">info_mode</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span> <span class="s2">&quot;on_click&quot;</span><span class="p">]:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">info_control</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">toolbar_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">close_button</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="n">output_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">widgets</span><span class="o">.</span><span class="n">VBox</span><span class="p">([</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">]),</span> <span class="n">html</span><span class="p">])</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">output_widget</span><span class="o">.</span><span class="n">children</span> <span class="o">=</span> <span class="p">[</span><span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">toolbar_button</span><span class="p">,</span> <span class="n">close_button</span><span class="p">])]</span>

    <span class="n">toolbar_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">toolbar_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="n">toolbar_button</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
            <span class="k">if</span> <span class="n">info_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">info_control</span><span class="p">)</span>
            <span class="n">output_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">update_html</span><span class="p">(</span><span class="n">feature</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">value</span> <span class="o">=</span> <span class="p">[</span>
            <span class="s2">&quot;&lt;b&gt;</span><span class="si">{}</span><span class="s2">: &lt;/b&gt;</span><span class="si">{}</span><span class="s2">&lt;br&gt;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">prop</span><span class="p">,</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">][</span><span class="n">prop</span><span class="p">])</span>
            <span class="k">for</span> <span class="n">prop</span> <span class="ow">in</span> <span class="n">feature</span><span class="p">[</span><span class="s2">&quot;properties&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="p">][:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

        <span class="n">value</span> <span class="o">=</span> <span class="s2">&quot;&quot;&quot;</span><span class="si">{}</span><span class="s2">&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>
        <span class="n">html</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">value</span>

    <span class="k">if</span> <span class="n">style_callback</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">style_callback</span> <span class="o">=</span> <span class="n">random_color</span>

    <span class="k">if</span> <span class="n">style_callback_only</span><span class="p">:</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">GeoJSON</span><span class="p">(</span>
            <span class="n">data</span><span class="o">=</span><span class="n">data</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">info_mode</span> <span class="o">==</span> <span class="s2">&quot;on_hover&quot;</span><span class="p">:</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">on_hover</span><span class="p">(</span><span class="n">update_html</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">info_mode</span> <span class="o">==</span> <span class="s2">&quot;on_click&quot;</span><span class="p">:</span>
        <span class="n">geojson</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">update_html</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">geojson_layers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;json_layer_dict&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">json_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;data&quot;</span><span class="p">:</span> <span class="n">geojson</span><span class="p">,</span>
        <span class="s2">&quot;style&quot;</span><span class="p">:</span> <span class="n">style</span><span class="p">,</span>
        <span class="s2">&quot;hover_style&quot;</span><span class="p">:</span> <span class="n">hover_style</span><span class="p">,</span>
        <span class="s2">&quot;style_callback&quot;</span><span class="p">:</span> <span class="n">style_callback</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">json_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_gui" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_gui" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a GUI to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the GUI. Options include "layer_manager",
"inspector", "plot", and "timelapse".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the GUI. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>opened</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the GUI is opened. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>show_close_button</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the close button.
Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_gui</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
    <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a GUI to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the GUI. Options include &quot;layer_manager&quot;,</span>
<span class="sd">            &quot;inspector&quot;, &quot;plot&quot;, and &quot;timelapse&quot;.</span>
<span class="sd">        position (str, optional): The position of the GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">        opened (bool, optional): Whether the GUI is opened. Defaults to True.</span>
<span class="sd">        show_close_button (bool, optional): Whether to show the close button.</span>
<span class="sd">            Defaults to True.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;layer_manager&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_layer_manager</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="n">opened</span><span class="p">,</span> <span class="n">show_close_button</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;inspector&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_inspector</span><span class="p">(</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">,</span>
            <span class="n">show_close_button</span><span class="o">=</span><span class="n">show_close_button</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;plot&quot;</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_plot_gui</span><span class="p">(</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">name</span> <span class="o">==</span> <span class="s2">&quot;timelapse&quot;</span><span class="p">:</span>
        <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">timelapse_gui</span>

        <span class="n">timelapse_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_heatmap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_heatmap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="s1">&#39;value&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Heat map&#39;</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_heatmap" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a heat map to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/heatmap.html</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | list | pd.DataFrame</code></td>
        <td><p>File path or HTTP URL to the input file or a list of data points in the format of [[x1, y1, z1], [x2, y2, z2]]. For example, https://raw.githubusercontent.com/giswqs/leafmap/master/examples/data/world_cities.csv</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude</code></td>
        <td><code>str</code></td>
        <td><p>The column name of latitude. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude</code></td>
        <td><code>str</code></td>
        <td><p>The column name of longitude. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>value</code></td>
        <td><code>str</code></td>
        <td><p>The column name of values. Defaults to "value".</p></td>
        <td><code>&#39;value&#39;</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Layer name to use. Defaults to "Heat map".</p></td>
        <td><code>&#39;Heat map&#39;</code></td>
      </tr>
      <tr>
        <td><code>radius</code></td>
        <td><code>int</code></td>
        <td><p>Radius of each point of the heatmap. Defaults to 25.</p></td>
        <td><code>25</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If data is not a list.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_heatmap</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">latitude</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">longitude</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">value</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Heat map&quot;</span><span class="p">,</span>
    <span class="n">radius</span><span class="o">=</span><span class="mi">25</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a heat map to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/heatmap.html</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | list | pd.DataFrame): File path or HTTP URL to the input file or a list of data points in the format of [[x1, y1, z1], [x2, y2, z2]]. For example, https://raw.githubusercontent.com/giswqs/leafmap/master/examples/data/world_cities.csv</span>
<span class="sd">        latitude (str, optional): The column name of latitude. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        longitude (str, optional): The column name of longitude. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        value (str, optional): The column name of values. Defaults to &quot;value&quot;.</span>
<span class="sd">        name (str, optional): Layer name to use. Defaults to &quot;Heat map&quot;.</span>
<span class="sd">        radius (int, optional): Radius of each point of the heatmap. Defaults to 25.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If data is not a list.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
    <span class="kn">from</span> <span class="nn">ipyleaflet</span> <span class="kn">import</span> <span class="n">Heatmap</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">df</span><span class="p">[[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">value</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="p">[[</span><span class="n">latitude</span><span class="p">,</span> <span class="n">longitude</span><span class="p">,</span> <span class="n">value</span><span class="p">]]</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data must be a list, a DataFrame, or a file path.&quot;</span><span class="p">)</span>

        <span class="n">heatmap</span> <span class="o">=</span> <span class="n">Heatmap</span><span class="p">(</span><span class="n">locations</span><span class="o">=</span><span class="n">data</span><span class="p">,</span> <span class="n">radius</span><span class="o">=</span><span class="n">radius</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">heatmap</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_html" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add HTML to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>html</code></td>
        <td><code>str</code></td>
        <td><p>The HTML to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the HTML, can be one of "topleft",
"topright", "bottomleft", "bottomright". Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add HTML to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        html (str): The HTML to add.</span>
<span class="sd">        position (str, optional): The position of the HTML, can be one of &quot;topleft&quot;,</span>
<span class="sd">            &quot;topright&quot;, &quot;bottomleft&quot;, &quot;bottomright&quot;. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">html</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_image" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add an image to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>image</code></td>
        <td><code>str | ipywidgets.Image</code></td>
        <td><p>The image to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the image, can be one of "topleft",
"topright", "bottomleft", "bottomright". Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">image</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add an image to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        image (str | ipywidgets.Image): The image to add.</span>
<span class="sd">        position (str, optional): The position of the image, can be one of &quot;topleft&quot;,</span>
<span class="sd">            &quot;topright&quot;, &quot;bottomleft&quot;, &quot;bottomright&quot;. Defaults to &quot;bottomright&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">image</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">image</span><span class="p">)</span><span class="o">.</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s2">&quot;rb&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">image</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;Invalid image&quot;</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_widget</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_inspector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_inspector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_inspector" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add the Inspector GUI to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>names</code></td>
        <td><code>str | list</code></td>
        <td><p>The names of the layers to be included. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to inspect visible layers only. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>decimals</code></td>
        <td><code>int</code></td>
        <td><p>The number of decimal places to round the coordinates. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the Inspector GUI. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>opened</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the control is opened. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_inspector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">names</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">visible</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">decimals</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="mi">2</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
    <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add the Inspector GUI to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        names (str | list, optional): The names of the layers to be included. Defaults to None.</span>
<span class="sd">        visible (bool, optional): Whether to inspect visible layers only. Defaults to True.</span>
<span class="sd">        decimals (int, optional): The number of decimal places to round the coordinates. Defaults to 2.</span>
<span class="sd">        position (str, optional): The position of the Inspector GUI. Defaults to &quot;topright&quot;.</span>
<span class="sd">        opened (bool, optional): Whether the control is opened. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_inspector</span><span class="p">(</span>
        <span class="n">position</span><span class="p">,</span>
        <span class="n">names</span><span class="o">=</span><span class="n">names</span><span class="p">,</span>
        <span class="n">visible</span><span class="o">=</span><span class="n">visible</span><span class="p">,</span>
        <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">,</span>
        <span class="n">opened</span><span class="o">=</span><span class="n">opened</span><span class="p">,</span>
        <span class="n">show_close_button</span><span class="o">=</span><span class="n">show_close_button</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_kml" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_kml</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_kml</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_kml" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a GeoJSON file to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_kml</code></td>
        <td><code>str</code></td>
        <td><p>The input file path to the KML.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided KML file could not be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_kml</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">in_kml</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a GeoJSON file to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_kml (str): The input file path to the KML.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided KML file could not be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">in_kml</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">in_kml</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">in_kml</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
        <span class="n">in_kml</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>

    <span class="n">in_kml</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_kml</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_kml</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided KML file could not be found.&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_vector</span><span class="p">(</span>
        <span class="n">in_kml</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_labels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="s1">&#39;12pt&#39;</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">font_family</span><span class="o">=</span><span class="s1">&#39;arial&#39;</span><span class="p">,</span> <span class="n">font_weight</span><span class="o">=</span><span class="s1">&#39;normal&#39;</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Labels&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_labels" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a label layer to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/divicon.html</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>pd.DataFrame | ee.FeatureCollection</code></td>
        <td><p>The input data to label.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The column name of the data to label.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>font_size</code></td>
        <td><code>str</code></td>
        <td><p>The font size of the labels. Defaults to "12pt".</p></td>
        <td><code>&#39;12pt&#39;</code></td>
      </tr>
      <tr>
        <td><code>font_color</code></td>
        <td><code>str</code></td>
        <td><p>The font color of the labels. Defaults to "black".</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
      <tr>
        <td><code>font_family</code></td>
        <td><code>str</code></td>
        <td><p>The font family of the labels. Defaults to "arial".</p></td>
        <td><code>&#39;arial&#39;</code></td>
      </tr>
      <tr>
        <td><code>font_weight</code></td>
        <td><code>str</code></td>
        <td><p>The font weight of the labels, can be normal, bold. Defaults to "normal".</p></td>
        <td><code>&#39;normal&#39;</code></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The column name of the longitude. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The column name of the latitude. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>draggable</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the labels are draggable. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>Layer name to use. Defaults to "Labels".</p></td>
        <td><code>&#39;Labels&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_labels</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">font_size</span><span class="o">=</span><span class="s2">&quot;12pt&quot;</span><span class="p">,</span>
    <span class="n">font_color</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">font_family</span><span class="o">=</span><span class="s2">&quot;arial&quot;</span><span class="p">,</span>
    <span class="n">font_weight</span><span class="o">=</span><span class="s2">&quot;normal&quot;</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">draggable</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Labels&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a label layer to the map. Reference: https://ipyleaflet.readthedocs.io/en/latest/api_reference/divicon.html</span>

<span class="sd">    Args:</span>
<span class="sd">        data (pd.DataFrame | ee.FeatureCollection): The input data to label.</span>
<span class="sd">        column (str): The column name of the data to label.</span>
<span class="sd">        font_size (str, optional): The font size of the labels. Defaults to &quot;12pt&quot;.</span>
<span class="sd">        font_color (str, optional): The font color of the labels. Defaults to &quot;black&quot;.</span>
<span class="sd">        font_family (str, optional): The font family of the labels. Defaults to &quot;arial&quot;.</span>
<span class="sd">        font_weight (str, optional): The font weight of the labels, can be normal, bold. Defaults to &quot;normal&quot;.</span>
<span class="sd">        x (str, optional): The column name of the longitude. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The column name of the latitude. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        draggable (bool, optional): Whether the labels are draggable. Defaults to True.</span>
<span class="sd">        layer_name (str, optional): Layer name to use. Defaults to &quot;Labels&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">warnings</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
        <span class="n">centroids</span> <span class="o">=</span> <span class="n">vector_centroids</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">ee_to_df</span><span class="p">(</span><span class="n">centroids</span><span class="p">)</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">data</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.csv&quot;</span><span class="p">:</span>
            <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.geojson&quot;</span><span class="p">,</span> <span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.shp&quot;</span><span class="p">,</span> <span class="s2">&quot;.gpkg&quot;</span><span class="p">]:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

                <span class="n">df</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
                <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">x</span>
                <span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">centroid</span><span class="o">.</span><span class="n">y</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">_</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;geopandas is required to read geojson.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;data must be a DataFrame or an ee.FeatureCollection.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;column must be one of </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="p">)</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">size</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">font_size</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;pt&quot;</span><span class="p">,</span> <span class="s2">&quot;&quot;</span><span class="p">))</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;font_size must be something like &#39;10pt&#39;&quot;</span><span class="p">)</span>

    <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">index</span> <span class="ow">in</span> <span class="n">df</span><span class="o">.</span><span class="n">index</span><span class="p">:</span>
        <span class="n">html</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">font_size</span><span class="si">}</span><span class="s1">;color:</span><span class="si">{</span><span class="n">font_color</span><span class="si">}</span><span class="s1">;font-family:</span><span class="si">{</span><span class="n">font_family</span><span class="si">}</span><span class="s1">;font-weight: </span><span class="si">{</span><span class="n">font_weight</span><span class="si">}</span><span class="s1">&quot;&gt;</span><span class="si">{</span><span class="n">df</span><span class="p">[</span><span class="n">column</span><span class="p">][</span><span class="n">index</span><span class="p">]</span><span class="si">}</span><span class="s1">&lt;/div&gt;&#39;</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
            <span class="n">location</span><span class="o">=</span><span class="p">[</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">][</span><span class="n">index</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">][</span><span class="n">index</span><span class="p">]],</span>
            <span class="n">icon</span><span class="o">=</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">DivIcon</span><span class="p">(</span>
                <span class="n">icon_size</span><span class="o">=</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
                <span class="n">icon_anchor</span><span class="o">=</span><span class="p">(</span><span class="n">size</span><span class="p">,</span> <span class="n">size</span><span class="p">),</span>
                <span class="n">html</span><span class="o">=</span><span class="n">html</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">),</span>
            <span class="n">draggable</span><span class="o">=</span><span class="n">draggable</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
    <span class="n">layer_group</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayerGroup</span><span class="p">(</span><span class="n">layers</span><span class="o">=</span><span class="n">labels</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_group</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">labels</span> <span class="o">=</span> <span class="n">layer_group</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_landsat_ts_gif" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_landsat_ts_gif</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Timelapse&#39;</span><span class="p">,</span> <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span> <span class="n">end_year</span><span class="o">=</span><span class="mi">2021</span><span class="p">,</span> <span class="n">start_date</span><span class="o">=</span><span class="s1">&#39;06-10&#39;</span><span class="p">,</span> <span class="n">end_date</span><span class="o">=</span><span class="s1">&#39;09-20&#39;</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;NIR&#39;</span><span class="p">,</span> <span class="s1">&#39;Red&#39;</span><span class="p">,</span> <span class="s1">&#39;Green&#39;</span><span class="p">],</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span> <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span> <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span> <span class="n">font_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">progress_bar_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">])</span></code>


<a href="#geemap.geemap.Map.add_landsat_ts_gif" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a Landsat timelapse to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>Layer name to show under the layer control. Defaults to 'Timelapse'.</p></td>
        <td><code>&#39;Timelapse&#39;</code></td>
      </tr>
      <tr>
        <td><code>roi</code></td>
        <td><code>object</code></td>
        <td><p>Region of interest to create the timelapse. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>A label to show on the GIF, such as place name. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>start_year</code></td>
        <td><code>int</code></td>
        <td><p>Starting year for the timelapse. Defaults to 1984.</p></td>
        <td><code>1984</code></td>
      </tr>
      <tr>
        <td><code>end_year</code></td>
        <td><code>int</code></td>
        <td><p>Ending year for the timelapse. Defaults to 2021.</p></td>
        <td><code>2021</code></td>
      </tr>
      <tr>
        <td><code>start_date</code></td>
        <td><code>str</code></td>
        <td><p>Starting date (month-day) each year for filtering ImageCollection. Defaults to '06-10'.</p></td>
        <td><code>&#39;06-10&#39;</code></td>
      </tr>
      <tr>
        <td><code>end_date</code></td>
        <td><code>str</code></td>
        <td><p>Ending date (month-day) each year for filtering ImageCollection. Defaults to '09-20'.</p></td>
        <td><code>&#39;09-20&#39;</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>Three bands selected from ['Blue', 'Green', 'Red', 'NIR', 'SWIR1', 'SWIR2', 'pixel_qa']. Defaults to ['NIR', 'Red', 'Green'].</p></td>
        <td><code>[&#39;NIR&#39;, &#39;Red&#39;, &#39;Green&#39;]</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>dimensions</code></td>
        <td><code>int</code></td>
        <td><p>a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</p></td>
        <td><code>768</code></td>
      </tr>
      <tr>
        <td><code>frames_per_second</code></td>
        <td><code>int</code></td>
        <td><p>Animation speed. Defaults to 10.</p></td>
        <td><code>10</code></td>
      </tr>
      <tr>
        <td><code>font_size</code></td>
        <td><code>int</code></td>
        <td><p>Font size of the animated text and label. Defaults to 30.</p></td>
        <td><code>30</code></td>
      </tr>
      <tr>
        <td><code>font_color</code></td>
        <td><code>str</code></td>
        <td><p>Font color of the animated text and label. Defaults to 'black'.</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_progress_bar</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a progress bar at the bottom of the GIF. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>progress_bar_color</code></td>
        <td><code>str</code></td>
        <td><p>Color for the progress bar. Defaults to 'white'.</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>progress_bar_height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the progress bar. Defaults to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>out_gif</code></td>
        <td><code>str</code></td>
        <td><p>File path to the output animated GIF. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>download</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to download the gif. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>apply_fmask</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>nd_bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of names specifying the bands to use, e.g., ['Green', 'SWIR1']. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nd_threshold</code></td>
        <td><code>float</code></td>
        <td><p>The threshold for extracting pixels from the normalized difference band.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>nd_palette</code></td>
        <td><code>str</code></td>
        <td><p>The color palette to use for displaying the normalized difference band.</p></td>
        <td><code>[&#39;black&#39;, &#39;blue&#39;]</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_landsat_ts_gif</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Timelapse&quot;</span><span class="p">,</span>
    <span class="n">roi</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">start_year</span><span class="o">=</span><span class="mi">1984</span><span class="p">,</span>
    <span class="n">end_year</span><span class="o">=</span><span class="mi">2021</span><span class="p">,</span>
    <span class="n">start_date</span><span class="o">=</span><span class="s2">&quot;06-10&quot;</span><span class="p">,</span>
    <span class="n">end_date</span><span class="o">=</span><span class="s2">&quot;09-20&quot;</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;NIR&quot;</span><span class="p">,</span> <span class="s2">&quot;Red&quot;</span><span class="p">,</span> <span class="s2">&quot;Green&quot;</span><span class="p">],</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">dimensions</span><span class="o">=</span><span class="mi">768</span><span class="p">,</span>
    <span class="n">frames_per_second</span><span class="o">=</span><span class="mi">10</span><span class="p">,</span>
    <span class="n">font_size</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="n">font_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">add_progress_bar</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">progress_bar_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">progress_bar_height</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">out_gif</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">download</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">apply_fmask</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">nd_bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nd_threshold</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">nd_palette</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">,</span> <span class="s2">&quot;blue&quot;</span><span class="p">],</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a Landsat timelapse to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_name (str, optional): Layer name to show under the layer control. Defaults to &#39;Timelapse&#39;.</span>
<span class="sd">        roi (object, optional): Region of interest to create the timelapse. Defaults to None.</span>
<span class="sd">        label (str, optional): A label to show on the GIF, such as place name. Defaults to None.</span>
<span class="sd">        start_year (int, optional): Starting year for the timelapse. Defaults to 1984.</span>
<span class="sd">        end_year (int, optional): Ending year for the timelapse. Defaults to 2021.</span>
<span class="sd">        start_date (str, optional): Starting date (month-day) each year for filtering ImageCollection. Defaults to &#39;06-10&#39;.</span>
<span class="sd">        end_date (str, optional): Ending date (month-day) each year for filtering ImageCollection. Defaults to &#39;09-20&#39;.</span>
<span class="sd">        bands (list, optional): Three bands selected from [&#39;Blue&#39;, &#39;Green&#39;, &#39;Red&#39;, &#39;NIR&#39;, &#39;SWIR1&#39;, &#39;SWIR2&#39;, &#39;pixel_qa&#39;]. Defaults to [&#39;NIR&#39;, &#39;Red&#39;, &#39;Green&#39;].</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters. Defaults to None.</span>
<span class="sd">        dimensions (int, optional): a number or pair of numbers in format WIDTHxHEIGHT) Maximum dimensions of the thumbnail to render, in pixels. If only one number is passed, it is used as the maximum, and the other dimension is computed by proportional scaling. Defaults to 768.</span>
<span class="sd">        frames_per_second (int, optional): Animation speed. Defaults to 10.</span>
<span class="sd">        font_size (int, optional): Font size of the animated text and label. Defaults to 30.</span>
<span class="sd">        font_color (str, optional): Font color of the animated text and label. Defaults to &#39;black&#39;.</span>
<span class="sd">        add_progress_bar (bool, optional): Whether to add a progress bar at the bottom of the GIF. Defaults to True.</span>
<span class="sd">        progress_bar_color (str, optional): Color for the progress bar. Defaults to &#39;white&#39;.</span>
<span class="sd">        progress_bar_height (int, optional): Height of the progress bar. Defaults to 5.</span>
<span class="sd">        out_gif (str, optional): File path to the output animated GIF. Defaults to None.</span>
<span class="sd">        download (bool, optional): Whether to download the gif. Defaults to False.</span>
<span class="sd">        apply_fmask (bool, optional): Whether to apply Fmask (Function of mask) for automated clouds, cloud shadows, snow, and water masking.</span>
<span class="sd">        nd_bands (list, optional): A list of names specifying the bands to use, e.g., [&#39;Green&#39;, &#39;SWIR1&#39;]. The normalized difference is computed as (first  second) / (first + second). Note that negative input values are forced to 0 so that the result is confined to the range (-1, 1).</span>
<span class="sd">        nd_threshold (float, optional): The threshold for extracting pixels from the normalized difference band.</span>
<span class="sd">        nd_palette (str, optional): The color palette to use for displaying the normalized difference band.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">roi</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">feature</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">draw_last_feature</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">feature</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Polygon</span><span class="p">(</span>
                    <span class="p">[</span>
                        <span class="p">[</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">36.409454</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">114.271283</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                            <span class="p">[</span><span class="o">-</span><span class="mf">115.471773</span><span class="p">,</span> <span class="mf">35.892718</span><span class="p">],</span>
                        <span class="p">]</span>
                    <span class="p">],</span>
                    <span class="kc">None</span><span class="p">,</span>
                    <span class="kc">False</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
            <span class="n">roi</span> <span class="o">=</span> <span class="n">roi</span><span class="o">.</span><span class="n">geometry</span><span class="p">()</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">roi</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided roi is invalid. It must be an ee.Geometry&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="n">geojson</span> <span class="o">=</span> <span class="n">ee_to_geojson</span><span class="p">(</span><span class="n">roi</span><span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">minimum_bounding_box</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">geojson</span> <span class="o">=</span> <span class="n">adjust_longitude</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>
        <span class="n">roi</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">(</span><span class="n">geojson</span><span class="p">)</span>

        <span class="n">in_gif</span> <span class="o">=</span> <span class="n">landsat_timelapse</span><span class="p">(</span>
            <span class="n">roi</span><span class="o">=</span><span class="n">roi</span><span class="p">,</span>
            <span class="n">out_gif</span><span class="o">=</span><span class="n">out_gif</span><span class="p">,</span>
            <span class="n">start_year</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
            <span class="n">end_year</span><span class="o">=</span><span class="n">end_year</span><span class="p">,</span>
            <span class="n">start_date</span><span class="o">=</span><span class="n">start_date</span><span class="p">,</span>
            <span class="n">end_date</span><span class="o">=</span><span class="n">end_date</span><span class="p">,</span>
            <span class="n">bands</span><span class="o">=</span><span class="n">bands</span><span class="p">,</span>
            <span class="n">vis_params</span><span class="o">=</span><span class="n">vis_params</span><span class="p">,</span>
            <span class="n">dimensions</span><span class="o">=</span><span class="n">dimensions</span><span class="p">,</span>
            <span class="n">frames_per_second</span><span class="o">=</span><span class="n">frames_per_second</span><span class="p">,</span>
            <span class="n">apply_fmask</span><span class="o">=</span><span class="n">apply_fmask</span><span class="p">,</span>
            <span class="n">nd_bands</span><span class="o">=</span><span class="n">nd_bands</span><span class="p">,</span>
            <span class="n">nd_threshold</span><span class="o">=</span><span class="n">nd_threshold</span><span class="p">,</span>
            <span class="n">nd_palette</span><span class="o">=</span><span class="n">nd_palette</span><span class="p">,</span>
            <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
            <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
            <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
            <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">in_nd_gif</span> <span class="o">=</span> <span class="n">in_gif</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">&quot;.gif&quot;</span><span class="p">,</span> <span class="s2">&quot;_nd.gif&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span>
                <span class="n">in_nd_gif</span><span class="p">,</span>
                <span class="n">in_nd_gif</span><span class="p">,</span>
                <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;2%&quot;</span><span class="p">,</span> <span class="s2">&quot;2%&quot;</span><span class="p">),</span>
                <span class="n">text_sequence</span><span class="o">=</span><span class="n">start_year</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">add_text_to_gif</span><span class="p">(</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">xy</span><span class="o">=</span><span class="p">(</span><span class="s2">&quot;2%&quot;</span><span class="p">,</span> <span class="s2">&quot;90%&quot;</span><span class="p">),</span>
                <span class="n">text_sequence</span><span class="o">=</span><span class="n">label</span><span class="p">,</span>
                <span class="n">font_size</span><span class="o">=</span><span class="n">font_size</span><span class="p">,</span>
                <span class="n">font_color</span><span class="o">=</span><span class="n">font_color</span><span class="p">,</span>
                <span class="n">duration</span><span class="o">=</span><span class="nb">int</span><span class="p">(</span><span class="mi">1000</span> <span class="o">/</span> <span class="n">frames_per_second</span><span class="p">),</span>
                <span class="n">add_progress_bar</span><span class="o">=</span><span class="n">add_progress_bar</span><span class="p">,</span>
                <span class="n">progress_bar_color</span><span class="o">=</span><span class="n">progress_bar_color</span><span class="p">,</span>
                <span class="n">progress_bar_height</span><span class="o">=</span><span class="n">progress_bar_height</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="c1"># if nd_bands is not None:</span>
            <span class="c1">#     add_text_to_gif(in_nd_gif, in_nd_gif, xy=(&#39;2%&#39;, &#39;90%&#39;), text_sequence=label,</span>
            <span class="c1">#                     font_size=font_size, font_color=font_color, duration=int(1000 / frames_per_second), add_progress_bar=add_progress_bar, progress_bar_color=progress_bar_color, progress_bar_height=progress_bar_height)</span>

        <span class="k">if</span> <span class="n">is_tool</span><span class="p">(</span><span class="s2">&quot;ffmpeg&quot;</span><span class="p">):</span>
            <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_gif</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">reduce_gif_size</span><span class="p">(</span><span class="n">in_nd_gif</span><span class="p">)</span>

        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Adding GIF to the map ...&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">in_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">image_overlay</span><span class="p">(</span>
                <span class="n">url</span><span class="o">=</span><span class="n">in_nd_gif</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span> <span class="o">+</span> <span class="s2">&quot; ND&quot;</span>
            <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The timelapse has been added to the map.&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">download</span><span class="p">:</span>
            <span class="n">link</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                <span class="n">in_gif</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download the Landsat timelapse: &quot;</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">display</span><span class="p">(</span><span class="n">link</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">nd_bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">link2</span> <span class="o">=</span> <span class="n">create_download_link</span><span class="p">(</span>
                    <span class="n">in_nd_gif</span><span class="p">,</span>
                    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;Click here to download the Normalized Difference Index timelapse: &quot;</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">display</span><span class="p">(</span><span class="n">link2</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_layer_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_layer_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a layer control to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the layer control on the map.
Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a layer control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the layer control on the map.</span>
<span class="sd">            Defaults to &quot;topright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_layer_manager" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_layer_manager</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_layer_manager" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add the Layer Manager to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the Layer Manager. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>opened</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the control is opened. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>show_close_button</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the close button. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_layer_manager</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span>
    <span class="n">opened</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">show_close_button</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add the Layer Manager to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the Layer Manager. Defaults to &quot;topright&quot;.</span>
<span class="sd">        opened (bool, optional): Whether the control is opened. Defaults to True.</span>
<span class="sd">        show_close_button (bool, optional): Whether to show the close button. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">_add_layer_manager</span><span class="p">(</span><span class="n">position</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">layer_manager</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_layer_manager</span><span class="p">:</span>
        <span class="n">layer_manager</span><span class="o">.</span><span class="n">collapsed</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">opened</span>
        <span class="n">layer_manager</span><span class="o">.</span><span class="n">close_button_hidden</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">show_close_button</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_legend" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;Legend&#39;</span><span class="p">,</span> <span class="n">legend_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">builtin_legend</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_legend" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a customized basemap to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>Title of the legend. Defaults to 'Legend'.</p></td>
        <td><code>&#39;Legend&#39;</code></td>
      </tr>
      <tr>
        <td><code>legend_dict</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary containing legend items
as keys and color as values. If provided, keys and
colors will be ignored. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>keys</code></td>
        <td><code>list</code></td>
        <td><p>A list of legend keys. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of legend colors. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the legend. Defaults to
'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>builtin_legend</code></td>
        <td><code>str</code></td>
        <td><p>Name of the builtin legend to add
to the map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The associated layer for the legend.
Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>add_header</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the legend can be closed or
not. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>widget_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments passed to the
widget_template() function. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_legend</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Legend&quot;</span><span class="p">,</span>
    <span class="n">legend_dict</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">keys</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">colors</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">builtin_legend</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">add_header</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_args</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">]</span> <span class="o">=</span> <span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a customized basemap to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        title (str, optional): Title of the legend. Defaults to &#39;Legend&#39;.</span>
<span class="sd">        legend_dict (dict, optional): A dictionary containing legend items</span>
<span class="sd">            as keys and color as values. If provided, keys and</span>
<span class="sd">            colors will be ignored. Defaults to None.</span>
<span class="sd">        keys (list, optional): A list of legend keys. Defaults to None.</span>
<span class="sd">        colors (list, optional): A list of legend colors. Defaults to None.</span>
<span class="sd">        position (str, optional): Position of the legend. Defaults to</span>
<span class="sd">            &#39;bottomright&#39;.</span>
<span class="sd">        builtin_legend (str, optional): Name of the builtin legend to add</span>
<span class="sd">            to the map. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The associated layer for the legend.</span>
<span class="sd">            Defaults to None.</span>
<span class="sd">        add_header (bool, optional): Whether the legend can be closed or</span>
<span class="sd">            not. Defaults to True.</span>
<span class="sd">        widget_args (dict, optional): Additional arguments passed to the</span>
<span class="sd">            widget_template() function. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">legend</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_add_legend</span><span class="p">(</span>
            <span class="n">title</span><span class="p">,</span>
            <span class="n">legend_dict</span><span class="p">,</span>
            <span class="n">keys</span><span class="p">,</span>
            <span class="n">colors</span><span class="p">,</span>
            <span class="n">position</span><span class="p">,</span>
            <span class="n">builtin_legend</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="p">,</span>
            <span class="n">add_header</span><span class="p">,</span>
            <span class="n">widget_args</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="o">=</span> <span class="n">legend</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;legends&quot;</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legends</span> <span class="o">=</span> <span class="p">[</span><span class="n">legend</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">legends</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_marker" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_marker" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a marker to the map. More info about marker at https://ipyleaflet.readthedocs.io/en/latest/api_reference/marker.html.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>location</code></td>
        <td><code>list | tuple</code></td>
        <td><p>The location of the marker in the format of [lat, lng].</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Keyword arguments for the marker.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_marker</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a marker to the map. More info about marker at https://ipyleaflet.readthedocs.io/en/latest/api_reference/marker.html.</span>

<span class="sd">    Args:</span>
<span class="sd">        location (list | tuple): The location of the marker in the format of [lat, lng].</span>

<span class="sd">        **kwargs: Keyword arguments for the marker.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
        <span class="n">location</span> <span class="o">=</span> <span class="nb">tuple</span><span class="p">(</span><span class="n">location</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">location</span><span class="p">,</span> <span class="nb">tuple</span><span class="p">):</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The location must be a list or a tuple.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_marker_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s1">&#39;click&#39;</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_marker_cluster" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Captures user inputs and add markers to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>event</code></td>
        <td><code>str</code></td>
        <td><p>[description]. Defaults to 'click'.</p></td>
        <td><code>&#39;click&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_marker</code></td>
        <td><code>bool</code></td>
        <td><p>If True, add markers to the map. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>a marker cluster.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">event</span><span class="o">=</span><span class="s2">&quot;click&quot;</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Captures user inputs and add markers to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        event (str, optional): [description]. Defaults to &#39;click&#39;.</span>
<span class="sd">        add_marker (bool, optional): If True, add markers to the map. Defaults to True.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a marker cluster.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">event</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span> <span class="ow">and</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_minimap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_minimap" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a minimap (overview) to the ipyleaflet map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>Initial map zoom level. Defaults to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the minimap. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_minimap</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a minimap (overview) to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int, optional): Initial map zoom level. Defaults to 5.</span>
<span class="sd">        position (str, optional): Position of the minimap. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">minimap</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Map</span><span class="p">(</span>
        <span class="n">zoom_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">attribution_control</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span>
        <span class="n">center</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">center</span><span class="p">,</span>
        <span class="n">layers</span><span class="o">=</span><span class="p">[</span><span class="n">get_basemap</span><span class="p">(</span><span class="s2">&quot;ROADMAP&quot;</span><span class="p">)],</span>
    <span class="p">)</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span>
    <span class="n">minimap</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="s2">&quot;150px&quot;</span>
    <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">link</span><span class="p">((</span><span class="n">minimap</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">),</span> <span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">))</span>
    <span class="n">minimap_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">minimap</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">minimap_control</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_netcdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_netcdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;NetCDF layer&#39;</span><span class="p">,</span> <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_netcdf" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Generate an ipyleaflet/folium TileLayer from a netCDF file.
    If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),
    try adding to following two lines to the beginning of the notebook if the raster does not render properly.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>File path or HTTP URL to the netCDF file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>variables</code></td>
        <td><code>int</code></td>
        <td><p>The variable/band names to extract data from the netCDF file. Defaults to None. If None, all variables will be extracted.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>port</code></td>
        <td><code>str</code></td>
        <td><p>The port to use for the server. Defaults to "default".</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>str</code></td>
        <td><p>The name of the color palette from <code>palettable</code> to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to "netCDF layer".</p></td>
        <td><code>&#39;NetCDF layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>shift_lon</code></td>
        <td><code>bool</code></td>
        <td><p>Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>str</code></td>
        <td><p>Name of the latitude variable. Defaults to 'lat'.</p></td>
        <td><code>&#39;lat&#39;</code></td>
      </tr>
      <tr>
        <td><code>lon</code></td>
        <td><code>str</code></td>
        <td><p>Name of the longitude variable. Defaults to 'lon'.</p></td>
        <td><code>&#39;lon&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_netcdf</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">variables</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;NetCDF layer&quot;</span><span class="p">,</span>
    <span class="n">shift_lon</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">lat</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">lon</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generate an ipyleaflet/folium TileLayer from a netCDF file.</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer),</span>
<span class="sd">        try adding to following two lines to the beginning of the notebook if the raster does not render properly.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = f&#39;{os.environ[&#39;JUPYTERHUB_SERVICE_PREFIX&#39;].lstrip(&#39;/&#39;)}/proxy/{{port}}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): File path or HTTP URL to the netCDF file.</span>
<span class="sd">        variables (int, optional): The variable/band names to extract data from the netCDF file. Defaults to None. If None, all variables will be extracted.</span>
<span class="sd">        port (str, optional): The port to use for the server. Defaults to &quot;default&quot;.</span>
<span class="sd">        palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &quot;netCDF layer&quot;.</span>
<span class="sd">        shift_lon (bool, optional): Flag to shift longitude values from [0, 360] to the range [-180, 180]. Defaults to True.</span>
<span class="sd">        lat (str, optional): Name of the latitude variable. Defaults to &#39;lat&#39;.</span>
<span class="sd">        lon (str, optional): Name of the longitude variable. Defaults to &#39;lon&#39;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">tif</span><span class="p">,</span> <span class="nb">vars</span> <span class="o">=</span> <span class="n">netcdf_to_tif</span><span class="p">(</span>
        <span class="n">filename</span><span class="p">,</span> <span class="n">shift_lon</span><span class="o">=</span><span class="n">shift_lon</span><span class="p">,</span> <span class="n">lat</span><span class="o">=</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="o">=</span><span class="n">lon</span><span class="p">,</span> <span class="n">return_vars</span><span class="o">=</span><span class="kc">True</span>
    <span class="p">)</span>

    <span class="k">if</span> <span class="n">variables</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nb">vars</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="mi">3</span><span class="p">:</span>
            <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="nb">set</span><span class="p">(</span><span class="n">variables</span><span class="p">)</span><span class="o">.</span><span class="n">issubset</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="nb">vars</span><span class="p">)):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The variables must be a subset of </span><span class="si">{</span><span class="nb">vars</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">band_idx</span> <span class="o">=</span> <span class="p">[</span><span class="nb">vars</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">v</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span> <span class="k">for</span> <span class="n">v</span> <span class="ow">in</span> <span class="n">variables</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
        <span class="n">tif</span><span class="p">,</span>
        <span class="n">band</span><span class="o">=</span><span class="n">band_idx</span><span class="p">,</span>
        <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM data to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>INT</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>to_ee</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to convert the csv to an ee.FeatureCollection.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>geodesic</code></td>
        <td><code>bool</code></td>
        <td><p>Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM data to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        which_result (INT, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">        to_ee (bool, optional): Whether to convert the csv to an ee.FeatureCollection.</span>
<span class="sd">        geodesic (bool, optional): Whether line segments should be interpreted as spherical geodesics. If false, indicates that line segments should be interpreted as planar lines in the specified CRS. If absent, defaults to true if the CRS is geographic (including the default EPSG:4326), or to false if the CRS is projected.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_to_gdf</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="n">buffer_dist</span>
    <span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">geojson_to_ee</span><span class="p">(</span><span class="n">geojson</span><span class="p">,</span> <span class="n">geodesic</span><span class="o">=</span><span class="n">geodesic</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoomToObject</span><span class="p">(</span><span class="n">fc</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
            <span class="n">geojson</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
            <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
            <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
            <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
            <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">bounds</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_address" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_address</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">address</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_address" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within some distance N, S, E, W of address to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>address</code></td>
        <td><code>str</code></td>
        <td><p>The address to geocode and use as the central point around which to get the geometries.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dist</code></td>
        <td><code>int</code></td>
        <td><p>Distance in meters. Defaults to 1000.</p></td>
        <td><code>1000</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_address</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">address</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within some distance N, S, E, W of address to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        address (str): The address to geocode and use as the central point around which to get the geometries.</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        dist (int, optional): Distance in meters. Defaults to 1000.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_address</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_address</span><span class="p">(</span><span class="n">address</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_bbox" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_bbox</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_bbox" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within a N, S, E, W bounding box to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>north</code></td>
        <td><code>float</code></td>
        <td><p>Northern latitude of bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>south</code></td>
        <td><code>float</code></td>
        <td><p>Southern latitude of bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>east</code></td>
        <td><code>float</code></td>
        <td><p>Eastern longitude of bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>west</code></td>
        <td><code>float</code></td>
        <td><p>Western longitude of bounding box.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_bbox</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">north</span><span class="p">,</span>
    <span class="n">south</span><span class="p">,</span>
    <span class="n">east</span><span class="p">,</span>
    <span class="n">west</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within a N, S, E, W bounding box to the map.</span>


<span class="sd">    Args:</span>
<span class="sd">        north (float): Northern latitude of bounding box.</span>
<span class="sd">        south (float): Southern latitude of bounding box.</span>
<span class="sd">        east (float): Eastern longitude of bounding box.</span>
<span class="sd">        west (float): Western longitude of bounding box.</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_bbox</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_bbox</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_geocode" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_geocode</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_geocode" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM data of place(s) by name or ID to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>int</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>by_osmid</code></td>
        <td><code>bool</code></td>
        <td><p>If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_geocode</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">by_osmid</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM data of place(s) by name or ID to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        which_result (int, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        by_osmid (bool, optional): If True, handle query as an OSM ID for lookup rather than text search. Defaults to False.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_geocode</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_geocode</span><span class="p">(</span>
        <span class="n">query</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="n">which_result</span><span class="p">,</span> <span class="n">by_osmid</span><span class="o">=</span><span class="n">by_osmid</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="n">buffer_dist</span>
    <span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_place" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_place</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">query</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_place" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within boundaries of geocodable place(s) to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>query</code></td>
        <td><code>str | dict | list</code></td>
        <td><p>Query string(s) or structured dict(s) to geocode.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>which_result</code></td>
        <td><code>int</code></td>
        <td><p>Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn't return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>buffer_dist</code></td>
        <td><code>float</code></td>
        <td><p>Distance to buffer around the place geometry, in meters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_place</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">query</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">which_result</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">buffer_dist</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within boundaries of geocodable place(s) to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        query (str | dict | list): Query string(s) or structured dict(s) to geocode.</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        which_result (int, optional): Which geocoding result to use. if None, auto-select the first (Multi)Polygon or raise an error if OSM doesn&#39;t return one. to get the top match regardless of geometry type, set which_result=1. Defaults to None.</span>
<span class="sd">        buffer_dist (float, optional): Distance to buffer around the place geometry, in meters. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_place</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_place</span><span class="p">(</span><span class="n">query</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">which_result</span><span class="p">,</span> <span class="n">buffer_dist</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_point" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_point</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">center_point</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_point" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within some distance N, S, E, W of a point to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>center_point</code></td>
        <td><code>tuple</code></td>
        <td><p>The (lat, lng) center point around which to get the geometries.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>dist</code></td>
        <td><code>int</code></td>
        <td><p>Distance in meters. Defaults to 1000.</p></td>
        <td><code>1000</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_point</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">center_point</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">dist</span><span class="o">=</span><span class="mi">1000</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within some distance N, S, E, W of a point to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        center_point (tuple): The (lat, lng) center point around which to get the geometries.</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        dist (int, optional): Distance in meters. Defaults to 1000.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_point</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_point</span><span class="p">(</span><span class="n">center_point</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">dist</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_polygon" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_polygon</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">polygon</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_polygon" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within boundaries of a (multi)polygon to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>polygon</code></td>
        <td><code>shapely.geometry.Polygon | shapely.geometry.MultiPolygon</code></td>
        <td><p>Geographic boundaries to fetch geometries within</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_polygon</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">polygon</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within boundaries of a (multi)polygon to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        polygon (shapely.geometry.Polygon | shapely.geometry.MultiPolygon): Geographic boundaries to fetch geometries within</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_polygon</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_polygon</span><span class="p">(</span><span class="n">polygon</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_osm_from_view" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_osm_from_view</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">tags</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_osm_from_view" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds OSM entities within the current map view to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>tags</code></td>
        <td><code>dict</code></td>
        <td><p>Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_osm_from_view</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">tags</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds OSM entities within the current map view to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        tags (dict): Dict of tags used for finding objects in the selected area. Results returned are the union, not intersection of each individual tag. Each result matches at least one given tag. The dict keys should be OSM tags, (e.g., building, landuse, highway, etc) and the dict values should be either True to retrieve all items with the given tag, or a string to get a single tag-value combination, or a list of strings to get multiple values for the given tag. For example, tags = {building: True} would return all building footprints in the area. tags = {amenity:True, landuse:[retail,commercial], highway:bus_stop} would return all amenities, landuse=retail, landuse=commercial, and highway=bus_stop.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.osm</span> <span class="kn">import</span> <span class="n">osm_gdf_from_bbox</span>

    <span class="n">bounds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span>
            <span class="p">(</span><span class="mf">40.74824858675827</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.98933637940563</span><span class="p">),</span>
            <span class="p">(</span><span class="mf">40.75068694343106</span><span class="p">,</span> <span class="o">-</span><span class="mf">73.98364473187601</span><span class="p">),</span>
        <span class="p">)</span>
    <span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">)</span>

    <span class="n">gdf</span> <span class="o">=</span> <span class="n">osm_gdf_from_bbox</span><span class="p">(</span><span class="n">north</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">west</span><span class="p">,</span> <span class="n">tags</span><span class="p">)</span>
    <span class="n">geojson</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">__geo_interface__</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="o">=</span><span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="o">=</span><span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="o">=</span><span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="o">=</span><span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="o">=</span><span class="n">info_mode</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="n">gdf</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_planet_by_month" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_planet_by_month</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_planet_by_month" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a Planet global mosaic by month to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>month</code></td>
        <td><code>int</code></td>
        <td><p>The month of Planet global mosaic, must be 1-12. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_planet_by_month</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">month</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a Planet global mosaic by month to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        month (int, optional): The month of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">        name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">planet_tile_by_month</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">month</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_planet_by_quarter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_planet_by_quarter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s1">&#39;PLANET_API_KEY&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_planet_by_quarter" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a Planet global mosaic by quarter to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>year</code></td>
        <td><code>int</code></td>
        <td><p>The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</p></td>
        <td><code>2016</code></td>
      </tr>
      <tr>
        <td><code>quarter</code></td>
        <td><code>int</code></td>
        <td><p>The quarter of Planet global mosaic, must be 1-12. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>api_key</code></td>
        <td><code>str</code></td>
        <td><p>The Planet API key. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>token_name</code></td>
        <td><code>str</code></td>
        <td><p>The environment variable name of the API key. Defaults to "PLANET_API_KEY".</p></td>
        <td><code>&#39;PLANET_API_KEY&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_planet_by_quarter</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">year</span><span class="o">=</span><span class="mi">2016</span><span class="p">,</span> <span class="n">quarter</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">api_key</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">token_name</span><span class="o">=</span><span class="s2">&quot;PLANET_API_KEY&quot;</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a Planet global mosaic by quarter to the map. To get a Planet API key, see https://developers.planet.com/quickstart/apis</span>

<span class="sd">    Args:</span>
<span class="sd">        year (int, optional): The year of Planet global mosaic, must be &gt;=2016. Defaults to 2016.</span>
<span class="sd">        quarter (int, optional): The quarter of Planet global mosaic, must be 1-12. Defaults to 1.</span>
<span class="sd">        name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">        api_key (str, optional): The Planet API key. Defaults to None.</span>
<span class="sd">        token_name (str, optional): The environment variable name of the API key. Defaults to &quot;PLANET_API_KEY&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="n">planet_tile_by_quarter</span><span class="p">(</span><span class="n">year</span><span class="p">,</span> <span class="n">quarter</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">api_key</span><span class="p">,</span> <span class="n">token_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_plot_gui" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_plot_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_plot_gui" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds the plot widget to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the widget. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_plot_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds the plot widget to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): Position of the widget. Defaults to &quot;topright&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">.toolbar</span> <span class="kn">import</span> <span class="n">ee_plot_gui</span>

    <span class="n">ee_plot_gui</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_point_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_point_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Marker Cluster&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_point_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a point layer to the map with a popup attribute.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>str, http url, path object or file-like object. Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO)</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>popup</code></td>
        <td><code>str | list</code></td>
        <td><p>Column name(s) to be used for popup. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>A layer name to use. Defaults to "Marker Cluster".</p></td>
        <td><code>&#39;Marker Cluster&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the specified column name does not exist.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the specified column names do not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_point_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a point layer to the map with a popup attribute.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): str, http url, path object or file-like object. Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO)</span>
<span class="sd">        popup (str | list, optional): Column name(s) to be used for popup. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): A layer name to use. Defaults to &quot;Marker Cluster&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the specified column name does not exist.</span>
<span class="sd">        ValueError: If the specified column names do not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">warnings</span>

    <span class="n">warnings</span><span class="o">.</span><span class="n">filterwarnings</span><span class="p">(</span><span class="s2">&quot;ignore&quot;</span><span class="p">)</span>
    <span class="n">check_package</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;geopandas&quot;</span><span class="p">,</span> <span class="n">URL</span><span class="o">=</span><span class="s2">&quot;https://geopandas.org&quot;</span><span class="p">)</span>
    <span class="kn">import</span> <span class="nn">geopandas</span> <span class="k">as</span> <span class="nn">gpd</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.kml&quot;</span><span class="p">:</span>
        <span class="n">gpd</span><span class="o">.</span><span class="n">io</span><span class="o">.</span><span class="n">file</span><span class="o">.</span><span class="n">fiona</span><span class="o">.</span><span class="n">drvsupport</span><span class="o">.</span><span class="n">supported_drivers</span><span class="p">[</span><span class="s2">&quot;KML&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;rw&quot;</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">driver</span><span class="o">=</span><span class="s2">&quot;KML&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">gdf</span> <span class="o">=</span> <span class="n">gpd</span><span class="o">.</span><span class="n">read_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">to_crs</span><span class="p">(</span><span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">)</span>
    <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>
    <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;popup must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">item</span> <span class="ow">in</span> <span class="n">col_names</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;All popup items must be select from: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>

    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span>

    <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]))</span>

    <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">popup</span><span class="p">]</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                    <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="n">label</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">i</span><span class="p">])</span> <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;popup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

            <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                    <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]),</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
            <span class="p">]</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
            <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span> <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span>
        <span class="p">]</span>

    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_points_from_xy" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_points_from_xy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Marker Cluster&#39;</span><span class="p">,</span> <span class="n">color_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">marker_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">icon_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;white&#39;</span><span class="p">],</span> <span class="n">icon_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;info&#39;</span><span class="p">],</span> <span class="n">spin</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_points_from_xy" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a marker cluster to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | pd.DataFrame</code></td>
        <td><p>A csv or Pandas DataFrame containing x, y, z values.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the x values. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the y values. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>popup</code></td>
        <td><code>list</code></td>
        <td><p>A list of column names to be used as the popup. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. Defaults to "Marker Cluster".</p></td>
        <td><code>&#39;Marker Cluster&#39;</code></td>
      </tr>
      <tr>
        <td><code>color_column</code></td>
        <td><code>str</code></td>
        <td><p>The column name for the color values. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>marker_colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of colors to be used for the markers. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>icon_colors</code></td>
        <td><code>list</code></td>
        <td><p>A list of colors to be used for the icons. Defaults to ['white'].</p></td>
        <td><code>[&#39;white&#39;]</code></td>
      </tr>
      <tr>
        <td><code>icon_names</code></td>
        <td><code>list</code></td>
        <td><p>A list of names to be used for the icons. More icons can be found at https://fontawesome.com/v4/icons. Defaults to ['info'].</p></td>
        <td><code>[&#39;info&#39;]</code></td>
      </tr>
      <tr>
        <td><code>spin</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the icon will spin. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>add_legend</code></td>
        <td><code>bool</code></td>
        <td><p>If True, a legend will be added to the map. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_points_from_xy</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">popup</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">,</span>
    <span class="n">color_column</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">marker_colors</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">icon_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;white&quot;</span><span class="p">],</span>
    <span class="n">icon_names</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;info&quot;</span><span class="p">],</span>
    <span class="n">spin</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">add_legend</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | pd.DataFrame): A csv or Pandas DataFrame containing x, y, z values.</span>
<span class="sd">        x (str, optional): The column name for the x values. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The column name for the y values. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        popup (list, optional): A list of column names to be used as the popup. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The name of the layer. Defaults to &quot;Marker Cluster&quot;.</span>
<span class="sd">        color_column (str, optional): The column name for the color values. Defaults to None.</span>
<span class="sd">        marker_colors (list, optional): A list of colors to be used for the markers. Defaults to None.</span>
<span class="sd">        icon_colors (list, optional): A list of colors to be used for the icons. Defaults to [&#39;white&#39;].</span>
<span class="sd">        icon_names (list, optional): A list of names to be used for the icons. More icons can be found at https://fontawesome.com/v4/icons. Defaults to [&#39;info&#39;].</span>
<span class="sd">        spin (bool, optional): If True, the icon will spin. Defaults to False.</span>
<span class="sd">        add_legend (bool, optional): If True, a legend will be added to the map. Defaults to True.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="n">data</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">color_options</span> <span class="o">=</span> <span class="p">[</span>
        <span class="s2">&quot;red&quot;</span><span class="p">,</span>
        <span class="s2">&quot;blue&quot;</span><span class="p">,</span>
        <span class="s2">&quot;green&quot;</span><span class="p">,</span>
        <span class="s2">&quot;purple&quot;</span><span class="p">,</span>
        <span class="s2">&quot;orange&quot;</span><span class="p">,</span>
        <span class="s2">&quot;darkred&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lightred&quot;</span><span class="p">,</span>
        <span class="s2">&quot;beige&quot;</span><span class="p">,</span>
        <span class="s2">&quot;darkblue&quot;</span><span class="p">,</span>
        <span class="s2">&quot;darkgreen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;cadetblue&quot;</span><span class="p">,</span>
        <span class="s2">&quot;darkpurple&quot;</span><span class="p">,</span>
        <span class="s2">&quot;white&quot;</span><span class="p">,</span>
        <span class="s2">&quot;pink&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lightblue&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lightgreen&quot;</span><span class="p">,</span>
        <span class="s2">&quot;gray&quot;</span><span class="p">,</span>
        <span class="s2">&quot;black&quot;</span><span class="p">,</span>
        <span class="s2">&quot;lightgray&quot;</span><span class="p">,</span>
    <span class="p">]</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">):</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">data</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">points_from_xy</span><span class="p">(</span><span class="n">df</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)</span>

    <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">color_column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> does not exist in the dataframe.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">set</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">]))</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">items</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker_colors</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">&gt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">color_options</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is greater than the number of available colors.&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">marker_colors</span> <span class="o">=</span> <span class="n">color_options</span><span class="p">[:</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)]</span>
    <span class="k">elif</span> <span class="n">color_column</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">marker_colors</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">marker_colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_colors</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">icon_colors</span> <span class="o">=</span> <span class="n">icon_colors</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_colors</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_names</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">icon_names</span> <span class="o">=</span> <span class="n">icon_names</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">icon_names</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;The number of unique values in the color column </span><span class="si">{</span><span class="n">color_column</span><span class="si">}</span><span class="s2"> is not equal to the number of available colors.&quot;</span>
            <span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;geometry&quot;</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="n">col_names</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;geometry&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">popup</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;popup must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span>
            <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span><span class="n">item</span> <span class="ow">in</span> <span class="n">col_names</span> <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">)</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;All popup items must be select from: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">popup</span> <span class="o">=</span> <span class="n">col_names</span>

    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">x</span>
    <span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">geometry</span><span class="o">.</span><span class="n">y</span>

    <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="s2">&quot;y&quot;</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="s2">&quot;x&quot;</span><span class="p">]))</span>

    <span class="k">if</span> <span class="n">popup</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">popup</span><span class="p">]</span>

            <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span>
                        <span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])</span>
                    <span class="p">]</span>
                    <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                        <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                        <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                        <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                    <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                    <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">popup</span><span class="p">,</span> <span class="nb">list</span><span class="p">):</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">points</span><span class="p">)):</span>
                <span class="n">label</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
                <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">popup</span><span class="p">:</span>
                    <span class="n">label</span> <span class="o">=</span> <span class="p">(</span>
                        <span class="n">label</span>
                        <span class="o">+</span> <span class="s2">&quot;&lt;b&gt;&quot;</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
                        <span class="o">+</span> <span class="s2">&quot;&lt;/b&gt;&quot;</span>
                        <span class="o">+</span> <span class="s2">&quot;: &quot;</span>
                        <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">item</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
                        <span class="o">+</span> <span class="s2">&quot;&lt;br&gt;&quot;</span>
                    <span class="p">)</span>
                <span class="n">labels</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">label</span><span class="p">)</span>
            <span class="n">df</span><span class="p">[</span><span class="s2">&quot;popup&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">labels</span>

            <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
            <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">):</span>
                <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span>
                        <span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])</span>
                    <span class="p">]</span>
                    <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                        <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                        <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                        <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                        <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                    <span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

                <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                    <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]),</span>
                    <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">marker_color</span> <span class="o">=</span> <span class="n">marker_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                <span class="n">icon_name</span> <span class="o">=</span> <span class="n">icon_names</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                <span class="n">icon_color</span> <span class="o">=</span> <span class="n">icon_colors</span><span class="p">[</span><span class="n">items</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">color_column</span><span class="p">][</span><span class="n">index</span><span class="p">])]</span>
                <span class="n">marker_icon</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">icon_name</span><span class="p">,</span>
                    <span class="n">marker_color</span><span class="o">=</span><span class="n">marker_color</span><span class="p">,</span>
                    <span class="n">icon_color</span><span class="o">=</span><span class="n">icon_color</span><span class="p">,</span>
                    <span class="n">spin</span><span class="o">=</span><span class="n">spin</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">marker_icon</span> <span class="o">=</span> <span class="kc">None</span>

            <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">icon</span><span class="o">=</span><span class="n">marker_icon</span>
            <span class="p">)</span>
            <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">items</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">add_legend</span><span class="p">:</span>
        <span class="n">marker_colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">check_color</span><span class="p">(</span><span class="n">c</span><span class="p">)</span> <span class="k">for</span> <span class="n">c</span> <span class="ow">in</span> <span class="n">marker_colors</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_legend</span><span class="p">(</span>
            <span class="n">title</span><span class="o">=</span><span class="n">color_column</span><span class="o">.</span><span class="n">title</span><span class="p">(),</span> <span class="n">colors</span><span class="o">=</span><span class="n">marker_colors</span><span class="p">,</span> <span class="n">keys</span><span class="o">=</span><span class="n">items</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_raster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Raster&#39;</span><span class="p">,</span> <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_raster" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a local raster dataset to the map.
    If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer) and
    if the raster does not render properly, try installing jupyter-server-proxy using <code>pip install jupyter-server-proxy</code>,
    then running the following code before calling this function. For more info, see https://bit.ly/3JbmF93.</p>
<div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">1</span>
<span class="normal">2</span></pre></div></td><td class="code"><div><pre><span></span><code>import os
os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;
</code></pre></div></td></tr></table></div>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The path to the GeoTIFF file or the URL of the Cloud Optimized GeoTIFF.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>indexes</code></td>
        <td><code>int</code></td>
        <td><p>The band(s) to use. Band indexing starts at 1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>colormap</code></td>
        <td><code>str</code></td>
        <td><p>The name of the colormap from <code>matplotlib</code> to use when plotting a single band. See https://matplotlib.org/stable/gallery/color/colormap_reference.html. Default is greyscale.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to 'Raster'.</p></td>
        <td><code>&#39;Raster&#39;</code></td>
      </tr>
      <tr>
        <td><code>zoom_to_layer</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to zoom to the extent of the layer. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>visible</code></td>
        <td><code>bool</code></td>
        <td><p>Whether the layer is visible. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>array_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments to pass to <code>array_to_memory_file</code> when reading the raster. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">indexes</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">colormap</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Raster&quot;</span><span class="p">,</span>
    <span class="n">zoom_to_layer</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">visible</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">array_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a local raster dataset to the map.</span>
<span class="sd">        If you are using this function in JupyterHub on a remote server (e.g., Binder, Microsoft Planetary Computer) and</span>
<span class="sd">        if the raster does not render properly, try installing jupyter-server-proxy using `pip install jupyter-server-proxy`,</span>
<span class="sd">        then running the following code before calling this function. For more info, see https://bit.ly/3JbmF93.</span>

<span class="sd">        import os</span>
<span class="sd">        os.environ[&#39;LOCALTILESERVER_CLIENT_PREFIX&#39;] = &#39;proxy/{port}&#39;</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The path to the GeoTIFF file or the URL of the Cloud Optimized GeoTIFF.</span>
<span class="sd">        indexes (int, optional): The band(s) to use. Band indexing starts at 1. Defaults to None.</span>
<span class="sd">        colormap (str, optional): The name of the colormap from `matplotlib` to use when plotting a single band. See https://matplotlib.org/stable/gallery/color/colormap_reference.html. Default is greyscale.</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &#39;Raster&#39;.</span>
<span class="sd">        zoom_to_layer (bool, optional): Whether to zoom to the extent of the layer. Defaults to True.</span>
<span class="sd">        visible (bool, optional): Whether the layer is visible. Defaults to True.</span>
<span class="sd">        array_args (dict, optional): Additional arguments to pass to `array_to_memory_file` when reading the raster. Defaults to {}.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">np</span><span class="o">.</span><span class="n">ndarray</span><span class="p">)</span> <span class="ow">or</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">DataArray</span><span class="p">):</span>
        <span class="n">source</span> <span class="o">=</span> <span class="n">array_to_image</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="o">**</span><span class="n">array_args</span><span class="p">)</span>

    <span class="n">tile_layer</span><span class="p">,</span> <span class="n">tile_client</span> <span class="o">=</span> <span class="n">get_local_tile_layer</span><span class="p">(</span>
        <span class="n">source</span><span class="p">,</span>
        <span class="n">indexes</span><span class="o">=</span><span class="n">indexes</span><span class="p">,</span>
        <span class="n">colormap</span><span class="o">=</span><span class="n">colormap</span><span class="p">,</span>
        <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
        <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
        <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
        <span class="n">return_client</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
        <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">tile_layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">visible</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">bounds</span><span class="p">()</span>  <span class="c1"># [ymin, ymax, xmin, xmax]</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span>
        <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span>
    <span class="p">)</span>  <span class="c1"># [minx, miny, maxx, maxy]</span>
    <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>

    <span class="n">arc_add_layer</span><span class="p">(</span><span class="n">tile_layer</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">zoom_to_layer</span><span class="p">:</span>
        <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;tile_layer&quot;</span><span class="p">:</span> <span class="n">tile_layer</span><span class="p">,</span>
        <span class="s2">&quot;tile_client&quot;</span><span class="p">:</span> <span class="n">tile_client</span><span class="p">,</span>
        <span class="s2">&quot;indexes&quot;</span><span class="p">:</span> <span class="n">indexes</span><span class="p">,</span>
        <span class="s2">&quot;band_names&quot;</span><span class="p">:</span> <span class="n">tile_client</span><span class="o">.</span><span class="n">band_names</span><span class="p">,</span>
        <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;LOCAL&quot;</span><span class="p">,</span>
    <span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_remote_tile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_remote_tile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">source</span><span class="p">,</span> <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_remote_tile" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a remote Cloud Optimized GeoTIFF (COG) to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>source</code></td>
        <td><code>str</code></td>
        <td><p>The path to the remote Cloud Optimized GeoTIFF.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>band</code></td>
        <td><code>int</code></td>
        <td><p>The band to use. Band indexing starts at 1. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>str</code></td>
        <td><p>The name of the color palette from <code>palettable</code> to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmin</code></td>
        <td><code>float</code></td>
        <td><p>The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vmax</code></td>
        <td><code>float</code></td>
        <td><p>The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>nodata</code></td>
        <td><code>float</code></td>
        <td><p>The value from the band to use to interpret as not valid data. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_remote_tile</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">source</span><span class="p">,</span>
    <span class="n">band</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">palette</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmin</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">vmax</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">nodata</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a remote Cloud Optimized GeoTIFF (COG) to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        source (str): The path to the remote Cloud Optimized GeoTIFF.</span>
<span class="sd">        band (int, optional): The band to use. Band indexing starts at 1. Defaults to None.</span>
<span class="sd">        palette (str, optional): The name of the color palette from `palettable` to use when plotting a single band. See https://jiffyclub.github.io/palettable. Default is greyscale</span>
<span class="sd">        vmin (float, optional): The minimum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        vmax (float, optional): The maximum value to use when colormapping the palette when plotting a single band. Defaults to None.</span>
<span class="sd">        nodata (float, optional): The value from the band to use to interpret as not valid data. Defaults to None.</span>
<span class="sd">        attribution (str, optional): Attribution for the source raster. This defaults to a message about it being a local file.. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">source</span><span class="p">,</span> <span class="nb">str</span><span class="p">)</span> <span class="ow">and</span> <span class="n">source</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_raster</span><span class="p">(</span>
            <span class="n">source</span><span class="p">,</span>
            <span class="n">band</span><span class="o">=</span><span class="n">band</span><span class="p">,</span>
            <span class="n">palette</span><span class="o">=</span><span class="n">palette</span><span class="p">,</span>
            <span class="n">vmin</span><span class="o">=</span><span class="n">vmin</span><span class="p">,</span>
            <span class="n">vmax</span><span class="o">=</span><span class="n">vmax</span><span class="p">,</span>
            <span class="n">nodata</span><span class="o">=</span><span class="n">nodata</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">layer_name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The source must be a URL.&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_search_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_search_control</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span> <span class="n">property_name</span><span class="o">=</span><span class="s1">&#39;display_name&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topleft&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_search_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a search control to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>marker</code></td>
        <td><code>ipyleaflet.Marker</code></td>
        <td><p>The marker to use. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL to use for the search. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>The zoom level to use. Defaults to 5.</p></td>
        <td><code>5</code></td>
      </tr>
      <tr>
        <td><code>property_name</code></td>
        <td><code>str</code></td>
        <td><p>The property name to use. Defaults to "display_name".</p></td>
        <td><code>&#39;display_name&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the widget. Defaults to "topleft".</p></td>
        <td><code>&#39;topleft&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_search_control</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">marker</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">zoom</span><span class="o">=</span><span class="mi">5</span><span class="p">,</span>
    <span class="n">property_name</span><span class="o">=</span><span class="s2">&quot;display_name&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a search control to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        marker (ipyleaflet.Marker, optional): The marker to use. Defaults to None.</span>
<span class="sd">        url (str, optional): The URL to use for the search. Defaults to None.</span>
<span class="sd">        zoom (int, optional): The zoom level to use. Defaults to 5.</span>
<span class="sd">        property_name (str, optional): The property name to use. Defaults to &quot;display_name&quot;.</span>
<span class="sd">        position (str, optional): The position of the widget. Defaults to &quot;topleft&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">marker</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
            <span class="n">icon</span><span class="o">=</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">AwesomeIcon</span><span class="p">(</span>
                <span class="n">name</span><span class="o">=</span><span class="s2">&quot;check&quot;</span><span class="p">,</span> <span class="n">marker_color</span><span class="o">=</span><span class="s2">&quot;green&quot;</span><span class="p">,</span> <span class="n">icon_color</span><span class="o">=</span><span class="s2">&quot;darkgreen&quot;</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;https://nominatim.openstreetmap.org/search?format=json&amp;q=</span><span class="si">{s}</span><span class="s2">&quot;</span>
    <span class="n">search</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SearchControl</span><span class="p">(</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
        <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span>
        <span class="n">property_name</span><span class="o">=</span><span class="n">property_name</span><span class="p">,</span>
        <span class="n">marker</span><span class="o">=</span><span class="n">marker</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">search</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_shapefile" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_shapefile</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_shp</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_shapefile" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a shapefile to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>The input file path to the shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the shapefile. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided shapefile could not be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_shp</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">in_shp</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a shapefile to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): The input file path to the shapefile.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of the shapefile. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided shapefile could not be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided shapefile could not be found.&quot;</span><span class="p">)</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_shp" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_shp</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_shp</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_shp" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a shapefile to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_shp</code></td>
        <td><code>str</code></td>
        <td><p>The input file path to the shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used.. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding of the shapefile. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The provided shapefile could not be found.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_shp</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">in_shp</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a shapefile to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_shp (str): The input file path to the shapefile.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used.. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding of the shapefile. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The provided shapefile could not be found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">in_shp</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_shp</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The provided shapefile could not be found.&quot;</span><span class="p">)</span>

    <span class="n">geojson</span> <span class="o">=</span> <span class="n">shp_to_geojson</span><span class="p">(</span><span class="n">in_shp</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
        <span class="n">geojson</span><span class="p">,</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">style</span><span class="p">,</span>
        <span class="n">hover_style</span><span class="p">,</span>
        <span class="n">style_callback</span><span class="p">,</span>
        <span class="n">fill_colors</span><span class="p">,</span>
        <span class="n">info_mode</span><span class="p">,</span>
        <span class="n">encoding</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_stac_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_stac_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;STAC Layer&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_stac_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a STAC TileLayer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>collection</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>item</code></td>
        <td><code>str</code></td>
        <td><p>The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>assets</code></td>
        <td><code>str | list</code></td>
        <td><p>The Microsoft Planetary Computer STAC asset ID, e.g., ["SR_B7", "SR_B5", "SR_B4"].</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>bands</code></td>
        <td><code>list</code></td>
        <td><p>A list of band names, e.g., ["SR_B7", "SR_B5", "SR_B4"]</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>titiler_endpoint</code></td>
        <td><code>str</code></td>
        <td><p>Titiler endpoint, e.g., "https://titiler.xyz", "https://planetarycomputer.microsoft.com/api/data/v1", "planetary-computer", "pc". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use for the layer. Defaults to 'STAC Layer'.</p></td>
        <td><code>&#39;STAC Layer&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_stac_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">collection</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">item</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">assets</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">bands</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">titiler_endpoint</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;STAC Layer&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a STAC TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): HTTP URL to a STAC item, e.g., https://canada-spot-ortho.s3.amazonaws.com/canada_spot_orthoimages/canada_spot5_orthoimages/S5_2007/S5_11055_6057_20070622/S5_11055_6057_20070622.json</span>
<span class="sd">        collection (str): The Microsoft Planetary Computer STAC collection ID, e.g., landsat-8-c2-l2.</span>
<span class="sd">        item (str): The Microsoft Planetary Computer STAC item ID, e.g., LC08_L2SP_047027_20201204_02_T1.</span>
<span class="sd">        assets (str | list): The Microsoft Planetary Computer STAC asset ID, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;].</span>
<span class="sd">        bands (list): A list of band names, e.g., [&quot;SR_B7&quot;, &quot;SR_B5&quot;, &quot;SR_B4&quot;]</span>
<span class="sd">        titiler_endpoint (str, optional): Titiler endpoint, e.g., &quot;https://titiler.xyz&quot;, &quot;https://planetarycomputer.microsoft.com/api/data/v1&quot;, &quot;planetary-computer&quot;, &quot;pc&quot;. Defaults to None.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to &#39;STAC Layer&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">tile_url</span> <span class="o">=</span> <span class="n">stac_tile</span><span class="p">(</span>
        <span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">assets</span><span class="p">,</span> <span class="n">bands</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span>
    <span class="p">)</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">stac_bounds</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">collection</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">titiler_endpoint</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">tile_url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">,</span> <span class="n">opacity</span><span class="p">,</span> <span class="n">shown</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;cog_layer_dict&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span> <span class="o">=</span> <span class="p">{}</span>

    <span class="k">if</span> <span class="n">assets</span> <span class="ow">is</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">bands</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">assets</span> <span class="o">=</span> <span class="n">bands</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;url&quot;</span><span class="p">:</span> <span class="n">url</span><span class="p">,</span>
        <span class="s2">&quot;collection&quot;</span><span class="p">:</span> <span class="n">collection</span><span class="p">,</span>
        <span class="s2">&quot;item&quot;</span><span class="p">:</span> <span class="n">item</span><span class="p">,</span>
        <span class="s2">&quot;assets&quot;</span><span class="p">:</span> <span class="n">assets</span><span class="p">,</span>
        <span class="s2">&quot;bounds&quot;</span><span class="p">:</span> <span class="n">bounds</span><span class="p">,</span>
        <span class="s2">&quot;titiler_endpoint&quot;</span><span class="p">:</span> <span class="n">titiler_endpoint</span><span class="p">,</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;STAC&quot;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">cog_layer_dict</span><span class="p">[</span><span class="n">name</span><span class="p">]</span> <span class="o">=</span> <span class="n">params</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_styled_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_styled_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_styled_vector" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a styled vector to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>An ee.FeatureCollection.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>column</code></td>
        <td><code>str</code></td>
        <td><p>The column name to use for styling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>palette</code></td>
        <td><code>list | dict</code></td>
        <td><p>The palette (e.g., list of colors or a dict containing label and color pairs) to use for styling.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The name to be used for the new layer. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_styled_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">column</span><span class="p">,</span>
    <span class="n">palette</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a styled vector to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object): An ee.FeatureCollection.</span>
<span class="sd">        column (str): The column name to use for styling.</span>
<span class="sd">        palette (list | dict): The palette (e.g., list of colors or a dict containing label and color pairs) to use for styling.</span>
<span class="sd">        layer_name (str, optional): The name to be used for the new layer. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="kn">from</span> <span class="nn">.colormaps</span> <span class="kn">import</span> <span class="n">get_palette</span>

        <span class="n">count</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
        <span class="n">palette</span> <span class="o">=</span> <span class="n">get_palette</span><span class="p">(</span><span class="n">palette</span><span class="p">,</span> <span class="n">count</span><span class="p">)</span>

    <span class="n">styled_vector</span> <span class="o">=</span> <span class="n">vector_styling</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">palette</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
        <span class="n">styled_vector</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="o">**</span><span class="p">{</span><span class="s2">&quot;styleProperty&quot;</span><span class="p">:</span> <span class="s2">&quot;style&quot;</span><span class="p">}),</span>
        <span class="p">{},</span>
        <span class="n">layer_name</span><span class="p">,</span>
        <span class="n">shown</span><span class="p">,</span>
        <span class="n">opacity</span><span class="p">,</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_text" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_text</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">text</span><span class="p">,</span> <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">fontcolor</span><span class="o">=</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">background</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bg_color</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">,</span> <span class="n">border_radius</span><span class="o">=</span><span class="s1">&#39;5px&#39;</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_text" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add text to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>text</code></td>
        <td><code>str</code></td>
        <td><p>The text to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>fontsize</code></td>
        <td><code>int</code></td>
        <td><p>The font size. Defaults to 20.</p></td>
        <td><code>20</code></td>
      </tr>
      <tr>
        <td><code>fontcolor</code></td>
        <td><code>str</code></td>
        <td><p>The font color. Defaults to "black".</p></td>
        <td><code>&#39;black&#39;</code></td>
      </tr>
      <tr>
        <td><code>bold</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use bold font. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>padding</code></td>
        <td><code>str</code></td>
        <td><p>The padding. Defaults to "5px".</p></td>
        <td><code>&#39;5px&#39;</code></td>
      </tr>
      <tr>
        <td><code>background</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to use background. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>bg_color</code></td>
        <td><code>str</code></td>
        <td><p>The background color. Defaults to "white".</p></td>
        <td><code>&#39;white&#39;</code></td>
      </tr>
      <tr>
        <td><code>border_radius</code></td>
        <td><code>str</code></td>
        <td><p>The border radius. Defaults to "5px".</p></td>
        <td><code>&#39;5px&#39;</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the widget. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_text</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">text</span><span class="p">,</span>
    <span class="n">fontsize</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">fontcolor</span><span class="o">=</span><span class="s2">&quot;black&quot;</span><span class="p">,</span>
    <span class="n">bold</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">background</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">bg_color</span><span class="o">=</span><span class="s2">&quot;white&quot;</span><span class="p">,</span>
    <span class="n">border_radius</span><span class="o">=</span><span class="s2">&quot;5px&quot;</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add text to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        text (str): The text to add.</span>
<span class="sd">        fontsize (int, optional): The font size. Defaults to 20.</span>
<span class="sd">        fontcolor (str, optional): The font color. Defaults to &quot;black&quot;.</span>
<span class="sd">        bold (bool, optional): Whether to use bold font. Defaults to False.</span>
<span class="sd">        padding (str, optional): The padding. Defaults to &quot;5px&quot;.</span>
<span class="sd">        background (bool, optional): Whether to use background. Defaults to True.</span>
<span class="sd">        bg_color (str, optional): The background color. Defaults to &quot;white&quot;.</span>
<span class="sd">        border_radius (str, optional): The border radius. Defaults to &quot;5px&quot;.</span>
<span class="sd">        position (str, optional): The position of the widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">background</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">; font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">; background-color: </span><span class="si">{</span><span class="n">bg_color</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        border-radius: </span><span class="si">{</span><span class="n">border_radius</span><span class="si">}</span><span class="s2">;&quot;&gt;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&lt;/div&gt;&quot;&quot;&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">text</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;&quot;&quot;&lt;div style=&quot;font-size: </span><span class="si">{</span><span class="n">fontsize</span><span class="si">}</span><span class="s2">px; color: </span><span class="si">{</span><span class="n">fontcolor</span><span class="si">}</span><span class="s2">; font-weight: </span><span class="si">{</span><span class="s1">&#39;bold&#39;</span><span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="n">bold</span><span class="w"> </span><span class="k">else</span><span class="w"> </span><span class="s1">&#39;normal&#39;</span><span class="si">}</span><span class="s2">;</span>
<span class="s2">        padding: </span><span class="si">{</span><span class="n">padding</span><span class="si">}</span><span class="s2">;&quot;&gt;</span><span class="si">{</span><span class="n">text</span><span class="si">}</span><span class="s2">&lt;/div&gt;&quot;&quot;&quot;</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add_html</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_tile_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_tile_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="o">=</span><span class="s1">&#39;https://</span><span class="si">{s}</span><span class="s1">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s1">/</span><span class="si">{x}</span><span class="s1">/</span><span class="si">{y}</span><span class="s1">.png&#39;</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_tile_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a TileLayer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the tile layer. Defaults to
'https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png'.</p></td>
        <td><code>&#39;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use for the layer. Defaults to 'Untitled'.</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution to use. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should
be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_tile_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;https://</span><span class="si">{s}</span><span class="s2">.tile.openstreetmap.org/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">.png&quot;</span><span class="p">,</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">attribution</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a TileLayer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str, optional): The URL of the tile layer. Defaults to</span>
<span class="sd">            &#39;https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png&#39;.</span>
<span class="sd">        name (str, optional): The layer name to use for the layer. Defaults to &#39;Untitled&#39;.</span>
<span class="sd">        attribution (str, optional): The attribution to use. Defaults to &#39;&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should</span>
<span class="sd">            be on by default. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">if</span> <span class="s2">&quot;max_native_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_native_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">tile_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">tile_layer</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to add the specified TileLayer.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_time_slider" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_time_slider</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Time series&#39;</span><span class="p">,</span> <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">time_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">slider_length</span><span class="o">=</span><span class="s1">&#39;150px&#39;</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_time_slider" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a time slider to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>ee.Image | ee.ImageCollection</code></td>
        <td><p>The Image or ImageCollection to visualize.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters to use for visualizing image. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry | ee.FeatureCollection</code></td>
        <td><p>The region to visualize.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to be used. Defaults to "Time series".</p></td>
        <td><code>&#39;Time series&#39;</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>The list of labels to be used for the time series. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>time_interval</code></td>
        <td><code>int</code></td>
        <td><p>Time interval in seconds. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position to place the time slider, can be any of ['topleft', 'topright', 'bottomleft', 'bottomright']. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>slider_length</code></td>
        <td><code>str</code></td>
        <td><p>Length of the time slider. Defaults to "150px".</p></td>
        <td><code>&#39;150px&#39;</code></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>The date format to use. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of layers. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>TypeError</code></td>
        <td><p>If the ee_object is not ee.Image | ee.ImageCollection.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_time_slider</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Time series&quot;</span><span class="p">,</span>
    <span class="n">labels</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">time_interval</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">slider_length</span><span class="o">=</span><span class="s2">&quot;150px&quot;</span><span class="p">,</span>
    <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a time slider to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (ee.Image | ee.ImageCollection): The Image or ImageCollection to visualize.</span>
<span class="sd">        vis_params (dict, optional): Visualization parameters to use for visualizing image. Defaults to {}.</span>
<span class="sd">        region (ee.Geometry | ee.FeatureCollection): The region to visualize.</span>
<span class="sd">        layer_name (str, optional): The layer name to be used. Defaults to &quot;Time series&quot;.</span>
<span class="sd">        labels (list, optional): The list of labels to be used for the time series. Defaults to None.</span>
<span class="sd">        time_interval (int, optional): Time interval in seconds. Defaults to 1.</span>
<span class="sd">        position (str, optional): Position to place the time slider, can be any of [&#39;topleft&#39;, &#39;topright&#39;, &#39;bottomleft&#39;, &#39;bottomright&#39;]. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        slider_length (str, optional): Length of the time slider. Defaults to &quot;150px&quot;.</span>
<span class="sd">        date_format (str, optional): The date format to use. Defaults to &#39;YYYY-MM-dd&#39;.</span>
<span class="sd">        opacity (float, optional): The opacity of layers. Defaults to 1.0.</span>

<span class="sd">    Raises:</span>
<span class="sd">        TypeError: If the ee_object is not ee.Image | ee.ImageCollection.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">threading</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">(</span>
            <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">b</span><span class="p">:</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="n">b</span><span class="p">]))</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The length of labels must be equal to the number of bands in the image.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">band_names</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">):</span>
                <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clip</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>
            <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">region</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">FeatureCollection</span><span class="p">):</span>
                <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">img</span><span class="p">:</span> <span class="n">img</span><span class="o">.</span><span class="n">clipToCollection</span><span class="p">(</span><span class="n">region</span><span class="p">))</span>

        <span class="k">if</span> <span class="n">labels</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">!=</span> <span class="nb">int</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                    <span class="s2">&quot;The length of labels must be equal to the number of images in the ImageCollection.&quot;</span>
                <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">ee_object</span><span class="o">.</span><span class="n">aggregate_array</span><span class="p">(</span><span class="s2">&quot;system:time_start&quot;</span><span class="p">)</span>
                <span class="o">.</span><span class="n">map</span><span class="p">(</span><span class="k">lambda</span> <span class="n">d</span><span class="p">:</span> <span class="n">ee</span><span class="o">.</span><span class="n">Date</span><span class="p">(</span><span class="n">d</span><span class="p">)</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">date_format</span><span class="p">))</span>
                <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">TypeError</span><span class="p">(</span><span class="s2">&quot;The ee_object must be an ee.Image or ee.ImageCollection&quot;</span><span class="p">)</span>

    <span class="c1"># if labels is not None:</span>
    <span class="c1">#     size = len(labels)</span>
    <span class="c1"># else:</span>
    <span class="c1">#     size = ee_object.size().getInfo()</span>
    <span class="c1">#     labels = [str(i) for i in range(1, size + 1)]</span>

    <span class="n">first</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">first</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toBands</span><span class="p">(),</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">first</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="s2">&quot;Image X&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>

    <span class="n">slider</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">IntSlider</span><span class="p">(</span>
        <span class="nb">min</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span>
        <span class="nb">max</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">),</span>
        <span class="n">readout</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">continuous_update</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">slider_length</span><span class="p">),</span>
    <span class="p">)</span>
    <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="n">labels</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 5px 0px 5px&quot;</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">play_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;play&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Play the time slider&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">pause_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;pause&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Pause the time slider&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">close_btn</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Button</span><span class="p">(</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the time slider&quot;</span><span class="p">,</span>
        <span class="n">button_style</span><span class="o">=</span><span class="s2">&quot;primary&quot;</span><span class="p">,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="s2">&quot;32px&quot;</span><span class="p">),</span>
    <span class="p">)</span>

    <span class="n">play_chk</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Checkbox</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>

    <span class="n">slider_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HBox</span><span class="p">([</span><span class="n">slider</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">play_btn</span><span class="p">,</span> <span class="n">pause_btn</span><span class="p">,</span> <span class="n">close_btn</span><span class="p">])</span>

    <span class="k">def</span> <span class="nf">play_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="kn">import</span> <span class="nn">time</span>

        <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">True</span>

        <span class="k">def</span> <span class="nf">work</span><span class="p">(</span><span class="n">slider</span><span class="p">):</span>
            <span class="k">while</span> <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span><span class="p">:</span>
                <span class="k">if</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">&lt;</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">):</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">+=</span> <span class="mi">1</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="mi">1</span>
                <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">time_interval</span><span class="p">)</span>

        <span class="n">thread</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">work</span><span class="p">,</span> <span class="n">args</span><span class="o">=</span><span class="p">(</span><span class="n">slider</span><span class="p">,))</span>
        <span class="n">thread</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">pause_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="n">play_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">play_click</span><span class="p">)</span>
    <span class="n">pause_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">pause_click</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">slider_changed</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>
        <span class="n">index</span> <span class="o">=</span> <span class="n">slider</span><span class="o">.</span><span class="n">value</span> <span class="o">-</span> <span class="mi">1</span>
        <span class="n">label</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">]</span>
        <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">index</span><span class="p">))</span>
        <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="o">.</span><span class="n">toBands</span><span class="p">(),</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="s2">&quot;Image X&quot;</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>

    <span class="n">slider</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">slider_changed</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">close_click</span><span class="p">(</span><span class="n">b</span><span class="p">):</span>
        <span class="n">play_chk</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">toolbar_reset</span><span class="p">()</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_ee_layer</span><span class="p">(</span><span class="s2">&quot;Image X&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_ee_layer</span><span class="p">(</span><span class="n">layer_name</span><span class="p">)</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span><span class="p">)</span>
        <span class="n">slider_widget</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">close_btn</span><span class="o">.</span><span class="n">on_click</span><span class="p">(</span><span class="n">close_click</span><span class="p">)</span>

    <span class="n">slider_ctrl</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">slider_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">slider_ctrl</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">slider_ctrl</span> <span class="o">=</span> <span class="n">slider_ctrl</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_toolbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_toolbar" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a toolbar to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the toolbar. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_toolbar</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a toolbar to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        position (str, optional): The position of the toolbar. Defaults to &quot;topright&quot;.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="s2">&quot;toolbar&quot;</span><span class="p">,</span> <span class="n">position</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_vector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_vector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Untitled&#39;</span><span class="p">,</span> <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">style</span><span class="o">=</span><span class="p">{},</span> <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span> <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;black&#39;</span><span class="p">],</span> <span class="n">info_mode</span><span class="o">=</span><span class="s1">&#39;on_hover&#39;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_vector" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds any geopandas-supported vector dataset to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to "Untitled".</p></td>
        <td><code>&#39;Untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>to_ee</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to convert the GeoJSON to ee.FeatureCollection. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>bbox</code></td>
        <td><code>tuple | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>mask</code></td>
        <td><code>dict | GeoDataFrame or GeoSeries | shapely Geometry</code></td>
        <td><p>Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>rows</code></td>
        <td><code>int or slice</code></td>
        <td><p>Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>style</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary specifying the style to be used. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>hover_style</code></td>
        <td><code>dict</code></td>
        <td><p>Hover style dictionary. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>style_callback</code></td>
        <td><code>function</code></td>
        <td><p>Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>fill_colors</code></td>
        <td><code>list</code></td>
        <td><p>The random colors to use for filling polygons. Defaults to ["black"].</p></td>
        <td><code>[&#39;black&#39;]</code></td>
      </tr>
      <tr>
        <td><code>info_mode</code></td>
        <td><code>str</code></td>
        <td><p>Displays the attributes by either on_hover or on_click. Any value other than "on_hover" or "on_click" will be treated as None. Defaults to "on_hover".</p></td>
        <td><code>&#39;on_hover&#39;</code></td>
      </tr>
      <tr>
        <td><code>encoding</code></td>
        <td><code>str</code></td>
        <td><p>The encoding to use to read the file. Defaults to "utf-8".</p></td>
        <td><code>&#39;utf-8&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_vector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Untitled&quot;</span><span class="p">,</span>
    <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">bbox</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">mask</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">rows</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">hover_style</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">style_callback</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">fill_colors</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;black&quot;</span><span class="p">],</span>
    <span class="n">info_mode</span><span class="o">=</span><span class="s2">&quot;on_hover&quot;</span><span class="p">,</span>
    <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds any geopandas-supported vector dataset to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): Either the absolute or relative path to the file or URL to be opened, or any object with a read() method (such as an open file or StringIO).</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &quot;Untitled&quot;.</span>
<span class="sd">        to_ee (bool, optional): Whether to convert the GeoJSON to ee.FeatureCollection. Defaults to False.</span>
<span class="sd">        bbox (tuple | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter features by given bounding box, GeoSeries, GeoDataFrame or a shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with mask. Defaults to None.</span>
<span class="sd">        mask (dict | GeoDataFrame or GeoSeries | shapely Geometry, optional): Filter for features that intersect with the given dict-like geojson geometry, GeoSeries, GeoDataFrame or shapely geometry. CRS mis-matches are resolved if given a GeoSeries or GeoDataFrame. Cannot be used with bbox. Defaults to None.</span>
<span class="sd">        rows (int or slice, optional): Load in specific rows by passing an integer (first n rows) or a slice() object.. Defaults to None.</span>
<span class="sd">        style (dict, optional): A dictionary specifying the style to be used. Defaults to {}.</span>
<span class="sd">        hover_style (dict, optional): Hover style dictionary. Defaults to {}.</span>
<span class="sd">        style_callback (function, optional): Styling function that is called for each feature, and should return the feature style. This styling function takes the feature as argument. Defaults to None.</span>
<span class="sd">        fill_colors (list, optional): The random colors to use for filling polygons. Defaults to [&quot;black&quot;].</span>
<span class="sd">        info_mode (str, optional): Displays the attributes by either on_hover or on_click. Any value other than &quot;on_hover&quot; or &quot;on_click&quot; will be treated as None. Defaults to &quot;on_hover&quot;.</span>
<span class="sd">        encoding (str, optional): The encoding to use to read the file. Defaults to &quot;utf-8&quot;.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">github_raw_url</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">vector_to_ee</span><span class="p">(</span>
            <span class="n">filename</span><span class="p">,</span>
            <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span>
            <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
            <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
            <span class="n">geodesic</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">filename</span><span class="p">)[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;.shp&quot;</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_shapefile</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="p">,</span>
                <span class="n">style</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="p">,</span>
                <span class="n">fill_colors</span><span class="p">,</span>
                <span class="n">info_mode</span><span class="p">,</span>
                <span class="n">encoding</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">elif</span> <span class="n">ext</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;.json&quot;</span><span class="p">,</span> <span class="s2">&quot;.geojson&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="p">,</span>
                <span class="n">style</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="p">,</span>
                <span class="n">fill_colors</span><span class="p">,</span>
                <span class="n">info_mode</span><span class="p">,</span>
                <span class="n">encoding</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">geojson</span> <span class="o">=</span> <span class="n">vector_to_geojson</span><span class="p">(</span>
                <span class="n">filename</span><span class="p">,</span>
                <span class="n">bbox</span><span class="o">=</span><span class="n">bbox</span><span class="p">,</span>
                <span class="n">mask</span><span class="o">=</span><span class="n">mask</span><span class="p">,</span>
                <span class="n">rows</span><span class="o">=</span><span class="n">rows</span><span class="p">,</span>
                <span class="n">epsg</span><span class="o">=</span><span class="s2">&quot;4326&quot;</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="bp">self</span><span class="o">.</span><span class="n">add_geojson</span><span class="p">(</span>
                <span class="n">geojson</span><span class="p">,</span>
                <span class="n">layer_name</span><span class="p">,</span>
                <span class="n">style</span><span class="p">,</span>
                <span class="n">hover_style</span><span class="p">,</span>
                <span class="n">style_callback</span><span class="p">,</span>
                <span class="n">fill_colors</span><span class="p">,</span>
                <span class="n">info_mode</span><span class="p">,</span>
                <span class="n">encoding</span><span class="p">,</span>
            <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_velocity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_velocity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">zonal_speed</span><span class="p">,</span> <span class="n">meridional_speed</span><span class="p">,</span> <span class="n">latitude_dimension</span><span class="o">=</span><span class="s1">&#39;lat&#39;</span><span class="p">,</span> <span class="n">longitude_dimension</span><span class="o">=</span><span class="s1">&#39;lon&#39;</span><span class="p">,</span> <span class="n">level_dimension</span><span class="o">=</span><span class="s1">&#39;lev&#39;</span><span class="p">,</span> <span class="n">level_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">time_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">velocity_scale</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span> <span class="n">max_velocity</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">display_options</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Velocity&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_velocity" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a velocity layer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>data</code></td>
        <td><code>str | xr.Dataset</code></td>
        <td><p>The data to use for the velocity layer. It can be a file path to a NetCDF file or an xarray Dataset.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zonal_speed</code></td>
        <td><code>str</code></td>
        <td><p>Name of the zonal speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>meridional_speed</code></td>
        <td><code>str</code></td>
        <td><p>Name of the meridional speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>latitude_dimension</code></td>
        <td><code>str</code></td>
        <td><p>Name of the latitude dimension in the dataset. Defaults to 'lat'.</p></td>
        <td><code>&#39;lat&#39;</code></td>
      </tr>
      <tr>
        <td><code>longitude_dimension</code></td>
        <td><code>str</code></td>
        <td><p>Name of the longitude dimension in the dataset. Defaults to 'lon'.</p></td>
        <td><code>&#39;lon&#39;</code></td>
      </tr>
      <tr>
        <td><code>level_dimension</code></td>
        <td><code>str</code></td>
        <td><p>Name of the level dimension in the dataset. Defaults to 'lev'.</p></td>
        <td><code>&#39;lev&#39;</code></td>
      </tr>
      <tr>
        <td><code>level_index</code></td>
        <td><code>int</code></td>
        <td><p>The index of the level dimension to display. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>time_index</code></td>
        <td><code>int</code></td>
        <td><p>The index of the time dimension to display. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>velocity_scale</code></td>
        <td><code>float</code></td>
        <td><p>The scale of the velocity. Defaults to 0.01.</p></td>
        <td><code>0.01</code></td>
      </tr>
      <tr>
        <td><code>max_velocity</code></td>
        <td><code>int</code></td>
        <td><p>The maximum velocity to display. Defaults to 20.</p></td>
        <td><code>20</code></td>
      </tr>
      <tr>
        <td><code>display_options</code></td>
        <td><code>dict</code></td>
        <td><p>The display options for the velocity layer. Defaults to {}. See https://bit.ly/3uf8t6w.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Layer name to use . Defaults to 'Velocity'.</p></td>
        <td><code>&#39;Velocity&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ImportError</code></td>
        <td><p>If the xarray package is not installed.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the data is not a NetCDF file or an xarray Dataset.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_velocity</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">data</span><span class="p">,</span>
    <span class="n">zonal_speed</span><span class="p">,</span>
    <span class="n">meridional_speed</span><span class="p">,</span>
    <span class="n">latitude_dimension</span><span class="o">=</span><span class="s2">&quot;lat&quot;</span><span class="p">,</span>
    <span class="n">longitude_dimension</span><span class="o">=</span><span class="s2">&quot;lon&quot;</span><span class="p">,</span>
    <span class="n">level_dimension</span><span class="o">=</span><span class="s2">&quot;lev&quot;</span><span class="p">,</span>
    <span class="n">level_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">time_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">velocity_scale</span><span class="o">=</span><span class="mf">0.01</span><span class="p">,</span>
    <span class="n">max_velocity</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">display_options</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Velocity&quot;</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a velocity layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        data (str | xr.Dataset): The data to use for the velocity layer. It can be a file path to a NetCDF file or an xarray Dataset.</span>
<span class="sd">        zonal_speed (str): Name of the zonal speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</span>
<span class="sd">        meridional_speed (str): Name of the meridional speed in the dataset. See https://en.wikipedia.org/wiki/Zonal_and_meridional_flow.</span>
<span class="sd">        latitude_dimension (str, optional): Name of the latitude dimension in the dataset. Defaults to &#39;lat&#39;.</span>
<span class="sd">        longitude_dimension (str, optional): Name of the longitude dimension in the dataset. Defaults to &#39;lon&#39;.</span>
<span class="sd">        level_dimension (str, optional): Name of the level dimension in the dataset. Defaults to &#39;lev&#39;.</span>
<span class="sd">        level_index (int, optional): The index of the level dimension to display. Defaults to 0.</span>
<span class="sd">        time_index (int, optional): The index of the time dimension to display. Defaults to 0.</span>
<span class="sd">        velocity_scale (float, optional): The scale of the velocity. Defaults to 0.01.</span>
<span class="sd">        max_velocity (int, optional): The maximum velocity to display. Defaults to 20.</span>
<span class="sd">        display_options (dict, optional): The display options for the velocity layer. Defaults to {}. See https://bit.ly/3uf8t6w.</span>
<span class="sd">        name (str, optional): Layer name to use . Defaults to &#39;Velocity&#39;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ImportError: If the xarray package is not installed.</span>
<span class="sd">        ValueError: If the data is not a NetCDF file or an xarray Dataset.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">xarray</span> <span class="k">as</span> <span class="nn">xr</span>
        <span class="kn">from</span> <span class="nn">ipyleaflet.velocity</span> <span class="kn">import</span> <span class="n">Velocity</span>
    <span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ImportError</span><span class="p">(</span>
            <span class="s2">&quot;The xarray package is required to add a velocity layer. &quot;</span>
            <span class="s2">&quot;Please install it with `pip install xarray`.&quot;</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">data</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">download_file</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">xr</span><span class="o">.</span><span class="n">open_dataset</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">xr</span><span class="o">.</span><span class="n">Dataset</span><span class="p">):</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">data</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The data must be a file path or xarray dataset.&quot;</span><span class="p">)</span>

    <span class="n">coords</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">ds</span><span class="o">.</span><span class="n">coords</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>

    <span class="c1"># Rasterio does not handle time or levels. So we must drop them</span>
    <span class="k">if</span> <span class="s2">&quot;time&quot;</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">time</span><span class="o">=</span><span class="n">time_index</span><span class="p">,</span> <span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">params</span> <span class="o">=</span> <span class="p">{</span><span class="n">level_dimension</span><span class="p">:</span> <span class="n">level_index</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">level_dimension</span> <span class="ow">in</span> <span class="n">coords</span><span class="p">:</span>
        <span class="n">ds</span> <span class="o">=</span> <span class="n">ds</span><span class="o">.</span><span class="n">isel</span><span class="p">(</span><span class="n">drop</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">params</span><span class="p">)</span>

    <span class="n">wind</span> <span class="o">=</span> <span class="n">Velocity</span><span class="p">(</span>
        <span class="n">data</span><span class="o">=</span><span class="n">ds</span><span class="p">,</span>
        <span class="n">zonal_speed</span><span class="o">=</span><span class="n">zonal_speed</span><span class="p">,</span>
        <span class="n">meridional_speed</span><span class="o">=</span><span class="n">meridional_speed</span><span class="p">,</span>
        <span class="n">latitude_dimension</span><span class="o">=</span><span class="n">latitude_dimension</span><span class="p">,</span>
        <span class="n">longitude_dimension</span><span class="o">=</span><span class="n">longitude_dimension</span><span class="p">,</span>
        <span class="n">velocity_scale</span><span class="o">=</span><span class="n">velocity_scale</span><span class="p">,</span>
        <span class="n">max_velocity</span><span class="o">=</span><span class="n">max_velocity</span><span class="p">,</span>
        <span class="n">display_options</span><span class="o">=</span><span class="n">display_options</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wind</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_widget" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">widget_icon</span><span class="o">=</span><span class="s1">&#39;gear&#39;</span><span class="p">,</span> <span class="n">close_button_icon</span><span class="o">=</span><span class="s1">&#39;times&#39;</span><span class="p">,</span> <span class="n">widget_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">close_button_args</span><span class="o">=</span><span class="p">{},</span> <span class="n">display_widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_widget" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a widget (e.g., text, HTML, figure) to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>content</code></td>
        <td><code>str | ipywidgets.Widget | object</code></td>
        <td><p>The widget to add.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the widget. Defaults to "bottomright".</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_header</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a header with close buttons to the widget. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>opened</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to open the toolbar. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>show_close_button</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the close button. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>widget_icon</code></td>
        <td><code>str</code></td>
        <td><p>The icon name for the toolbar button. Defaults to 'gear'.</p></td>
        <td><code>&#39;gear&#39;</code></td>
      </tr>
      <tr>
        <td><code>close_button_icon</code></td>
        <td><code>str</code></td>
        <td><p>The icon name for the close button. Defaults to "times".</p></td>
        <td><code>&#39;times&#39;</code></td>
      </tr>
      <tr>
        <td><code>widget_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments to pass to the toolbar button. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>close_button_args</code></td>
        <td><code>dict</code></td>
        <td><p>Additional arguments to pass to the close button. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>display_widget</code></td>
        <td><code>ipywidgets.Widget</code></td>
        <td><p>The widget to be displayed when the toolbar is clicked.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td></td>
        <td><p>Additional arguments to pass to the HTML or Output widgets</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_widget</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">content</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">add_header</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">opened</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">show_close_button</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">widget_icon</span><span class="o">=</span><span class="s2">&quot;gear&quot;</span><span class="p">,</span>
    <span class="n">close_button_icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
    <span class="n">widget_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">close_button_args</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">display_widget</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a widget (e.g., text, HTML, figure) to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        content (str | ipywidgets.Widget | object): The widget to add.</span>
<span class="sd">        position (str, optional): The position of the widget. Defaults to &quot;bottomright&quot;.</span>
<span class="sd">        add_header (bool, optional): Whether to add a header with close buttons to the widget. Defaults to False.</span>
<span class="sd">        opened (bool, optional): Whether to open the toolbar. Defaults to True.</span>
<span class="sd">        show_close_button (bool, optional): Whether to show the close button. Defaults to True.</span>
<span class="sd">        widget_icon (str, optional): The icon name for the toolbar button. Defaults to &#39;gear&#39;.</span>
<span class="sd">        close_button_icon (str, optional): The icon name for the close button. Defaults to &quot;times&quot;.</span>
<span class="sd">        widget_args (dict, optional): Additional arguments to pass to the toolbar button. Defaults to {}.</span>
<span class="sd">        close_button_args (dict, optional): Additional arguments to pass to the close button. Defaults to {}.</span>
<span class="sd">        display_widget (ipywidgets.Widget, optional): The widget to be displayed when the toolbar is clicked.</span>
<span class="sd">        **kwargs: Additional arguments to pass to the HTML or Output widgets</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="n">allowed_positions</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;topleft&quot;</span><span class="p">,</span> <span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="s2">&quot;bottomleft&quot;</span><span class="p">,</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">position</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_positions</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;position must be one of </span><span class="si">{</span><span class="n">allowed_positions</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="s2">&quot;layout&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;layout&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">add_header</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">content</span>

            <span class="n">widget_template</span><span class="p">(</span>
                <span class="n">widget</span><span class="p">,</span>
                <span class="n">opened</span><span class="p">,</span>
                <span class="n">show_close_button</span><span class="p">,</span>
                <span class="n">widget_icon</span><span class="p">,</span>
                <span class="n">close_button_icon</span><span class="p">,</span>
                <span class="n">widget_args</span><span class="p">,</span>
                <span class="n">close_button_args</span><span class="p">,</span>
                <span class="n">display_widget</span><span class="p">,</span>
                <span class="bp">self</span><span class="p">,</span>
                <span class="n">position</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">content</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
                <span class="k">with</span> <span class="n">widget</span><span class="p">:</span>
                    <span class="n">display</span><span class="p">(</span><span class="n">content</span><span class="p">)</span>
            <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Error adding widget: </span><span class="si">{</span><span class="n">e</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_wms_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_wms_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">layers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">attribution</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s1">&#39;image/png&#39;</span><span class="p">,</span> <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_wms_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a WMS layer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>The URL of the WMS web service.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>layers</code></td>
        <td><code>str</code></td>
        <td><p>Comma-separated list of WMS layers to show.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use on the layer control. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>attribution</code></td>
        <td><code>str</code></td>
        <td><p>The attribution of the data layer. Defaults to ''.</p></td>
        <td><code>&#39;&#39;</code></td>
      </tr>
      <tr>
        <td><code>format</code></td>
        <td><code>str</code></td>
        <td><p>WMS image format (use image/png for layers with transparency). Defaults to 'image/png'.</p></td>
        <td><code>&#39;image/png&#39;</code></td>
      </tr>
      <tr>
        <td><code>transparent</code></td>
        <td><code>bool</code></td>
        <td><p>If True, the WMS service will return images with transparency. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity of the layer. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_wms_layer</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">url</span><span class="p">,</span>
    <span class="n">layers</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">,</span>
    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;image/png&quot;</span><span class="p">,</span>
    <span class="n">transparent</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span>
    <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a WMS layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): The URL of the WMS web service.</span>
<span class="sd">        layers (str): Comma-separated list of WMS layers to show.</span>
<span class="sd">        name (str, optional): The layer name to use on the layer control. Defaults to None.</span>
<span class="sd">        attribution (str, optional): The attribution of the data layer. Defaults to &#39;&#39;.</span>
<span class="sd">        format (str, optional): WMS image format (use image/png for layers with transparency). Defaults to &#39;image/png&#39;.</span>
<span class="sd">        transparent (bool, optional): If True, the WMS service will return images with transparency. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The opacity of the layer. Defaults to 1.0.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">name</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">layers</span><span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">wms_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WMSLayer</span><span class="p">(</span>
            <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
            <span class="n">layers</span><span class="o">=</span><span class="n">layers</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">,</span>
            <span class="n">attribution</span><span class="o">=</span><span class="n">attribution</span><span class="p">,</span>
            <span class="nb">format</span><span class="o">=</span><span class="nb">format</span><span class="p">,</span>
            <span class="n">transparent</span><span class="o">=</span><span class="n">transparent</span><span class="p">,</span>
            <span class="n">opacity</span><span class="o">=</span><span class="n">opacity</span><span class="p">,</span>
            <span class="n">visible</span><span class="o">=</span><span class="n">shown</span><span class="p">,</span>
            <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">wms_layer</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to add the specified WMS TileLayer.&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_xy_data" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_xy_data</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">in_csv</span><span class="p">,</span> <span class="n">x</span><span class="o">=</span><span class="s1">&#39;longitude&#39;</span><span class="p">,</span> <span class="n">y</span><span class="o">=</span><span class="s1">&#39;latitude&#39;</span><span class="p">,</span> <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">layer_name</span><span class="o">=</span><span class="s1">&#39;Marker cluster&#39;</span><span class="p">,</span> <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_xy_data" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds points from a CSV file containing lat/lon information and display data on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>in_csv</code></td>
        <td><code>str</code></td>
        <td><p>The file path to the input CSV file.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>x</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing longitude coordinates. Defaults to "longitude".</p></td>
        <td><code>&#39;longitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing latitude coordinates. Defaults to "latitude".</p></td>
        <td><code>&#39;latitude&#39;</code></td>
      </tr>
      <tr>
        <td><code>label</code></td>
        <td><code>str</code></td>
        <td><p>The name of the column containing label information to used for marker popup. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The layer name to use. Defaults to "Marker cluster".</p></td>
        <td><code>&#39;Marker cluster&#39;</code></td>
      </tr>
      <tr>
        <td><code>to_ee</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to convert the csv to an ee.FeatureCollection.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>FileNotFoundError</code></td>
        <td><p>The specified input csv does not exist.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The specified x column does not exist.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The specified y column does not exist.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The specified label column does not exist.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_xy_data</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">in_csv</span><span class="p">,</span>
    <span class="n">x</span><span class="o">=</span><span class="s2">&quot;longitude&quot;</span><span class="p">,</span>
    <span class="n">y</span><span class="o">=</span><span class="s2">&quot;latitude&quot;</span><span class="p">,</span>
    <span class="n">label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="o">=</span><span class="s2">&quot;Marker cluster&quot;</span><span class="p">,</span>
    <span class="n">to_ee</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds points from a CSV file containing lat/lon information and display data on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        in_csv (str): The file path to the input CSV file.</span>
<span class="sd">        x (str, optional): The name of the column containing longitude coordinates. Defaults to &quot;longitude&quot;.</span>
<span class="sd">        y (str, optional): The name of the column containing latitude coordinates. Defaults to &quot;latitude&quot;.</span>
<span class="sd">        label (str, optional): The name of the column containing label information to used for marker popup. Defaults to None.</span>
<span class="sd">        layer_name (str, optional): The layer name to use. Defaults to &quot;Marker cluster&quot;.</span>
<span class="sd">        to_ee (bool, optional): Whether to convert the csv to an ee.FeatureCollection.</span>

<span class="sd">    Raises:</span>
<span class="sd">        FileNotFoundError: The specified input csv does not exist.</span>
<span class="sd">        ValueError: The specified x column does not exist.</span>
<span class="sd">        ValueError: The specified y column does not exist.</span>
<span class="sd">        ValueError: The specified label column does not exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">in_csv</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)):</span>
        <span class="k">raise</span> <span class="ne">FileNotFoundError</span><span class="p">(</span><span class="s2">&quot;The specified input csv does not exist.&quot;</span><span class="p">)</span>

    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="n">in_csv</span><span class="p">)</span>
    <span class="n">col_names</span> <span class="o">=</span> <span class="n">df</span><span class="o">.</span><span class="n">columns</span><span class="o">.</span><span class="n">values</span><span class="o">.</span><span class="n">tolist</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">x</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;x must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">y</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;y must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="p">(</span><span class="n">label</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">col_names</span><span class="p">):</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;label must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">col_names</span><span class="p">)</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>

    <span class="k">if</span> <span class="n">to_ee</span><span class="p">:</span>
        <span class="n">fc</span> <span class="o">=</span> <span class="n">csv_to_ee</span><span class="p">(</span><span class="n">in_csv</span><span class="p">,</span> <span class="n">latitude</span><span class="o">=</span><span class="n">y</span><span class="p">,</span> <span class="n">longitude</span><span class="o">=</span><span class="n">x</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">fc</span><span class="p">,</span> <span class="p">{},</span> <span class="n">layer_name</span><span class="p">)</span>

    <span class="k">else</span><span class="p">:</span>
        <span class="n">points</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">df</span><span class="p">[</span><span class="n">y</span><span class="p">],</span> <span class="n">df</span><span class="p">[</span><span class="n">x</span><span class="p">]))</span>

        <span class="k">if</span> <span class="n">label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">df</span><span class="p">[</span><span class="n">label</span><span class="p">]</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
                    <span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span>
                    <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                    <span class="n">popup</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])),</span>
                <span class="p">)</span>
                <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">point</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">points</span><span class="p">)</span>
            <span class="p">]</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">markers</span> <span class="o">=</span> <span class="p">[</span>
                <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">point</span><span class="p">,</span> <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
                <span class="k">for</span> <span class="n">point</span> <span class="ow">in</span> <span class="n">points</span>
            <span class="p">]</span>

        <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">markers</span><span class="o">=</span><span class="n">markers</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">layer_name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;default&quot;</span><span class="p">}</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.add_xyz_service" class="doc doc-heading">
<code class="highlight language-python"><span class="n">add_xyz_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.add_xyz_service" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Add a XYZ tile layer to the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>provider</code></td>
        <td><code>str</code></td>
        <td><p>A tile layer name starts with xyz or qms. For example, xyz.OpenTopoMap,</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>The provider is not valid. It must start with xyz or qms.</p></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">add_xyz_service</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">provider</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Add a XYZ tile layer to the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        provider (str): A tile layer name starts with xyz or qms. For example, xyz.OpenTopoMap,</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: The provider is not valid. It must start with xyz or qms.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">xyzservices.providers</span> <span class="k">as</span> <span class="nn">xyz</span>
    <span class="kn">from</span> <span class="nn">xyzservices</span> <span class="kn">import</span> <span class="n">TileProvider</span>

    <span class="k">if</span> <span class="n">provider</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;xyz&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">provider</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">xyz_provider</span> <span class="o">=</span> <span class="n">xyz</span><span class="o">.</span><span class="n">flatten</span><span class="p">()[</span><span class="n">name</span><span class="p">]</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">xyz_provider</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="n">xyz_provider</span><span class="o">.</span><span class="n">attribution</span>
        <span class="k">if</span> <span class="n">attribution</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">)</span>
    <span class="k">elif</span> <span class="n">provider</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;qms&quot;</span><span class="p">):</span>
        <span class="n">name</span> <span class="o">=</span> <span class="n">provider</span><span class="p">[</span><span class="mi">4</span><span class="p">:]</span>
        <span class="n">qms_provider</span> <span class="o">=</span> <span class="n">TileProvider</span><span class="o">.</span><span class="n">from_qms</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
        <span class="n">url</span> <span class="o">=</span> <span class="n">qms_provider</span><span class="o">.</span><span class="n">build_url</span><span class="p">()</span>
        <span class="n">attribution</span> <span class="o">=</span> <span class="n">qms_provider</span><span class="o">.</span><span class="n">attribution</span>
        <span class="k">if</span> <span class="n">attribution</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;&quot;</span><span class="p">:</span>
            <span class="n">attribution</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add_tile_layer</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">attribution</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;The provider </span><span class="si">{</span><span class="n">provider</span><span class="si">}</span><span class="s2"> is not valid. It must start with xyz or qms.&quot;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.basemap_demo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.basemap_demo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A demo for using geemap basemaps.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">basemap_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A demo for using geemap basemaps.&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add_basemap_widget</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.centerObject" class="doc doc-heading">
<code class="highlight language-python"><span class="n">centerObject</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.centerObject" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Centers the map view on a given object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>Union[ee.Element, ee.Geometry]</code></td>
        <td><p>An Earth Engine object to
center on a geometry, image or feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The zoom level, from 1 to 24. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ee</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">],</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Union[ee.Element, ee.Geometry]): An Earth Engine object to</span>
<span class="sd">            center on a geometry, image or feature.</span>
<span class="sd">        zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">center_object</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="n">bds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.center_object" class="doc doc-heading">
<code class="highlight language-python"><span class="n">center_object</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.center_object" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Centers the map view on a given object.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>Union[ee.Element, ee.Geometry]</code></td>
        <td><p>An Earth Engine object to
center on a geometry, image or feature.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The zoom level, from 1 to 24. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">center_object</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">ee</span><span class="o">.</span><span class="n">Element</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">],</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Centers the map view on a given object.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Union[ee.Element, ee.Geometry]): An Earth Engine object to</span>
<span class="sd">            center on a geometry, image or feature.</span>
<span class="sd">        zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">center_object</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="n">bds</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">bds</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.create_vis_widget" class="doc doc-heading">
<code class="highlight language-python"><span class="n">create_vis_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_dict</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.create_vis_widget" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Creates a GUI for changing layer visualization parameters interactively.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layer_dict</code></td>
        <td><code>Dict[str, Any]</code></td>
        <td><p>A dictionary containing information about
the layer. It is an element from Map.ee_layers.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">create_vis_widget</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_dict</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a GUI for changing layer visualization parameters interactively.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_dict (Dict[str, Any]): A dictionary containing information about</span>
<span class="sd">            the layer. It is an element from Map.ee_layers.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_add_layer_editor</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">,</span> <span class="n">layer_dict</span><span class="o">=</span><span class="n">layer_dict</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.draw_layer_on_top" class="doc doc-heading">
<code class="highlight language-python"><span class="n">draw_layer_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.draw_layer_on_top" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Move user-drawn feature layer to the top of all layers.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">draw_layer_on_top</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Move user-drawn feature layer to the top of all layers.&quot;&quot;&quot;</span>
    <span class="n">draw_layer_index</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer_index</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Drawn Features&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">draw_layer_index</span> <span class="o">&gt;</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">draw_layer_index</span> <span class="o">&lt;</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">):</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">)</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="p">(</span>
            <span class="n">layers</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">draw_layer_index</span><span class="p">]</span>
            <span class="o">+</span> <span class="n">layers</span><span class="p">[(</span><span class="n">draw_layer_index</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="p">:]</span>
            <span class="o">+</span> <span class="p">[</span><span class="n">layers</span><span class="p">[</span><span class="n">draw_layer_index</span><span class="p">]]</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.extract_values_to_points" class="doc doc-heading">
<code class="highlight language-python"><span class="n">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.extract_values_to_points" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Exports pixel values to a csv file based on user-drawn geometries.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the csv file or shapefile.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">extract_values_to_points</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Exports pixel values to a csv file based on user-drawn geometries.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str): The output file path to the csv file or shapefile.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">csv</span>

    <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">allowed_formats</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;csv&quot;</span><span class="p">,</span> <span class="s2">&quot;shp&quot;</span><span class="p">]</span>
    <span class="n">ext</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>

    <span class="k">if</span> <span class="n">ext</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">allowed_formats</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The output file must be one of the following: </span><span class="si">{}</span><span class="s2">&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">allowed_formats</span><span class="p">)</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="n">out_csv</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;csv&quot;</span>
    <span class="n">out_shp</span> <span class="o">=</span> <span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">]</span> <span class="o">+</span> <span class="s2">&quot;shp&quot;</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>

    <span class="n">count</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">)</span>
    <span class="n">out_list</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">count</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">header</span> <span class="o">=</span> <span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">,</span> <span class="s2">&quot;latitude&quot;</span><span class="p">,</span> <span class="s2">&quot;longitude&quot;</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_labels</span>
        <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">header</span><span class="p">)</span>

        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
            <span class="nb">id</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
            <span class="n">line</span> <span class="o">=</span> <span class="p">[</span><span class="nb">id</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">+</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
            <span class="n">out_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">line</span><span class="p">)</span>

        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">newline</span><span class="o">=</span><span class="s2">&quot;&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">writer</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">writer</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
            <span class="n">writer</span><span class="o">.</span><span class="n">writerows</span><span class="p">(</span><span class="n">out_list</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">ext</span> <span class="o">==</span> <span class="s2">&quot;csv&quot;</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The csv file has been saved to: </span><span class="si">{</span><span class="n">out_csv</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">csv_to_shp</span><span class="p">(</span><span class="n">out_csv</span><span class="p">,</span> <span class="n">out_shp</span><span class="p">)</span>
            <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The shapefile has been saved to: </span><span class="si">{</span><span class="n">out_shp</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.find_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.find_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Finds a layer by name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the layer to find.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>Optional[ipyleaflet.Layer]</code></td>
      <td><p>The ipyleaflet layer object if found, else None.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Layer</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds a layer by name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Optional[ipyleaflet.Layer]: The ipyleaflet layer object if found, else None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="n">layers</span><span class="p">:</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">layer</span>

    <span class="k">return</span> <span class="kc">None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.find_layer_index" class="doc doc-heading">
<code class="highlight language-python"><span class="n">find_layer_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.find_layer_index" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Finds the index of a layer by name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the layer to find.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>int</code></td>
      <td><p>Index of the layer with the specified name, or -1 if not found.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">find_layer_index</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Finds the index of a layer by name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to find.</span>

<span class="sd">    Returns:</span>
<span class="sd">        int: Index of the layer with the specified name, or -1 if not found.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">for</span> <span class="n">index</span><span class="p">,</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">layers</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">layer</span><span class="o">.</span><span class="n">name</span> <span class="o">==</span> <span class="n">name</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">index</span>

    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.getScale" class="doc doc-heading">
<code class="highlight language-python"><span class="n">getScale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.getScale" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns the approximate pixel scale of the current map view, in meters.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>float</code></td>
      <td><p>Map resolution in meters.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.get_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asGeoJSON</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.get_bounds" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns the bounds of the current map view, as a list in the format [west, south, east, north] in degrees.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>asGeoJSON</code></td>
        <td><code>bool</code></td>
        <td><p>If true, returns map bounds as GeoJSON. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>list | dict</code></td>
      <td><p>A list in the format [west, south, east, north] in degrees.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">asGeoJSON</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the bounds of the current map view, as a list in the format [west, south, east, north] in degrees.</span>

<span class="sd">    Args:</span>
<span class="sd">        asGeoJSON (bool, optional): If true, returns map bounds as GeoJSON. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        list | dict: A list in the format [west, south, east, north] in degrees.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_bounds</span><span class="p">(</span><span class="n">as_geo_json</span><span class="o">=</span><span class="n">asGeoJSON</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.get_layer_names" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.get_layer_names" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Gets layer names as a list.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>List[str]</code></td>
      <td><p>A list of layer names.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_layer_names</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">List</span><span class="p">[</span><span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets layer names as a list.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List[str]: A list of layer names.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer_names</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="n">layer_names</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">layer</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">layer_names</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.get_scale" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.get_scale" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Returns the approximate pixel scale of the current map view, in meters.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>float</code></td>
      <td><p>Map resolution in meters.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_scale</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Returns the approximate pixel scale of the current map view, in meters.</span>

<span class="sd">    Returns:</span>
<span class="sd">        float: Map resolution in meters.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">get_scale</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.image_overlay" class="doc doc-heading">
<code class="highlight language-python"><span class="n">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.image_overlay" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Overlays an image from the Internet or locally on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>http URL or local file path to the image.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bounds</code></td>
        <td><code>tuple</code></td>
        <td><p>bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the layer to show on the layer control.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">image_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overlays an image from the Internet or locally on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL or local file path to the image.</span>
<span class="sd">        bounds (tuple): bounding box of the image in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">from</span> <span class="nn">base64</span> <span class="kn">import</span> <span class="n">b64encode</span>
    <span class="kn">from</span> <span class="nn">io</span> <span class="kn">import</span> <span class="n">BytesIO</span>

    <span class="kn">from</span> <span class="nn">PIL</span> <span class="kn">import</span> <span class="n">Image</span><span class="p">,</span> <span class="n">ImageSequence</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">url</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
                <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided file does not exist.&quot;</span><span class="p">)</span>
                <span class="k">return</span>

            <span class="n">ext</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">splitext</span><span class="p">(</span><span class="n">url</span><span class="p">)[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">:]</span>  <span class="c1"># file extension</span>
            <span class="n">image</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">url</span><span class="p">)</span>

            <span class="n">f</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
            <span class="k">if</span> <span class="n">ext</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s2">&quot;gif&quot;</span><span class="p">:</span>
                <span class="n">frames</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="c1"># Loop over each frame in the animated image</span>
                <span class="k">for</span> <span class="n">frame</span> <span class="ow">in</span> <span class="n">ImageSequence</span><span class="o">.</span><span class="n">Iterator</span><span class="p">(</span><span class="n">image</span><span class="p">):</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">frame</span><span class="o">.</span><span class="n">convert</span><span class="p">(</span><span class="s2">&quot;RGBA&quot;</span><span class="p">)</span>
                    <span class="n">b</span> <span class="o">=</span> <span class="n">BytesIO</span><span class="p">()</span>
                    <span class="n">frame</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">b</span><span class="p">,</span> <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;gif&quot;</span><span class="p">)</span>
                    <span class="n">frame</span> <span class="o">=</span> <span class="n">Image</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
                    <span class="n">frames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">frame</span><span class="p">)</span>
                <span class="n">frames</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">save</span><span class="p">(</span>
                    <span class="n">f</span><span class="p">,</span>
                    <span class="nb">format</span><span class="o">=</span><span class="s2">&quot;GIF&quot;</span><span class="p">,</span>
                    <span class="n">save_all</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                    <span class="n">append_images</span><span class="o">=</span><span class="n">frames</span><span class="p">[</span><span class="mi">1</span><span class="p">:],</span>
                    <span class="n">loop</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">image</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ext</span><span class="p">)</span>

            <span class="n">data</span> <span class="o">=</span> <span class="n">b64encode</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">getvalue</span><span class="p">())</span>
            <span class="n">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">.</span><span class="n">decode</span><span class="p">(</span><span class="s2">&quot;ascii&quot;</span><span class="p">)</span>
            <span class="n">url</span> <span class="o">=</span> <span class="s2">&quot;data:image/</span><span class="si">{}</span><span class="s2">;base64,&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">ext</span><span class="p">)</span> <span class="o">+</span> <span class="n">data</span>
        <span class="n">img</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ImageOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">img</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.layer_opacity" class="doc doc-heading">
<code class="highlight language-python"><span class="n">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.layer_opacity" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Changes the opacity of a layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer to change opacity.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The opacity value to set. Defaults to 1.0.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">layer_opacity</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">opacity</span><span class="p">:</span> <span class="nb">float</span> <span class="o">=</span> <span class="mf">1.0</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Changes the opacity of a layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the layer to change opacity.</span>
<span class="sd">        opacity (float, optional): The opacity value to set. Defaults to 1.0.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">opacity</span> <span class="o">=</span> <span class="n">opacity</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.layer_to_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">layer_to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layer_name</span><span class="p">,</span> <span class="n">output</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="s1">&#39;EPSG:3857&#39;</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">region</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.layer_to_image" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Converts a specific layer from Earth Engine to an image file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layer_name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer to convert.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>output</code></td>
        <td><code>str</code></td>
        <td><p>The output file path for the image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>crs</code></td>
        <td><code>str</code></td>
        <td><p>The coordinate reference system (CRS) of the output image. Defaults to "EPSG:3857".</p></td>
        <td><code>&#39;EPSG:3857&#39;</code></td>
      </tr>
      <tr>
        <td><code>scale</code></td>
        <td><code>int</code></td>
        <td><p>The scale of the output image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>region</code></td>
        <td><code>ee.Geometry</code></td>
        <td><p>The region of interest for the conversion. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>The visualization parameters. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments to pass to the <code>download_ee_image</code> function.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>None</code></td>
      <td><p>None</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">layer_to_image</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">layer_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">output</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">crs</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;EPSG:3857&quot;</span><span class="p">,</span>
    <span class="n">scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">region</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">vis_params</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="n">Dict</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">    Converts a specific layer from Earth Engine to an image file.</span>

<span class="sd">    Args:</span>
<span class="sd">        layer_name (str): The name of the layer to convert.</span>
<span class="sd">        output (str): The output file path for the image. Defaults to None.</span>
<span class="sd">        crs (str, optional): The coordinate reference system (CRS) of the output image. Defaults to &quot;EPSG:3857&quot;.</span>
<span class="sd">        scale (int, optional): The scale of the output image. Defaults to None.</span>
<span class="sd">        region (ee.Geometry, optional): The region of interest for the conversion. Defaults to None.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to None.</span>
<span class="sd">        **kwargs: Additional keyword arguments to pass to the `download_ee_image` function.</span>

<span class="sd">    Returns:</span>
<span class="sd">        None</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="n">region</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">b</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">bounds</span>
        <span class="n">west</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">north</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">],</span> <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>
        <span class="n">region</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">BBox</span><span class="p">(</span><span class="n">west</span><span class="p">,</span> <span class="n">south</span><span class="p">,</span> <span class="n">east</span><span class="p">,</span> <span class="n">north</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">scale</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">get_scale</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">layer_name</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Layer </span><span class="si">{</span><span class="n">layer_name</span><span class="si">}</span><span class="s2"> does not exist.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">output</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">output</span> <span class="o">=</span> <span class="n">layer_name</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>

    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">layer_name</span><span class="p">]</span>
    <span class="n">ee_object</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;ee_object&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">vis_params</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">vis_params</span> <span class="o">=</span> <span class="n">layer</span><span class="p">[</span><span class="s2">&quot;vis_params&quot;</span><span class="p">]</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">visualize</span><span class="p">(</span><span class="o">**</span><span class="n">vis_params</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
        <span class="n">geotiff</span> <span class="o">=</span> <span class="n">output</span> <span class="o">+</span> <span class="s2">&quot;.tif&quot;</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">geotiff</span> <span class="o">=</span> <span class="n">output</span>
    <span class="n">download_ee_image</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="n">geotiff</span><span class="p">,</span> <span class="n">region</span><span class="p">,</span> <span class="n">crs</span><span class="o">=</span><span class="n">crs</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">scale</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="n">output</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
        <span class="n">geotiff_to_image</span><span class="p">(</span><span class="n">geotiff</span><span class="p">,</span> <span class="n">output</span><span class="p">)</span>
        <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">geotiff</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.marker_cluster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.marker_cluster" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</p>

<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>object</code></td>
      <td><p>a list of ee.Feature</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">marker_cluster</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds a marker cluster to the map and returns a list of ee.Feature, which can be accessed using Map.ee_marker_cluster.</span>

<span class="sd">    Returns:</span>
<span class="sd">        object: a list of ee.Feature</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
            <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
            <span class="n">geom</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">latlon</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
            <span class="n">feature</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Feature</span><span class="p">(</span><span class="n">geom</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">ee_markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">feature</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
            <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
            <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
        <span class="k">elif</span> <span class="n">kwargs</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;mousemove&quot;</span><span class="p">:</span>
            <span class="k">pass</span>

    <span class="c1"># cursor style: https://www.w3schools.com/cssref/pr_class_cursor.asp</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.plot" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.plot" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Creates a plot based on x-array and y-array data.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>x</code></td>
        <td><code>numpy.ndarray or list</code></td>
        <td><p>The x-coordinates of the plotted line.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>y</code></td>
        <td><code>numpy.ndarray or list</code></td>
        <td><p>The y-coordinates of the plotted line.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>plot_type</code></td>
        <td><code>str</code></td>
        <td><p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overlay</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overlay plotted lines on the figure. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>min_width</code></td>
        <td><code>int</code></td>
        <td><p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_width</code></td>
        <td><code>int</code></td>
        <td><p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>min_height</code></td>
        <td><code>int</code></td>
        <td><p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_height</code></td>
        <td><code>int</code></td>
        <td><p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">plot</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">x</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">y</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Any</span><span class="p">],</span>
    <span class="n">plot_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">min_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a plot based on x-array and y-array data.</span>

<span class="sd">    Args:</span>
<span class="sd">        x (numpy.ndarray or list): The x-coordinates of the plotted line.</span>
<span class="sd">        y (numpy.ndarray or list): The y-coordinates of the plotted line.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_widget&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span>
            <span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;border&quot;</span><span class="p">:</span> <span class="s2">&quot;1px solid black&quot;</span><span class="p">,</span> <span class="s2">&quot;max_width&quot;</span><span class="p">:</span> <span class="s2">&quot;500px&quot;</span><span class="p">}</span>
        <span class="p">)</span>
        <span class="n">plot_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
            <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
            <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
            <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
            <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
            <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>
    <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_height</span> <span class="o">=</span> <span class="mi">300</span>

    <span class="k">if</span> <span class="p">(</span><span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="s2">&quot;markers&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">):</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;markers&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>

    <span class="k">with</span> <span class="n">plot_widget</span><span class="p">:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">fig</span> <span class="o">=</span> <span class="n">plt</span><span class="o">.</span><span class="n">figure</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_width</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>
            <span class="k">if</span> <span class="n">max_height</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">fig</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">max_height</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;px&quot;</span>

            <span class="n">plot_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">overlay</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>

            <span class="k">if</span> <span class="n">plot_type</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="k">if</span> <span class="s2">&quot;marker&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
                    <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;marker&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;circle&quot;</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;bar&quot;</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">bar</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;scatter&quot;</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">scatter</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">plot_type</span> <span class="o">==</span> <span class="s2">&quot;hist&quot;</span><span class="p">:</span>
                <span class="n">plt</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="n">y</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
            <span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>

        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Failed to create plot.&quot;</span><span class="p">)</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.plot_demo" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_demo</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.plot_demo" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>A demo of interactive plotting using random pixel coordinates.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>iterations</code></td>
        <td><code>int</code></td>
        <td><p>How many iterations to run for the demo. Defaults to 20.</p></td>
        <td><code>20</code></td>
      </tr>
      <tr>
        <td><code>plot_type</code></td>
        <td><code>str</code></td>
        <td><p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overlay</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overlay plotted lines on the figure. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>min_width</code></td>
        <td><code>int</code></td>
        <td><p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_width</code></td>
        <td><code>int</code></td>
        <td><p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>min_height</code></td>
        <td><code>int</code></td>
        <td><p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_height</code></td>
        <td><code>int</code></td>
        <td><p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">plot_demo</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">iterations</span><span class="o">=</span><span class="mi">20</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;A demo of interactive plotting using random pixel coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        iterations (int, optional): How many iterations to run for the demo. Defaults to 20.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
    <span class="kn">import</span> <span class="nn">time</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;random_marker&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="s2">&quot;LANDSAT/LE7_TOA_5YEAR/1999_2003&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">select</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">6</span><span class="p">])</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span>
        <span class="n">image</span><span class="p">,</span>
        <span class="p">{</span><span class="s2">&quot;bands&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;B4&quot;</span><span class="p">,</span> <span class="s2">&quot;B3&quot;</span><span class="p">,</span> <span class="s2">&quot;B2&quot;</span><span class="p">],</span> <span class="s2">&quot;gamma&quot;</span><span class="p">:</span> <span class="mf">1.4</span><span class="p">},</span>
        <span class="s2">&quot;LANDSAT/LE7_TOA_5YEAR/1999_2003&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">setCenter</span><span class="p">(</span><span class="o">-</span><span class="mf">50.078877</span><span class="p">,</span> <span class="mf">25.190030</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
    <span class="n">band_names</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
    <span class="c1"># band_count = len(band_names)</span>

    <span class="n">latitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">48</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>
    <span class="n">longitudes</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">random</span><span class="o">.</span><span class="n">uniform</span><span class="p">(</span><span class="o">-</span><span class="mi">121</span><span class="p">,</span> <span class="o">-</span><span class="mi">76</span><span class="p">,</span> <span class="n">size</span><span class="o">=</span><span class="n">iterations</span><span class="p">)</span>

    <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="o">=</span> <span class="n">marker</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">iterations</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">coordinate</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">([</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">]])</span>
            <span class="n">dict_values</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">coordinate</span><span class="p">)</span><span class="o">.</span><span class="n">first</span><span class="p">()</span><span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
            <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
            <span class="n">title</span> <span class="o">=</span> <span class="s2">&quot;</span><span class="si">{}</span><span class="s2">/</span><span class="si">{}</span><span class="s2">: Spectral signature at (</span><span class="si">{}</span><span class="s2">, </span><span class="si">{}</span><span class="s2">)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span>
                <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span>
                <span class="n">iterations</span><span class="p">,</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
                <span class="nb">round</span><span class="p">(</span><span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="mi">2</span><span class="p">),</span>
            <span class="p">)</span>
            <span class="n">marker</span><span class="o">.</span><span class="n">location</span> <span class="o">=</span> <span class="p">(</span><span class="n">latitudes</span><span class="p">[</span><span class="n">i</span><span class="p">],</span> <span class="n">longitudes</span><span class="p">[</span><span class="n">i</span><span class="p">])</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                <span class="n">band_names</span><span class="p">,</span>
                <span class="n">band_values</span><span class="p">,</span>
                <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>
            <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.3</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.plot_raster" class="doc doc-heading">
<code class="highlight language-python"><span class="n">plot_raster</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.plot_raster" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Interactive plotting of Earth Engine data by clicking on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>object</code></td>
        <td><p>The ee.Image or ee.ImageCollection to sample. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>sample_scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the projection to sample in. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>plot_type</code></td>
        <td><code>str</code></td>
        <td><p>The plot type can be one of "None", "bar", "scatter" or "hist". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overlay</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overlay plotted lines on the figure. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to 'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>min_width</code></td>
        <td><code>int</code></td>
        <td><p>Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_width</code></td>
        <td><code>int</code></td>
        <td><p>Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>min_height</code></td>
        <td><code>int</code></td>
        <td><p>Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_height</code></td>
        <td><code>int</code></td>
        <td><p>Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">plot_raster</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">ee_object</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Interactive plotting of Earth Engine data by clicking on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (object, optional): The ee.Image or ee.ImageCollection to sample. Defaults to None.</span>
<span class="sd">        sample_scale (float, optional): A nominal scale in meters of the projection to sample in. Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;, &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure. Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft, bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels), if None it will respect the content size. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_control&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">del</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;random_marker&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">random_marker</span><span class="p">)</span>

    <span class="n">plot_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">(</span><span class="n">layout</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;border&quot;</span><span class="p">:</span> <span class="s2">&quot;1px solid black&quot;</span><span class="p">})</span>
    <span class="n">plot_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">plot_widget</span><span class="p">,</span>
        <span class="n">position</span><span class="o">=</span><span class="n">position</span><span class="p">,</span>
        <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
        <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
        <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
        <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="o">=</span> <span class="n">plot_widget</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_plot_control</span> <span class="o">=</span> <span class="n">plot_control</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">plot_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="s2">&quot;The plot function can only be used on ee.Image or ee.ImageCollection with more than one band.&quot;</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">ee_object</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">)</span> <span class="ow">and</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_raster_layers</span><span class="o">.</span><span class="n">values</span><span class="p">()[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="s2">&quot;ee_object&quot;</span><span class="p">]</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
            <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
        <span class="n">ee_object</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">mosaic</span><span class="p">()</span>
    <span class="k">elif</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="k">if</span> <span class="n">sample_scale</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">sample_scale</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">getScale</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">max_width</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">max_width</span> <span class="o">=</span> <span class="mi">500</span>

    <span class="n">band_names</span> <span class="o">=</span> <span class="n">ee_object</span><span class="o">.</span><span class="n">bandNames</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="n">coordinates</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">markers</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker_cluster</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">handle_interaction</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs2</span><span class="p">):</span>
        <span class="n">latlon</span> <span class="o">=</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;coordinates&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">kwargs2</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;type&quot;</span><span class="p">)</span> <span class="o">==</span> <span class="s2">&quot;click&quot;</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">coordinates</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">latlon</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">last_click</span> <span class="o">=</span> <span class="n">latlon</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">all_clicks</span> <span class="o">=</span> <span class="n">coordinates</span>
                <span class="n">markers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">latlon</span><span class="p">))</span>
                <span class="n">marker_cluster</span><span class="o">.</span><span class="n">markers</span> <span class="o">=</span> <span class="n">markers</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;wait&quot;</span><span class="p">}</span>
                <span class="n">xy</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Geometry</span><span class="o">.</span><span class="n">Point</span><span class="p">(</span><span class="n">latlon</span><span class="p">[::</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
                <span class="n">dict_values</span> <span class="o">=</span> <span class="p">(</span>
                    <span class="n">ee_object</span><span class="o">.</span><span class="n">sample</span><span class="p">(</span><span class="n">xy</span><span class="p">,</span> <span class="n">scale</span><span class="o">=</span><span class="n">sample_scale</span><span class="p">)</span>
                    <span class="o">.</span><span class="n">first</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">toDictionary</span><span class="p">()</span>
                    <span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>
                <span class="p">)</span>
                <span class="n">band_values</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">dict_values</span><span class="o">.</span><span class="n">values</span><span class="p">())</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span>
                    <span class="n">band_names</span><span class="p">,</span>
                    <span class="n">band_values</span><span class="p">,</span>
                    <span class="n">plot_type</span><span class="o">=</span><span class="n">plot_type</span><span class="p">,</span>
                    <span class="n">overlay</span><span class="o">=</span><span class="n">overlay</span><span class="p">,</span>
                    <span class="n">min_width</span><span class="o">=</span><span class="n">min_width</span><span class="p">,</span>
                    <span class="n">max_width</span><span class="o">=</span><span class="n">max_width</span><span class="p">,</span>
                    <span class="n">min_height</span><span class="o">=</span><span class="n">min_height</span><span class="p">,</span>
                    <span class="n">max_height</span><span class="o">=</span><span class="n">max_height</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                    <span class="k">with</span> <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span><span class="p">:</span>
                        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_widget</span><span class="o">.</span><span class="n">outputs</span> <span class="o">=</span> <span class="p">()</span>
                        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;No data for the clicked location.&quot;</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">default_style</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;cursor&quot;</span><span class="p">:</span> <span class="s2">&quot;crosshair&quot;</span><span class="p">}</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">on_interaction</span><span class="p">(</span><span class="n">handle_interaction</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_colorbar" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_colorbar" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes the colorbar from the map.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_colorbar</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes the colorbar from the map.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_colorbar&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_colorbar</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_colorbars" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_colorbars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_colorbars" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes all colorbars from the map.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_colorbars</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes all colorbars from the map.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">widget</span> <span class="o">:=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;colorbar&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;colorbars&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">colorbars</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">colorbar</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">colorbar</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_draw_control" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_draw_control" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes the draw control from the map</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_draw_control</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes the draw control from the map&quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="s2">&quot;draw_control&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_drawn_features" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_drawn_features" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes user-drawn geometries from the map</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_drawn_features</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes user-drawn geometries from the map&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
    <span class="k">if</span> <span class="s2">&quot;Drawn Features&quot;</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;Drawn Features&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_ee_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_ee_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes an Earth Engine layer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the Earth Engine layer to remove.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_ee_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes an Earth Engine layer.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the Earth Engine layer to remove.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">:</span>
        <span class="n">ee_layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="p">[</span><span class="n">name</span><span class="p">][</span><span class="s2">&quot;ee_layer&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">ee_layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="n">ee_layer</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_labels" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_labels" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes all labels from the map.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_labels</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes all labels from the map.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;labels&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">remove_layer</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">labels</span><span class="p">)</span>
        <span class="nb">delattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;labels&quot;</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_last_drawn" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_last_drawn</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_last_drawn" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes last user-drawn geometry from the map</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_last_drawn</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes last user-drawn geometry from the map&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">count</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_drawn_features</span><span class="p">()</span>
        <span class="k">elif</span> <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">count</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">remove_geometry</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_draw_control</span><span class="o">.</span><span class="n">geometries</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_chart_values&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_values</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_chart_points&quot;</span><span class="p">):</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">_chart_points</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
            <span class="c1"># self._chart_labels = None</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_legend" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_legend" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes the legend from the map.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_legend</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes the legend from the map.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_legend&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">_legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_legend</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.remove_legends" class="doc doc-heading">
<code class="highlight language-python"><span class="n">remove_legends</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.remove_legends" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Removes all legends from the map.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">remove_legends</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Removes all legends from the map.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">layer</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">ee_layers</span><span class="o">.</span><span class="n">values</span><span class="p">():</span>
        <span class="k">if</span> <span class="n">widget</span> <span class="o">:=</span> <span class="n">layer</span><span class="o">.</span><span class="n">pop</span><span class="p">(</span><span class="s2">&quot;legend&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">):</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">widget</span><span class="p">)</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;legends&quot;</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">legends</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">legend</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">legend</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.setCenter" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setCenter</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.setCenter" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Centers the map view at a given coordinates with the given zoom level.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>The longitude of the center, in degrees.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>The latitude of the center, in degrees.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The zoom level, from 1 to 24. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.setControlVisibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setControlVisibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.setControlVisibility" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the visibility of the controls on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layerControl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fullscreenControl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>latLngPopup</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.setOptions" class="doc doc-heading">
<code class="highlight language-python"><span class="n">setOptions</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">&#39;HYBRID&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.setOptions" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds Google basemap and controls to the ipyleaflet map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>mapTypeId</code></td>
        <td><code>str</code></td>
        <td><p>A mapTypeId to set the basemap to. Can be
one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select
one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p></td>
        <td><code>&#39;HYBRID&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;HYBRID&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be</span>
<span class="sd">            one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot; to select</span>
<span class="sd">            one of the standard Google Maps API map types. Defaults to &#39;HYBRID&#39;.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mapTypeId</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Google basemaps can only be one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot;.&#39;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.set_center" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.set_center" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Centers the map view at a given coordinates with the given zoom level.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>lon</code></td>
        <td><code>float</code></td>
        <td><p>The longitude of the center, in degrees.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>lat</code></td>
        <td><code>float</code></td>
        <td><p>The latitude of the center, in degrees.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>Optional[int]</code></td>
        <td><p>The zoom level, from 1 to 24. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_center</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">lon</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">lat</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span> <span class="n">zoom</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Centers the map view at a given coordinates with the given zoom level.</span>

<span class="sd">    Args:</span>
<span class="sd">        lon (float): The longitude of the center, in degrees.</span>
<span class="sd">        lat (float): The latitude of the center, in degrees.</span>
<span class="sd">        zoom (Optional[int], optional): The zoom level, from 1 to 24. Defaults to None.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">is_arcpy</span><span class="p">():</span>
        <span class="n">arc_zoom_to_extent</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.set_control_visibility" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_control_visibility</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.set_control_visibility" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets the visibility of the controls on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layerControl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fullscreenControl</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that allows the user to make the map full-screen. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>latLngPopup</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_control_visibility</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">layerControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreenControl</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">latLngPopup</span><span class="o">=</span><span class="kc">True</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets the visibility of the controls on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        layerControl (bool, optional): Whether to show the control that allows the user to toggle layers on/off. Defaults to True.</span>
<span class="sd">        fullscreenControl (bool, optional): Whether to show the control that allows the user to make the map full-screen. Defaults to True.</span>
<span class="sd">        latLngPopup (bool, optional): Whether to show the control that pops up the Lat/lon when the user clicks on the map. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">pass</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.set_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="o">=</span><span class="s1">&#39;HYBRID&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.set_options" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds Google basemap and controls to the ipyleaflet map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>mapTypeId</code></td>
        <td><code>str</code></td>
        <td><p>A mapTypeId to set the basemap to. Can be
one of "ROADMAP", "SATELLITE", "HYBRID" or "TERRAIN" to select
one of the standard Google Maps API map types. Defaults to 'HYBRID'.</p></td>
        <td><code>&#39;HYBRID&#39;</code></td>
      </tr>
      <tr>
        <td><code>**kwargs</code></td>
        <td><code>Any</code></td>
        <td><p>Additional keyword arguments.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mapTypeId</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;HYBRID&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds Google basemap and controls to the ipyleaflet map.</span>

<span class="sd">    Args:</span>
<span class="sd">        mapTypeId (str, optional): A mapTypeId to set the basemap to. Can be</span>
<span class="sd">            one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot; to select</span>
<span class="sd">            one of the standard Google Maps API map types. Defaults to &#39;HYBRID&#39;.</span>
<span class="sd">        **kwargs: Additional keyword arguments.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">mapTypeId</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s1">&#39;Google basemaps can only be one of &quot;ROADMAP&quot;, &quot;SATELLITE&quot;, &quot;HYBRID&quot; or &quot;TERRAIN&quot;.&#39;</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.set_plot_options" class="doc doc-heading">
<code class="highlight language-python"><span class="n">set_plot_options</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">add_marker_cluster</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">sample_scale</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">plot_type</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">overlay</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">min_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">min_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">max_height</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.set_plot_options" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Sets plotting options.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>add_marker_cluster</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a marker cluster.
Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>sample_scale</code></td>
        <td><code>float</code></td>
        <td><p>A nominal scale in meters of the
projection to sample in . Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>plot_type</code></td>
        <td><code>str</code></td>
        <td><p>The plot type can be one of "None", "bar",
"scatter" or "hist". Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>overlay</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to overlay plotted lines on the figure.
Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>position</code></td>
        <td><code>str</code></td>
        <td><p>Position of the control, can be bottomleft,
bottomright, topleft, or topright. Defaults to 'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>min_width</code></td>
        <td><code>int</code></td>
        <td><p>Min width of the widget (in pixels),
if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_width</code></td>
        <td><code>int</code></td>
        <td><p>Max width of the widget (in pixels),
if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>min_height</code></td>
        <td><code>int</code></td>
        <td><p>Min height of the widget (in pixels),
if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>max_height</code></td>
        <td><code>int</code></td>
        <td><p>Max height of the widget (in pixels),
if None it will respect the content size. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">set_plot_options</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">add_marker_cluster</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">sample_scale</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">float</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">plot_type</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">overlay</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span><span class="p">,</span>
    <span class="n">position</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">min_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_width</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">min_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="n">max_height</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">:</span> <span class="n">Any</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Sets plotting options.</span>

<span class="sd">    Args:</span>
<span class="sd">        add_marker_cluster (bool, optional): Whether to add a marker cluster.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        sample_scale (float, optional):  A nominal scale in meters of the</span>
<span class="sd">            projection to sample in . Defaults to None.</span>
<span class="sd">        plot_type (str, optional): The plot type can be one of &quot;None&quot;, &quot;bar&quot;,</span>
<span class="sd">            &quot;scatter&quot; or &quot;hist&quot;. Defaults to None.</span>
<span class="sd">        overlay (bool, optional): Whether to overlay plotted lines on the figure.</span>
<span class="sd">            Defaults to False.</span>
<span class="sd">        position (str, optional): Position of the control, can be bottomleft,</span>
<span class="sd">            bottomright, topleft, or topright. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">        min_width (int, optional): Min width of the widget (in pixels),</span>
<span class="sd">            if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_width (int, optional): Max width of the widget (in pixels),</span>
<span class="sd">            if None it will respect the content size. Defaults to None.</span>
<span class="sd">        min_height (int, optional): Min height of the widget (in pixels),</span>
<span class="sd">            if None it will respect the content size. Defaults to None.</span>
<span class="sd">        max_height (int, optional): Max height of the widget (in pixels),</span>
<span class="sd">            if None it will respect the content size. Defaults to None.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">plot_options_dict</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;add_marker_cluster&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">add_marker_cluster</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;sample_scale&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sample_scale</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;plot_type&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot_type</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;overlay&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">overlay</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;position&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">position</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;min_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;max_width&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_width</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;min_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">min_height</span>
    <span class="n">plot_options_dict</span><span class="p">[</span><span class="s2">&quot;max_height&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">max_height</span>

    <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">plot_options_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">_plot_options</span> <span class="o">=</span> <span class="n">plot_options_dict</span>

    <span class="k">if</span> <span class="ow">not</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_plot_marker_cluster&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">MarkerCluster</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;Marker Cluster&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_marker_cluster</span> <span class="ow">and</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span> <span class="ow">not</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">_plot_marker_cluster</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.show_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">show_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">show</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.show_layer" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Shows or hides a layer on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>Name of the layer to show/hide.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>show</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show or hide the layer. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">show_layer</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">show</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Shows or hides a layer on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): Name of the layer to show/hide.</span>
<span class="sd">        show (bool, optional): Whether to show or hide the layer. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">layer</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">find_layer</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">layer</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layer</span><span class="o">.</span><span class="n">visible</span> <span class="o">=</span> <span class="n">show</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.split_map" class="doc doc-heading">
<code class="highlight language-python"><span class="n">split_map</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_layer</span><span class="o">=</span><span class="s1">&#39;OpenTopoMap&#39;</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="s1">&#39;Esri.WorldTopoMap&#39;</span><span class="p">,</span> <span class="n">zoom_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fullscreen_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">close_button_position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="n">left_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">left_position</span><span class="o">=</span><span class="s1">&#39;bottomleft&#39;</span><span class="p">,</span> <span class="n">right_position</span><span class="o">=</span><span class="s1">&#39;bottomright&#39;</span><span class="p">,</span> <span class="n">widget_layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.split_map" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Adds split map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>left_layer</code></td>
        <td><code>str</code></td>
        <td><p>The layer tile layer. Defaults to 'OpenTopoMap'.</p></td>
        <td><code>&#39;OpenTopoMap&#39;</code></td>
      </tr>
      <tr>
        <td><code>right_layer</code></td>
        <td><code>str</code></td>
        <td><p>The right tile layer. Defaults to 'Esri.WorldTopoMap'.</p></td>
        <td><code>&#39;Esri.WorldTopoMap&#39;</code></td>
      </tr>
      <tr>
        <td><code>zoom_control</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the zoom control. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>fullscreen_control</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the full screen control. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>layer_control</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the layer control. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>add_close_button</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a close button. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
      <tr>
        <td><code>close_button_position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the close button. Defaults to 'topright'.</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
      <tr>
        <td><code>left_label</code></td>
        <td><code>str</code></td>
        <td><p>The label for the left map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>right_label</code></td>
        <td><code>str</code></td>
        <td><p>The label for the right map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>left_position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the left label. Defaults to 'bottomleft'.</p></td>
        <td><code>&#39;bottomleft&#39;</code></td>
      </tr>
      <tr>
        <td><code>right_position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the right label. Defaults to 'bottomright'.</p></td>
        <td><code>&#39;bottomright&#39;</code></td>
      </tr>
      <tr>
        <td><code>widget_layout</code></td>
        <td><code>str</code></td>
        <td><p>The layout of the label widget, such as ipywidgets.Layout(padding="0px 4px 0px 4px"). Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>kwargs</code></td>
        <td></td>
        <td><p>Other arguments for ipyleaflet.TileLayer.</p></td>
        <td><code>{}</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">split_map</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">left_layer</span><span class="o">=</span><span class="s2">&quot;OpenTopoMap&quot;</span><span class="p">,</span>
    <span class="n">right_layer</span><span class="o">=</span><span class="s2">&quot;Esri.WorldTopoMap&quot;</span><span class="p">,</span>
    <span class="n">zoom_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">fullscreen_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="n">close_button_position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">,</span>
    <span class="n">left_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">right_label</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">left_position</span><span class="o">=</span><span class="s2">&quot;bottomleft&quot;</span><span class="p">,</span>
    <span class="n">right_position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span><span class="p">,</span>
    <span class="n">widget_layout</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Adds split map.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_layer (str, optional): The layer tile layer. Defaults to &#39;OpenTopoMap&#39;.</span>
<span class="sd">        right_layer (str, optional): The right tile layer. Defaults to &#39;Esri.WorldTopoMap&#39;.</span>
<span class="sd">        zoom_control (bool, optional): Whether to show the zoom control. Defaults to True.</span>
<span class="sd">        fullscreen_control (bool, optional): Whether to show the full screen control. Defaults to True.</span>
<span class="sd">        layer_control (bool, optional): Whether to show the layer control. Defaults to True.</span>
<span class="sd">        add_close_button (bool, optional): Whether to add a close button. Defaults to False.</span>
<span class="sd">        close_button_position (str, optional): The position of the close button. Defaults to &#39;topright&#39;.</span>
<span class="sd">        left_label (str, optional): The label for the left map. Defaults to None.</span>
<span class="sd">        right_label (str, optional): The label for the right map. Defaults to None.</span>
<span class="sd">        left_position (str, optional): The position of the left label. Defaults to &#39;bottomleft&#39;.</span>
<span class="sd">        right_position (str, optional): The position of the right label. Defaults to &#39;bottomright&#39;.</span>
<span class="sd">        widget_layout (str, optional): The layout of the label widget, such as ipywidgets.Layout(padding=&quot;0px 4px 0px 4px&quot;). Defaults to None.</span>
<span class="sd">        kwargs: Other arguments for ipyleaflet.TileLayer.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="s2">&quot;max_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">if</span> <span class="s2">&quot;max_native_zoom&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;max_native_zoom&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
        <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>

        <span class="k">if</span> <span class="n">zoom_control</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">())</span>
        <span class="k">if</span> <span class="n">fullscreen_control</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

        <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">left_name</span> <span class="o">=</span> <span class="n">left_label</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">left_name</span> <span class="o">=</span> <span class="s2">&quot;Left Layer&quot;</span>

        <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">right_name</span> <span class="o">=</span> <span class="n">right_label</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">right_name</span> <span class="o">=</span> <span class="s2">&quot;Right Layer&quot;</span>

        <span class="k">if</span> <span class="s2">&quot;attribution&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
            <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot; &quot;</span>

        <span class="k">if</span> <span class="n">left_layer</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">left_layer</span> <span class="o">=</span> <span class="n">get_basemap</span><span class="p">(</span><span class="n">left_layer</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_layer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">left_layer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">left_layer</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">left_layer</span><span class="p">)</span>
                <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">left_name</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">left_name</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;left_layer must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> or a string url to a tif file.&quot;</span>
            <span class="p">)</span>

        <span class="k">if</span> <span class="n">right_layer</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">right_layer</span> <span class="o">=</span> <span class="n">get_basemap</span><span class="p">(</span><span class="n">right_layer</span><span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_layer</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">right_layer</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;http&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="n">right_layer</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.tif&quot;</span><span class="p">):</span>
                <span class="n">url</span> <span class="o">=</span> <span class="n">cog_tile</span><span class="p">(</span><span class="n">right_layer</span><span class="p">)</span>
                <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">right_name</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">right_layer</span><span class="p">,</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">right_name</span><span class="p">,</span>
                    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
                <span class="p">)</span>
        <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_layer</span><span class="p">,</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;right_layer must be one of the following: </span><span class="si">{</span><span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span><span class="si">}</span><span class="s2"> or a string url to a tif file.&quot;</span>
            <span class="p">)</span>

        <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
        <span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
        <span class="c1"># self.dragging = False</span>

        <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">widget_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">widget_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
            <span class="n">left_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">left_label</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widget_layout</span><span class="p">)</span>

            <span class="n">left_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                <span class="n">widget</span><span class="o">=</span><span class="n">left_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">left_position</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">widget_layout</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
                <span class="n">widget_layout</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 4px 0px 4px&quot;</span><span class="p">)</span>
            <span class="n">right_widget</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">HTML</span><span class="p">(</span><span class="n">value</span><span class="o">=</span><span class="n">right_label</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widget_layout</span><span class="p">)</span>
            <span class="n">right_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                <span class="n">widget</span><span class="o">=</span><span class="n">right_widget</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">right_position</span>
            <span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

        <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
            <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close split-panel map&quot;</span><span class="p">,</span>
            <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
            <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>

        <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">left_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">right_label</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">remove_control</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">controls</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span><span class="p">[:</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layers</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>

            <span class="c1"># self.dragging = True</span>

        <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
        <span class="n">close_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
            <span class="n">widget</span><span class="o">=</span><span class="n">close_button</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">close_button_position</span>
        <span class="p">)</span>

        <span class="k">if</span> <span class="n">add_close_button</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">close_control</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">layer_control</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">addLayerControl</span><span class="p">()</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The provided layers are invalid!&quot;</span><span class="p">)</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.to_gradio" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_gradio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;500px&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.to_gradio" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Converts the map to an HTML string that can be used in Gradio. Removes unsupported elements, such as
    attribution and any code blocks containing functions. See https://github.com/gradio-app/gradio/issues/3190</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>The width of the map. Defaults to '100%'.</p></td>
        <td><code>&#39;100%&#39;</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the map. Defaults to '500px'.</p></td>
        <td><code>&#39;500px&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>str</code></td>
      <td><p>The HTML string to use in Gradio.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_gradio</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s2">&quot;500px&quot;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts the map to an HTML string that can be used in Gradio. Removes unsupported elements, such as</span>
<span class="sd">        attribution and any code blocks containing functions. See https://github.com/gradio-app/gradio/issues/3190</span>

<span class="sd">    Args:</span>
<span class="sd">        width (str, optional): The width of the map. Defaults to &#39;100%&#39;.</span>
<span class="sd">        height (str, optional): The height of the map. Defaults to &#39;500px&#39;.</span>

<span class="sd">    Returns:</span>
<span class="sd">        str: The HTML string to use in Gradio.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="nb">print</span><span class="p">(</span>
        <span class="s2">&quot;The ipyleaflet plotting backend does not support this function. Please use the folium backend instead.&quot;</span>
    <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.to_html" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_html</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="s1">&#39;My Map&#39;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;100%&#39;</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;880px&#39;</span><span class="p">,</span> <span class="n">add_layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.to_html" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Saves the map as an HTML file.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the HTML file.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>title</code></td>
        <td><code>str</code></td>
        <td><p>The title of the HTML file. Defaults to 'My Map'.</p></td>
        <td><code>&#39;My Map&#39;</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>The width of the map in pixels or percentage. Defaults to '100%'.</p></td>
        <td><code>&#39;100%&#39;</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of the map in pixels. Defaults to '880px'.</p></td>
        <td><code>&#39;880px&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_layer_control</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add the LayersControl. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_html</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">title</span><span class="o">=</span><span class="s2">&quot;My Map&quot;</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="s2">&quot;100%&quot;</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="s2">&quot;880px&quot;</span><span class="p">,</span>
    <span class="n">add_layer_control</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves the map as an HTML file.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str, optional): The output file path to the HTML file.</span>
<span class="sd">        title (str, optional): The title of the HTML file. Defaults to &#39;My Map&#39;.</span>
<span class="sd">        width (str, optional): The width of the map in pixels or percentage. Defaults to &#39;100%&#39;.</span>
<span class="sd">        height (str, optional): The height of the map in pixels. Defaults to &#39;880px&#39;.</span>
<span class="sd">        add_layer_control (bool, optional): Whether to add the LayersControl. Defaults to True.</span>

<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">save</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.html&quot;</span><span class="p">):</span>
                <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="s2">&quot;The output file extension must be html.&quot;</span><span class="p">)</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="n">out_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">out_dir</span><span class="p">):</span>
                <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">out_dir</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">random_string</span><span class="p">()</span> <span class="o">+</span> <span class="s2">&quot;.html&quot;</span><span class="p">)</span>
            <span class="n">save</span> <span class="o">=</span> <span class="kc">False</span>

        <span class="k">if</span> <span class="n">add_layer_control</span> <span class="ow">and</span> <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
            <span class="n">layer_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">LayersControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">)</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layer_control</span> <span class="o">=</span> <span class="n">layer_control</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">layer_control</span><span class="p">)</span>

        <span class="n">before_width</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span>
        <span class="n">before_height</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">width</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;width must be a string.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">width</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;%&quot;</span><span class="p">):</span>
            <span class="k">pass</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;width must end with px or %&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">height</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;height must be a string.&quot;</span><span class="p">)</span>
            <span class="k">return</span>
        <span class="k">elif</span> <span class="ow">not</span> <span class="n">height</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;px&quot;</span><span class="p">):</span>
            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;height must end with px&quot;</span><span class="p">)</span>
            <span class="k">return</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">height</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">save</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">title</span><span class="o">=</span><span class="n">title</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">width</span> <span class="o">=</span> <span class="n">before_width</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">height</span> <span class="o">=</span> <span class="n">before_height</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">save</span><span class="p">:</span>
            <span class="n">out_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
            <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
                <span class="n">lines</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
                <span class="n">out_html</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">lines</span><span class="p">)</span>
            <span class="n">os</span><span class="o">.</span><span class="n">remove</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
            <span class="k">return</span> <span class="n">out_html</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.to_image" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.to_image" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Saves the map as a PNG or JPG image.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>filename</code></td>
        <td><code>str</code></td>
        <td><p>The output file path to the image. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>monitor</code></td>
        <td><code>int</code></td>
        <td><p>The monitor to take the screenshot. Defaults to 1.</p></td>
        <td><code>1</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_image</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">filename</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">monitor</span><span class="o">=</span><span class="mi">1</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Saves the map as a PNG or JPG image.</span>

<span class="sd">    Args:</span>
<span class="sd">        filename (str, optional): The output file path to the image. Defaults to None.</span>
<span class="sd">        monitor (int, optional): The monitor to take the screenshot. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="kc">None</span>

    <span class="k">if</span> <span class="n">filename</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">filename</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">(),</span> <span class="s2">&quot;my_map.png&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.png&quot;</span><span class="p">)</span> <span class="ow">or</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s2">&quot;.jpg&quot;</span><span class="p">):</span>
        <span class="k">pass</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The output file must be a PNG or JPG image.&quot;</span><span class="p">)</span>
        <span class="k">return</span>

    <span class="n">work_dir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">work_dir</span><span class="p">):</span>
        <span class="n">os</span><span class="o">.</span><span class="n">makedirs</span><span class="p">(</span><span class="n">work_dir</span><span class="p">)</span>

    <span class="n">screenshot</span> <span class="o">=</span> <span class="n">screen_capture</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="n">monitor</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">screenshot</span> <span class="o">=</span> <span class="n">screenshot</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.to_streamlit" class="doc doc-heading">
<code class="highlight language-python"><span class="n">to_streamlit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.to_streamlit" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Renders map figure in a Streamlit app.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>width</code></td>
        <td><code>int</code></td>
        <td><p>Width of the map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>int</code></td>
        <td><p>Height of the map. Defaults to 600.</p></td>
        <td><code>600</code></td>
      </tr>
      <tr>
        <td><code>responsive</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to make the map responsive. Defaults to True.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>scrolling</code></td>
        <td><code>bool</code></td>
        <td><p>If True, show a scrollbar when the content is larger than the iframe. Otherwise, do not show a scrollbar. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>streamlit.components</code></td>
      <td><p>components.html object.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">to_streamlit</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="mi">600</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Renders map figure in a Streamlit app.</span>

<span class="sd">    Args:</span>
<span class="sd">        width (int, optional): Width of the map. Defaults to None.</span>
<span class="sd">        height (int, optional): Height of the map. Defaults to 600.</span>
<span class="sd">        responsive (bool, optional): Whether to make the map responsive. Defaults to True.</span>
<span class="sd">        scrolling (bool, optional): If True, show a scrollbar when the content is larger than the iframe. Otherwise, do not show a scrollbar. Defaults to False.</span>

<span class="sd">    Returns:</span>
<span class="sd">        streamlit.components: components.html object.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="kn">import</span> <span class="nn">streamlit.components.v1</span> <span class="k">as</span> <span class="nn">components</span>

        <span class="c1"># if responsive:</span>
        <span class="c1">#     make_map_responsive = &quot;&quot;&quot;</span>
        <span class="c1">#     &lt;style&gt;</span>
        <span class="c1">#     [title~=&quot;st.iframe&quot;] { width: 100%}</span>
        <span class="c1">#     &lt;/style&gt;</span>
        <span class="c1">#     &quot;&quot;&quot;</span>
        <span class="c1">#     st.markdown(make_map_responsive, unsafe_allow_html=True)</span>
        <span class="k">return</span> <span class="n">components</span><span class="o">.</span><span class="n">html</span><span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">to_html</span><span class="p">(),</span> <span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span> <span class="n">scrolling</span><span class="o">=</span><span class="n">scrolling</span>
        <span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.toolbar_reset" class="doc doc-heading">
<code class="highlight language-python"><span class="n">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.toolbar_reset" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Reset the toolbar so that no tool is selected.</p>

        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">toolbar_reset</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Reset the toolbar so that no tool is selected.&quot;&quot;&quot;</span>
    <span class="k">if</span> <span class="nb">hasattr</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="s2">&quot;_toolbar&quot;</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_toolbar</span><span class="o">.</span><span class="n">reset</span><span class="p">()</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.ts_inspector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ts_inspector</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">left_ts</span><span class="p">,</span> <span class="n">left_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span> <span class="n">left_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span> <span class="n">right_ts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;130px&#39;</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="s1">&#39;YYYY-MM-dd&#39;</span><span class="p">,</span> <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.ts_inspector" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Creates a split-panel map for inspecting timeseries images.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>left_ts</code></td>
        <td><code>object</code></td>
        <td><p>An ee.ImageCollection to show on the left panel.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>left_names</code></td>
        <td><code>list</code></td>
        <td><p>A list of names to show under the left dropdown.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>left_vis</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters for the left layer. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>left_index</code></td>
        <td><code>int</code></td>
        <td><p>The index of the left layer to show. Defaults to 0.</p></td>
        <td><code>0</code></td>
      </tr>
      <tr>
        <td><code>right_ts</code></td>
        <td><code>object</code></td>
        <td><p>An ee.ImageCollection to show on the right panel.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>right_names</code></td>
        <td><code>list</code></td>
        <td><p>A list of names to show under the right dropdown.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>right_vis</code></td>
        <td><code>dict</code></td>
        <td><p>Visualization parameters for the right layer. Defaults to {}.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>right_index</code></td>
        <td><code>int</code></td>
        <td><p>The index of the right layer to show. Defaults to -1.</p></td>
        <td><code>-1</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>The width of the dropdown list. Defaults to '130px'.</p></td>
        <td><code>&#39;130px&#39;</code></td>
      </tr>
      <tr>
        <td><code>date_format</code></td>
        <td><code>str</code></td>
        <td><p>The date format to show in the dropdown. Defaults to 'YYYY-MM-dd'.</p></td>
        <td><code>&#39;YYYY-MM-dd&#39;</code></td>
      </tr>
      <tr>
        <td><code>add_close_button</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to show the close button. Defaults to False.</p></td>
        <td><code>False</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ts_inspector</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span>
    <span class="n">left_ts</span><span class="p">,</span>
    <span class="n">left_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">left_vis</span><span class="o">=</span><span class="p">{},</span>
    <span class="n">left_index</span><span class="o">=</span><span class="mi">0</span><span class="p">,</span>
    <span class="n">right_ts</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">right_names</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">right_vis</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">right_index</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="s2">&quot;130px&quot;</span><span class="p">,</span>
    <span class="n">date_format</span><span class="o">=</span><span class="s2">&quot;YYYY-MM-dd&quot;</span><span class="p">,</span>
    <span class="n">add_close_button</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a split-panel map for inspecting timeseries images.</span>

<span class="sd">    Args:</span>
<span class="sd">        left_ts (object): An ee.ImageCollection to show on the left panel.</span>
<span class="sd">        left_names (list): A list of names to show under the left dropdown.</span>
<span class="sd">        left_vis (dict, optional): Visualization parameters for the left layer. Defaults to {}.</span>
<span class="sd">        left_index (int, optional): The index of the left layer to show. Defaults to 0.</span>
<span class="sd">        right_ts (object): An ee.ImageCollection to show on the right panel.</span>
<span class="sd">        right_names (list): A list of names to show under the right dropdown.</span>
<span class="sd">        right_vis (dict, optional): Visualization parameters for the right layer. Defaults to {}.</span>
<span class="sd">        right_index (int, optional): The index of the right layer to show. Defaults to -1.</span>
<span class="sd">        width (str, optional): The width of the dropdown list. Defaults to &#39;130px&#39;.</span>
<span class="sd">        date_format (str, optional): The date format to show in the dropdown. Defaults to &#39;YYYY-MM-dd&#39;.</span>
<span class="sd">        add_close_button (bool, optional): Whether to show the close button. Defaults to False.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">controls</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">controls</span>
    <span class="n">layers</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">layers</span>

    <span class="k">if</span> <span class="n">left_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">left_names</span> <span class="o">=</span> <span class="n">image_dates</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">date_format</span><span class="o">=</span><span class="n">date_format</span><span class="p">)</span><span class="o">.</span><span class="n">getInfo</span><span class="p">()</span>

    <span class="k">if</span> <span class="n">right_ts</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">right_ts</span> <span class="o">=</span> <span class="n">left_ts</span>

    <span class="k">if</span> <span class="n">right_names</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">right_names</span> <span class="o">=</span> <span class="n">left_names</span>

    <span class="k">if</span> <span class="n">right_vis</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">right_vis</span> <span class="o">=</span> <span class="n">left_vis</span>

    <span class="n">left_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>
    <span class="n">right_count</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">right_ts</span><span class="o">.</span><span class="n">size</span><span class="p">()</span><span class="o">.</span><span class="n">getInfo</span><span class="p">())</span>

    <span class="k">if</span> <span class="n">left_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">left_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The number of images in left_ts must match the number of layer names in left_names.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>
    <span class="k">if</span> <span class="n">right_count</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">right_names</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span>
            <span class="s2">&quot;The number of images in right_ts must match the number of layer names in right_names.&quot;</span>
        <span class="p">)</span>
        <span class="k">return</span>

    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Esri&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Esri.WorldStreetMap&quot;</span><span class="p">,</span>
    <span class="p">)</span>
    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
        <span class="n">url</span><span class="o">=</span><span class="s2">&quot;https://server.arcgisonline.com/ArcGIS/rest/services/World_Street_Map/MapServer/tile/</span><span class="si">{z}</span><span class="s2">/</span><span class="si">{y}</span><span class="s2">/</span><span class="si">{x}</span><span class="s2">&quot;</span><span class="p">,</span>
        <span class="n">attribution</span><span class="o">=</span><span class="s2">&quot;Esri&quot;</span><span class="p">,</span>
        <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Esri.WorldStreetMap&quot;</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">clear_controls</span><span class="p">()</span>
    <span class="n">left_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">left_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">right_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span><span class="n">options</span><span class="o">=</span><span class="n">right_names</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span>
    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">width</span>
    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">layout</span><span class="o">.</span><span class="n">max_width</span> <span class="o">=</span> <span class="n">width</span>

    <span class="n">left_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">left_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span>
    <span class="p">)</span>
    <span class="n">right_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">right_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span>
    <span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ScaleControl</span><span class="p">(</span><span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomleft&quot;</span><span class="p">))</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

    <span class="k">def</span> <span class="nf">left_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">left_dropdown_index</span> <span class="o">=</span> <span class="n">left_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">left_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">left_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">left_dropdown_index</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">left_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">left_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The left_ts argument must be an ImageCollection.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">left_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">left_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">left_image</span><span class="p">)</span>

                <span class="n">left_image</span> <span class="o">=</span> <span class="n">EELeafletTileLayer</span><span class="p">(</span>
                    <span class="n">left_image</span><span class="p">,</span> <span class="n">left_vis</span><span class="p">,</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_dropdown_index</span><span class="p">]</span>
                <span class="p">)</span>
                <span class="n">left_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">left_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">left_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right_dropdown_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">right_dropdown_index</span> <span class="o">=</span> <span class="n">right_dropdown</span><span class="o">.</span><span class="n">index</span>
        <span class="k">if</span> <span class="n">right_dropdown_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">right_dropdown_index</span> <span class="o">&gt;=</span> <span class="mi">0</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">toList</span><span class="p">(</span><span class="n">left_ts</span><span class="o">.</span><span class="n">size</span><span class="p">())</span><span class="o">.</span><span class="n">get</span><span class="p">(</span>
                        <span class="n">right_dropdown_index</span>
                    <span class="p">)</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_ts</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">List</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">right_ts</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">right_dropdown_index</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;The left_ts argument must be an ImageCollection.&quot;</span><span class="p">)</span>
                    <span class="k">return</span>

                <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">ImageCollection</span><span class="p">):</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="o">.</span><span class="n">mosaic</span><span class="p">())</span>
                <span class="k">elif</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">right_image</span><span class="p">,</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">):</span>
                    <span class="k">pass</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="n">right_image</span> <span class="o">=</span> <span class="n">ee</span><span class="o">.</span><span class="n">Image</span><span class="p">(</span><span class="n">right_image</span><span class="p">)</span>

                <span class="n">right_image</span> <span class="o">=</span> <span class="n">EELeafletTileLayer</span><span class="p">(</span>
                    <span class="n">right_image</span><span class="p">,</span>
                    <span class="n">right_vis</span><span class="p">,</span>
                    <span class="n">right_names</span><span class="p">[</span><span class="n">right_dropdown_index</span><span class="p">],</span>
                <span class="p">)</span>
                <span class="n">right_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">right_image</span><span class="o">.</span><span class="n">url</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
                <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
                <span class="k">return</span>

    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">right_dropdown_change</span><span class="p">,</span> <span class="n">names</span><span class="o">=</span><span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">left_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">left_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">left_names</span><span class="p">[</span><span class="n">left_index</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">right_index</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">right_dropdown</span><span class="o">.</span><span class="n">value</span> <span class="o">=</span> <span class="n">right_names</span><span class="p">[</span><span class="n">right_index</span><span class="p">]</span>

    <span class="n">close_button</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">ToggleButton</span><span class="p">(</span>
        <span class="n">value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
        <span class="n">tooltip</span><span class="o">=</span><span class="s2">&quot;Close the tool&quot;</span><span class="p">,</span>
        <span class="n">icon</span><span class="o">=</span><span class="s2">&quot;times&quot;</span><span class="p">,</span>
        <span class="c1"># button_style=&quot;primary&quot;,</span>
        <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span>
            <span class="n">height</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s2">&quot;28px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 0px 0px 4px&quot;</span>
        <span class="p">),</span>
    <span class="p">)</span>

    <span class="k">def</span> <span class="nf">close_btn_click</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">change</span><span class="p">[</span><span class="s2">&quot;new&quot;</span><span class="p">]:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">controls</span> <span class="o">=</span> <span class="n">controls</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">clear_layers</span><span class="p">()</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">layers</span> <span class="o">=</span> <span class="n">layers</span>

    <span class="n">close_button</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">close_btn_click</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>
    <span class="n">close_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
        <span class="n">widget</span><span class="o">=</span><span class="n">close_button</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;bottomright&quot;</span>
    <span class="p">)</span>

    <span class="k">try</span><span class="p">:</span>
        <span class="n">split_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span>
            <span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">split_control</span><span class="p">)</span>
        <span class="c1"># self.dragging = False</span>

        <span class="k">if</span> <span class="n">add_close_button</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">close_control</span><span class="p">)</span>

    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.user_roi_coords" class="doc doc-heading">
<code class="highlight language-python"><span class="n">user_roi_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.user_roi_coords" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Return the bounding box of the ROI as a list of coordinates.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>decimals</code></td>
        <td><code>int</code></td>
        <td><p>Number of decimals to round the coordinates to. Defaults to 4.</p></td>
        <td><code>4</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">user_roi_coords</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="mi">4</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Return the bounding box of the ROI as a list of coordinates.</span>

<span class="sd">    Args:</span>
<span class="sd">        decimals (int, optional): Number of decimals to round the coordinates to. Defaults to 4.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">bbox_coords</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">user_roi</span><span class="p">,</span> <span class="n">decimals</span><span class="o">=</span><span class="n">decimals</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.video_overlay" class="doc doc-heading">
<code class="highlight language-python"><span class="n">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Video&#39;</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.video_overlay" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Overlays a video from the Internet on the map.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>url</code></td>
        <td><code>str</code></td>
        <td><p>http URL of the video, such as "https://www.mapbox.com/bites/00188/patricia_nasa.webm"</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>bounds</code></td>
        <td><code>tuple</code></td>
        <td><p>bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>name of the layer to show on the layer control.</p></td>
        <td><code>&#39;Video&#39;</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">video_overlay</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Video&quot;</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Overlays a video from the Internet on the map.</span>

<span class="sd">    Args:</span>
<span class="sd">        url (str): http URL of the video, such as &quot;https://www.mapbox.com/bites/00188/patricia_nasa.webm&quot;</span>
<span class="sd">        bounds (tuple): bounding box of the video in the format of (lower_left(lat, lon), upper_right(lat, lon)), such as ((13, -130), (32, -100)).</span>
<span class="sd">        name (str): name of the layer to show on the layer control.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">video</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">VideoOverlay</span><span class="p">(</span><span class="n">url</span><span class="o">=</span><span class="n">url</span><span class="p">,</span> <span class="n">bounds</span><span class="o">=</span><span class="n">bounds</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="n">name</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">video</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">e</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">e</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.zoom_to_bounds" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.zoom_to_bounds" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Zooms to a bounding box in the form of [minx, miny, maxx, maxy].</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>bounds</code></td>
        <td><code>Union[List[float], Tuple[float, float, float, float]]</code></td>
        <td><p>A
list/tuple containing minx, miny, maxx, maxy values for the bounds.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to_bounds</span><span class="p">(</span>
    <span class="bp">self</span><span class="p">,</span> <span class="n">bounds</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="nb">float</span><span class="p">],</span> <span class="n">Tuple</span><span class="p">[</span><span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">,</span> <span class="nb">float</span><span class="p">]]</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Zooms to a bounding box in the form of [minx, miny, maxx, maxy].</span>

<span class="sd">    Args:</span>
<span class="sd">        bounds (Union[List[float], Tuple[float, float, float, float]]): A</span>
<span class="sd">            list/tuple containing minx, miny, maxx, maxy values for the bounds.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1">#  The ipyleaflet fit_bounds method takes lat/lon bounds in the form [[south, west], [north, east]].</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">fit_bounds</span><span class="p">([[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">1</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">0</span><span class="p">]],</span> <span class="p">[</span><span class="n">bounds</span><span class="p">[</span><span class="mi">3</span><span class="p">],</span> <span class="n">bounds</span><span class="p">[</span><span class="mi">2</span><span class="p">]]])</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.zoom_to_gdf" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zoom_to_gdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdf</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.zoom_to_gdf" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Zooms to the bounding box of a GeoPandas GeoDataFrame.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>gdf</code></td>
        <td><code>GeoDataFrame</code></td>
        <td><p>A GeoPandas GeoDataFrame.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to_gdf</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">gdf</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Zooms to the bounding box of a GeoPandas GeoDataFrame.</span>

<span class="sd">    Args:</span>
<span class="sd">        gdf (GeoDataFrame): A GeoPandas GeoDataFrame.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">bounds</span> <span class="o">=</span> <span class="n">gdf</span><span class="o">.</span><span class="n">total_bounds</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">zoom_to_bounds</span><span class="p">(</span><span class="n">bounds</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-method">



<h3 id="geemap.geemap.Map.zoom_to_me" class="doc doc-heading">
<code class="highlight language-python"><span class="n">zoom_to_me</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span></code>


<a href="#geemap.geemap.Map.zoom_to_me" class="headerlink" title="Permanent link">&para;</a></h3>

    <div class="doc doc-contents ">

      <p>Zoom to the current device location.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>Zoom level. Defaults to 14.</p></td>
        <td><code>14</code></td>
      </tr>
      <tr>
        <td><code>add_marker</code></td>
        <td><code>bool</code></td>
        <td><p>Whether to add a marker of the current device location. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">zoom_to_me</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">14</span><span class="p">,</span> <span class="n">add_marker</span><span class="o">=</span><span class="kc">True</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Zoom to the current device location.</span>

<span class="sd">    Args:</span>
<span class="sd">        zoom (int, optional): Zoom level. Defaults to 14.</span>
<span class="sd">        add_marker (bool, optional): Whether to add a marker of the current device location. Defaults to True.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">lat</span><span class="p">,</span> <span class="n">lon</span> <span class="o">=</span> <span class="n">get_current_latlon</span><span class="p">()</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">set_center</span><span class="p">(</span><span class="n">lon</span><span class="p">,</span> <span class="n">lat</span><span class="p">,</span> <span class="n">zoom</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_marker</span><span class="p">:</span>
        <span class="n">marker</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">Marker</span><span class="p">(</span>
            <span class="n">location</span><span class="o">=</span><span class="p">(</span><span class="n">lat</span><span class="p">,</span> <span class="n">lon</span><span class="p">),</span>
            <span class="n">draggable</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
            <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Device location&quot;</span><span class="p">,</span>
        <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">marker</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>





  </div>

    </div>

  </div>




  <div class="doc doc-object doc-function">



<h2 id="geemap.geemap.ee_tile_layer" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ee_tile_layer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s1">&#39;Layer untitled&#39;</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span><span class="p">)</span></code>


<a href="#geemap.geemap.ee_tile_layer" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Converts and Earth Engine layer to ipyleaflet TileLayer.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ee_object</code></td>
        <td><code>Collection|Feature|Image|MapId</code></td>
        <td><p>The object to add to the map.</p></td>
        <td><em>required</em></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>dict</code></td>
        <td><p>The visualization parameters. Defaults to {}.</p></td>
        <td><code>{}</code></td>
      </tr>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the layer. Defaults to 'Layer untitled'.</p></td>
        <td><code>&#39;Layer untitled&#39;</code></td>
      </tr>
      <tr>
        <td><code>shown</code></td>
        <td><code>bool</code></td>
        <td><p>A flag indicating whether the layer should be on by default. Defaults to True.</p></td>
        <td><code>True</code></td>
      </tr>
      <tr>
        <td><code>opacity</code></td>
        <td><code>float</code></td>
        <td><p>The layer's opacity represented as a number between 0 and 1. Defaults to 1.</p></td>
        <td><code>1.0</code></td>
      </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ee_tile_layer</span><span class="p">(</span>
    <span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">{},</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;Layer untitled&quot;</span><span class="p">,</span> <span class="n">shown</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">opacity</span><span class="o">=</span><span class="mf">1.0</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Converts and Earth Engine layer to ipyleaflet TileLayer.</span>

<span class="sd">    Args:</span>
<span class="sd">        ee_object (Collection|Feature|Image|MapId): The object to add to the map.</span>
<span class="sd">        vis_params (dict, optional): The visualization parameters. Defaults to {}.</span>
<span class="sd">        name (str, optional): The name of the layer. Defaults to &#39;Layer untitled&#39;.</span>
<span class="sd">        shown (bool, optional): A flag indicating whether the layer should be on by default. Defaults to True.</span>
<span class="sd">        opacity (float, optional): The layer&#39;s opacity represented as a number between 0 and 1. Defaults to 1.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">return</span> <span class="n">EELeafletTileLayer</span><span class="p">(</span><span class="n">ee_object</span><span class="p">,</span> <span class="n">vis_params</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">shown</span><span class="p">,</span> <span class="n">opacity</span><span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.geemap.get_basemap" class="doc doc-heading">
<code class="highlight language-python"><span class="n">get_basemap</span><span class="p">(</span><span class="n">name</span><span class="p">)</span></code>


<a href="#geemap.geemap.get_basemap" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Gets a basemap tile layer by name.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>name</code></td>
        <td><code>str</code></td>
        <td><p>The name of the basemap.</p></td>
        <td><em>required</em></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipylealfet.TileLayer | ipyleaflet.WMSLayer</code></td>
      <td><p>The basemap layer.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get_basemap</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Gets a basemap tile layer by name.</span>

<span class="sd">    Args:</span>
<span class="sd">        name (str): The name of the basemap.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipylealfet.TileLayer | ipyleaflet.WMSLayer: The basemap layer.</span>
<span class="sd">    &quot;&quot;&quot;</span>

    <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">name</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">():</span>
            <span class="n">basemap</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">name</span><span class="p">]</span>
            <span class="k">if</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="ow">in</span> <span class="p">[</span><span class="s2">&quot;xyz&quot;</span><span class="p">,</span> <span class="s2">&quot;normal&quot;</span><span class="p">,</span> <span class="s2">&quot;grau&quot;</span><span class="p">]:</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">TileLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                    <span class="n">max_zoom</span><span class="o">=</span><span class="mi">24</span><span class="p">,</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">elif</span> <span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;wms&quot;</span><span class="p">:</span>
                <span class="n">layer</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WMSLayer</span><span class="p">(</span>
                    <span class="n">url</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;url&quot;</span><span class="p">],</span>
                    <span class="n">layers</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;layers&quot;</span><span class="p">],</span>
                    <span class="n">name</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">],</span>
                    <span class="n">attribution</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;attribution&quot;</span><span class="p">],</span>
                    <span class="nb">format</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;format&quot;</span><span class="p">],</span>
                    <span class="n">transparent</span><span class="o">=</span><span class="n">basemap</span><span class="p">[</span><span class="s2">&quot;transparent&quot;</span><span class="p">],</span>
                <span class="p">)</span>
            <span class="k">return</span> <span class="n">layer</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
                <span class="s2">&quot;Basemap must be a string. Please choose from: &quot;</span>
                <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
            <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span>
            <span class="s2">&quot;Basemap must be a string. Please choose from: &quot;</span>
            <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">basemaps</span><span class="o">.</span><span class="n">keys</span><span class="p">()))</span>
        <span class="p">)</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.geemap.linked_maps" class="doc doc-heading">
<code class="highlight language-python"><span class="n">linked_maps</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="n">height</span><span class="o">=</span><span class="s1">&#39;400px&#39;</span><span class="p">,</span> <span class="n">ee_objects</span><span class="o">=</span><span class="p">[],</span> <span class="n">vis_params</span><span class="o">=</span><span class="p">[],</span> <span class="n">labels</span><span class="o">=</span><span class="p">[],</span> <span class="n">label_position</span><span class="o">=</span><span class="s1">&#39;topright&#39;</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.linked_maps" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Create linked maps of Earth Engine data layers.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>rows</code></td>
        <td><code>int</code></td>
        <td><p>The number of rows of maps to create. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
      <tr>
        <td><code>cols</code></td>
        <td><code>int</code></td>
        <td><p>The number of columns of maps to create. Defaults to 2.</p></td>
        <td><code>2</code></td>
      </tr>
      <tr>
        <td><code>height</code></td>
        <td><code>str</code></td>
        <td><p>The height of each map in pixels. Defaults to "400px".</p></td>
        <td><code>&#39;400px&#39;</code></td>
      </tr>
      <tr>
        <td><code>ee_objects</code></td>
        <td><code>list</code></td>
        <td><p>The list of Earth Engine objects to use for each map. Defaults to [].</p></td>
        <td><code>[]</code></td>
      </tr>
      <tr>
        <td><code>vis_params</code></td>
        <td><code>list</code></td>
        <td><p>The list of visualization parameters to use for each map. Defaults to [].</p></td>
        <td><code>[]</code></td>
      </tr>
      <tr>
        <td><code>labels</code></td>
        <td><code>list</code></td>
        <td><p>The list of labels to show on the map. Defaults to [].</p></td>
        <td><code>[]</code></td>
      </tr>
      <tr>
        <td><code>label_position</code></td>
        <td><code>str</code></td>
        <td><p>The position of the label, can be [topleft, topright, bottomleft, bottomright]. Defaults to "topright".</p></td>
        <td><code>&#39;topright&#39;</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Exceptions:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the length of ee_objects is not equal to rows*cols.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the length of vis_params is not equal to rows*cols.</p></td>
      </tr>
      <tr>
        <td><code>ValueError</code></td>
        <td><p>If the length of labels is not equal to rows*cols.</p></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>ipywidget</code></td>
      <td><p>A GridspecLayout widget.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">linked_maps</span><span class="p">(</span>
    <span class="n">rows</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">cols</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span>
    <span class="n">height</span><span class="o">=</span><span class="s2">&quot;400px&quot;</span><span class="p">,</span>
    <span class="n">ee_objects</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">vis_params</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">labels</span><span class="o">=</span><span class="p">[],</span>
    <span class="n">label_position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Create linked maps of Earth Engine data layers.</span>

<span class="sd">    Args:</span>
<span class="sd">        rows (int, optional): The number of rows of maps to create. Defaults to 2.</span>
<span class="sd">        cols (int, optional): The number of columns of maps to create. Defaults to 2.</span>
<span class="sd">        height (str, optional): The height of each map in pixels. Defaults to &quot;400px&quot;.</span>
<span class="sd">        ee_objects (list, optional): The list of Earth Engine objects to use for each map. Defaults to [].</span>
<span class="sd">        vis_params (list, optional): The list of visualization parameters to use for each map. Defaults to [].</span>
<span class="sd">        labels (list, optional): The list of labels to show on the map. Defaults to [].</span>
<span class="sd">        label_position (str, optional): The position of the label, can be [topleft, topright, bottomleft, bottomright]. Defaults to &quot;topright&quot;.</span>

<span class="sd">    Raises:</span>
<span class="sd">        ValueError: If the length of ee_objects is not equal to rows*cols.</span>
<span class="sd">        ValueError: If the length of vis_params is not equal to rows*cols.</span>
<span class="sd">        ValueError: If the length of labels is not equal to rows*cols.</span>

<span class="sd">    Returns:</span>
<span class="sd">        ipywidget: A GridspecLayout widget.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">grid</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">GridspecLayout</span><span class="p">(</span><span class="n">rows</span><span class="p">,</span> <span class="n">cols</span><span class="p">,</span> <span class="n">grid_gap</span><span class="o">=</span><span class="s2">&quot;0px&quot;</span><span class="p">)</span>
    <span class="n">count</span> <span class="o">=</span> <span class="n">rows</span> <span class="o">*</span> <span class="n">cols</span>

    <span class="n">maps</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ee_objects</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ee_objects</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">ee_objects</span> <span class="o">=</span> <span class="n">ee_objects</span> <span class="o">*</span> <span class="n">count</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">ee_objects</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The length of ee_objects must be equal to </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">vis_params</span> <span class="o">=</span> <span class="n">vis_params</span> <span class="o">*</span> <span class="n">count</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">vis_params</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The length of vis_params must be equal to </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="n">labels</span> <span class="o">=</span> <span class="n">labels</span> <span class="o">*</span> <span class="n">count</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">&lt;</span> <span class="n">count</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">ValueError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;The length of labels must be equal to </span><span class="si">{</span><span class="n">count</span><span class="si">}</span><span class="s2">.&quot;</span><span class="p">)</span>

    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">rows</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">j</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">cols</span><span class="p">):</span>
            <span class="n">index</span> <span class="o">=</span> <span class="n">i</span> <span class="o">*</span> <span class="p">(</span><span class="n">rows</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="n">j</span>
            <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span>
                <span class="n">height</span><span class="o">=</span><span class="n">height</span><span class="p">,</span>
                <span class="n">lite_mode</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
                <span class="n">add_google_map</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span>
                <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">margin</span><span class="o">=</span><span class="s2">&quot;0px&quot;</span><span class="p">,</span> <span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px&quot;</span><span class="p">),</span>
                <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
            <span class="p">)</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">ee_objects</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">m</span><span class="o">.</span><span class="n">addLayer</span><span class="p">(</span><span class="n">ee_objects</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">vis_params</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">])</span>

            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">labels</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
                <span class="n">label</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Label</span><span class="p">(</span>
                    <span class="n">labels</span><span class="p">[</span><span class="n">index</span><span class="p">],</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">padding</span><span class="o">=</span><span class="s2">&quot;0px 5px 0px 5px&quot;</span><span class="p">)</span>
                <span class="p">)</span>
                <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span>
                    <span class="n">widget</span><span class="o">=</span><span class="n">label</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="n">label_position</span>
                <span class="p">)</span>
                <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>

            <span class="n">maps</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">jslink</span><span class="p">((</span><span class="n">maps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;center&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;center&quot;</span><span class="p">))</span>
            <span class="n">widgets</span><span class="o">.</span><span class="n">jslink</span><span class="p">((</span><span class="n">maps</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="s2">&quot;zoom&quot;</span><span class="p">),</span> <span class="p">(</span><span class="n">m</span><span class="p">,</span> <span class="s2">&quot;zoom&quot;</span><span class="p">))</span>

            <span class="n">output</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Output</span><span class="p">()</span>
            <span class="k">with</span> <span class="n">output</span><span class="p">:</span>
                <span class="n">display</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
            <span class="n">grid</span><span class="p">[</span><span class="n">i</span><span class="p">,</span> <span class="n">j</span><span class="p">]</span> <span class="o">=</span> <span class="n">output</span>

    <span class="k">return</span> <span class="n">grid</span>
</code></pre></div>
        </details>
    </div>

  </div>



  <div class="doc doc-object doc-function">



<h2 id="geemap.geemap.ts_inspector" class="doc doc-heading">
<code class="highlight language-python"><span class="n">ts_inspector</span><span class="p">(</span><span class="n">layers_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">left_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">right_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span> <span class="n">width</span><span class="o">=</span><span class="s1">&#39;120px&#39;</span><span class="p">,</span> <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">],</span> <span class="n">zoom</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>


<a href="#geemap.geemap.ts_inspector" class="headerlink" title="Permanent link">&para;</a></h2>

    <div class="doc doc-contents ">

      <p>Creates a time series inspector.</p>

<p><strong>Parameters:</strong></p>
<table>
  <thead>
    <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
      <th>Default</th>
    </tr>
  </thead>
  <tbody>
      <tr>
        <td><code>layers_dict</code></td>
        <td><code>dict</code></td>
        <td><p>A dictionary of layers to be shown on the map. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>left_name</code></td>
        <td><code>str</code></td>
        <td><p>A name for the left layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>right_name</code></td>
        <td><code>str</code></td>
        <td><p>A name for the right layer. Defaults to None.</p></td>
        <td><code>None</code></td>
      </tr>
      <tr>
        <td><code>width</code></td>
        <td><code>str</code></td>
        <td><p>Width of the dropdown list. Defaults to "120px".</p></td>
        <td><code>&#39;120px&#39;</code></td>
      </tr>
      <tr>
        <td><code>center</code></td>
        <td><code>list</code></td>
        <td><p>Center of the map. Defaults to [40, -100].</p></td>
        <td><code>[40, -100]</code></td>
      </tr>
      <tr>
        <td><code>zoom</code></td>
        <td><code>int</code></td>
        <td><p>Zoom level of the map. Defaults to 4.</p></td>
        <td><code>4</code></td>
      </tr>
  </tbody>
</table>
<p><strong>Returns:</strong></p>
<table>
  <thead>
    <tr>
      <th>Type</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>leafmap.Map</code></td>
      <td><p>The Map instance.</p></td>
    </tr>
  </tbody>
</table>
        <details class="quote">
          <summary>Source code in <code>geemap/geemap.py</code></summary>
          <div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">ts_inspector</span><span class="p">(</span>
    <span class="n">layers_dict</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">left_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">right_name</span><span class="o">=</span><span class="kc">None</span><span class="p">,</span>
    <span class="n">width</span><span class="o">=</span><span class="s2">&quot;120px&quot;</span><span class="p">,</span>
    <span class="n">center</span><span class="o">=</span><span class="p">[</span><span class="mi">40</span><span class="p">,</span> <span class="o">-</span><span class="mi">100</span><span class="p">],</span>
    <span class="n">zoom</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span>
    <span class="o">**</span><span class="n">kwargs</span><span class="p">,</span>
<span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Creates a time series inspector.</span>

<span class="sd">    Args:</span>
<span class="sd">        layers_dict (dict, optional): A dictionary of layers to be shown on the map. Defaults to None.</span>
<span class="sd">        left_name (str, optional): A name for the left layer. Defaults to None.</span>
<span class="sd">        right_name (str, optional): A name for the right layer. Defaults to None.</span>
<span class="sd">        width (str, optional): Width of the dropdown list. Defaults to &quot;120px&quot;.</span>
<span class="sd">        center (list, optional): Center of the map. Defaults to [40, -100].</span>
<span class="sd">        zoom (int, optional): Zoom level of the map. Defaults to 4.</span>

<span class="sd">    Returns:</span>
<span class="sd">        leafmap.Map: The Map instance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="kn">import</span> <span class="nn">ipywidgets</span> <span class="k">as</span> <span class="nn">widgets</span>

    <span class="n">add_zoom</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">add_fullscreen</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="k">if</span> <span class="s2">&quot;toolbar_control&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;toolbar_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s2">&quot;draw_control&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;draw_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s2">&quot;measure_control&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;measure_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">if</span> <span class="s2">&quot;zoom_control&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">add_zoom</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;zoom_control&quot;</span><span class="p">]</span>
    <span class="k">if</span> <span class="s2">&quot;fullscreen_control&quot;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">kwargs</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fullscreen_control&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">add_fullscreen</span> <span class="o">=</span> <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;fullscreen_control&quot;</span><span class="p">]</span>

    <span class="k">if</span> <span class="n">layers_dict</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">layers_dict</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">keys</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">basemaps</span><span class="p">)</span><span class="o">.</span><span class="n">keys</span><span class="p">()</span>
        <span class="k">for</span> <span class="n">key</span> <span class="ow">in</span> <span class="n">keys</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">key</span><span class="p">][</span><span class="s2">&quot;type&quot;</span><span class="p">]</span> <span class="o">==</span> <span class="s2">&quot;wms&quot;</span><span class="p">:</span>
                <span class="k">pass</span>
            <span class="k">else</span><span class="p">:</span>
                <span class="n">layers_dict</span><span class="p">[</span><span class="n">key</span><span class="p">]</span> <span class="o">=</span> <span class="n">basemaps</span><span class="p">[</span><span class="n">key</span><span class="p">]</span>

    <span class="n">keys</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="n">layers_dict</span><span class="o">.</span><span class="n">keys</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">left_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">left_name</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
    <span class="k">if</span> <span class="n">right_name</span> <span class="ow">is</span> <span class="kc">None</span><span class="p">:</span>
        <span class="n">right_name</span> <span class="o">=</span> <span class="n">keys</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>

    <span class="n">left_layer</span> <span class="o">=</span> <span class="n">layers_dict</span><span class="p">[</span><span class="n">left_name</span><span class="p">]</span>
    <span class="n">right_layer</span> <span class="o">=</span> <span class="n">layers_dict</span><span class="p">[</span><span class="n">right_name</span><span class="p">]</span>

    <span class="n">m</span> <span class="o">=</span> <span class="n">Map</span><span class="p">(</span><span class="n">center</span><span class="o">=</span><span class="n">center</span><span class="p">,</span> <span class="n">zoom</span><span class="o">=</span><span class="n">zoom</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="n">control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">(</span><span class="n">left_layer</span><span class="o">=</span><span class="n">left_layer</span><span class="p">,</span> <span class="n">right_layer</span><span class="o">=</span><span class="n">right_layer</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">control</span><span class="p">)</span>
    <span class="c1"># m.dragging = False</span>

    <span class="n">left_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">left_name</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">left_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">left_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topleft&quot;</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">left_control</span><span class="p">)</span>

    <span class="n">right_dropdown</span> <span class="o">=</span> <span class="n">widgets</span><span class="o">.</span><span class="n">Dropdown</span><span class="p">(</span>
        <span class="n">options</span><span class="o">=</span><span class="n">keys</span><span class="p">,</span> <span class="n">value</span><span class="o">=</span><span class="n">right_name</span><span class="p">,</span> <span class="n">layout</span><span class="o">=</span><span class="n">widgets</span><span class="o">.</span><span class="n">Layout</span><span class="p">(</span><span class="n">width</span><span class="o">=</span><span class="n">width</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="n">right_control</span> <span class="o">=</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">WidgetControl</span><span class="p">(</span><span class="n">widget</span><span class="o">=</span><span class="n">right_dropdown</span><span class="p">,</span> <span class="n">position</span><span class="o">=</span><span class="s2">&quot;topright&quot;</span><span class="p">)</span>
    <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">right_control</span><span class="p">)</span>

    <span class="k">if</span> <span class="n">add_zoom</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">ZoomControl</span><span class="p">())</span>
    <span class="k">if</span> <span class="n">add_fullscreen</span><span class="p">:</span>
        <span class="n">m</span><span class="o">.</span><span class="n">add</span><span class="p">(</span><span class="n">ipyleaflet</span><span class="o">.</span><span class="n">FullScreenControl</span><span class="p">())</span>

    <span class="n">split_control</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">for</span> <span class="n">ctrl</span> <span class="ow">in</span> <span class="n">m</span><span class="o">.</span><span class="n">controls</span><span class="p">:</span>
        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">ctrl</span><span class="p">,</span> <span class="n">ipyleaflet</span><span class="o">.</span><span class="n">SplitMapControl</span><span class="p">):</span>
            <span class="n">split_control</span> <span class="o">=</span> <span class="n">ctrl</span>
            <span class="k">break</span>

    <span class="k">def</span> <span class="nf">left_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">split_control</span><span class="o">.</span><span class="n">left_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">layers_dict</span><span class="p">[</span><span class="n">left_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>

    <span class="n">left_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">left_change</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">right_change</span><span class="p">(</span><span class="n">change</span><span class="p">):</span>
        <span class="n">split_control</span><span class="o">.</span><span class="n">right_layer</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">layers_dict</span><span class="p">[</span><span class="n">right_dropdown</span><span class="o">.</span><span class="n">value</span><span class="p">]</span><span class="o">.</span><span class="n">url</span>

    <span class="n">right_dropdown</span><span class="o">.</span><span class="n">observe</span><span class="p">(</span><span class="n">right_change</span><span class="p">,</span> <span class="s2">&quot;value&quot;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">m</span>
</code></pre></div>
        </details>
    </div>

  </div>






  </div>

    </div>

  </div>







  
    
  
  
    
  


  <aside class="md-source-file">
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Last update">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M21 13.1c-.1 0-.3.1-.4.2l-1 1 2.1 2.1 1-1c.2-.2.2-.6 0-.8l-1.3-1.3c-.1-.1-.2-.2-.4-.2m-1.9 1.8-6.1 6V23h2.1l6.1-6.1zM12.5 7v5.2l4 2.4-1 1L11 13V7zM11 21.9c-5.1-.5-9-4.8-9-9.9C2 6.5 6.5 2 12 2c5.3 0 9.6 4.1 10 9.3-.3-.1-.6-.2-1-.2s-.7.1-1 .2C19.6 7.2 16.2 4 12 4c-4.4 0-8 3.6-8 8 0 4.1 3.1 7.5 7.1 7.9l-.1.2z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2020-08-22T14:37:32+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-08-22</span>
  </span>

    
    
      
  <span class="md-source-file__fact">
    <span class="md-icon" title="Created">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M14.47 15.08 11 13V7h1.5v5.25l3.08 1.83c-.41.28-.79.62-1.11 1m-1.39 4.84c-.36.05-.71.08-1.08.08-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8c0 .37-.03.72-.08 1.08.69.1 1.33.32 1.92.64.1-.56.16-1.13.16-1.72 0-5.5-4.5-10-10-10S2 6.5 2 12s4.47 10 10 10c.59 0 1.16-.06 1.72-.16-.32-.59-.54-1.23-.64-1.92M18 15v3h-3v2h3v3h2v-3h3v-2h-3v-3z"/></svg>
    </span>
    <span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-timeago"><span class="timeago" datetime="2020-08-22T14:37:32+00:00" locale="en"></span></span><span class="git-revision-date-localized-plugin git-revision-date-localized-plugin-iso_date">2020-08-22</span>
  </span>

    
    
    
  </aside>


  




                

              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; 2020 - 2024 Qiusheng Wu
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        <div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/giswqs" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://medium.com/@giswqs" target="_blank" rel="noopener" title="medium.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M180.5 74.262C80.813 74.262 0 155.633 0 256s80.819 181.738 180.5 181.738S361 356.373 361 256 280.191 74.262 180.5 74.262m288.25 10.646c-49.845 0-90.245 76.619-90.245 171.095s40.406 171.1 90.251 171.1 90.251-76.619 90.251-171.1H559c0-94.503-40.4-171.095-90.248-171.095Zm139.506 17.821c-17.526 0-31.735 68.628-31.735 153.274s14.2 153.274 31.735 153.274S640 340.631 640 256c0-84.649-14.215-153.271-31.742-153.271Z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/giswqs" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M459.37 151.716c.325 4.548.325 9.097.325 13.645 0 138.72-105.583 298.558-298.558 298.558-59.452 0-114.68-17.219-161.137-47.106 8.447.974 16.568 1.299 25.34 1.299 49.055 0 94.213-16.568 130.274-44.832-46.132-.975-84.792-31.188-98.112-72.772 6.498.974 12.995 1.624 19.818 1.624 9.421 0 18.843-1.3 27.614-3.573-48.081-9.747-84.143-51.98-84.143-102.985v-1.299c13.969 7.797 30.214 12.67 47.431 13.319-28.264-18.843-46.781-51.005-46.781-87.391 0-19.492 5.197-37.36 14.294-52.954 51.655 63.675 129.3 105.258 216.365 109.807-1.624-7.797-2.599-15.918-2.599-24.04 0-57.828 46.782-104.934 104.934-104.934 30.213 0 57.502 12.67 76.67 33.137 23.715-4.548 46.456-13.32 66.599-25.34-7.798 24.366-24.366 44.833-46.132 57.827 21.117-2.273 41.584-8.122 60.426-16.243-14.292 20.791-32.161 39.308-52.628 54.253"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/giswqs" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5m282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://youtube.com/@giswqs" target="_blank" rel="noopener" title="youtube.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 576 512"><!--! Font Awesome Free 6.7.2 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M549.655 124.083c-6.281-23.65-24.787-42.276-48.284-48.597C458.781 64 288 64 288 64S117.22 64 74.629 75.486c-23.497 6.322-42.003 24.947-48.284 48.597-11.412 42.867-11.412 132.305-11.412 132.305s0 89.438 11.412 132.305c6.281 23.65 24.787 41.5 48.284 47.821C117.22 448 288 448 288 448s170.78 0 213.371-11.486c23.497-6.321 42.003-24.171 48.284-47.821 11.412-42.867 11.412-132.305 11.412-132.305s0-89.438-11.412-132.305m-317.51 213.508V175.185l142.739 81.205z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.instant", "navigation.tracking", "navigation.top", "search.highlight", "search.share"], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.60a45f97.min.js"></script>
      
        <script src="../js/timeago.min.js"></script>
      
        <script src="../js/timeago_mkdocs_material.js"></script>
      
    
  </body>
</html>